---
series: "ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ì‹œë¦¬ì¦ˆ"
title: "Render Delegationí•˜ëŠ” React ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°"
categories: dev
tags: [react, ui, component, frontend]
image: /images/2024-02-18-render-delegation-react-component/thumbnail.png
comments: true
draft: false
---

import Image from '@components/Image';

ì´ì „ì— [Polymorphicí•œ React ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°](/posts/polymorphic-react-component)ë¼ëŠ” ê¸€ì„ ì‘ì„±í–ˆë‹¤. í•´ë‹¹ ê¸€ì—ì„œëŠ” `as` ì†ì„±ì„ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³€í˜•ì‹œí‚¤ëŠ” ê²ƒì„ ì†Œê°œí•˜ëŠ”ë° ì´ë¥¼ ì´ìš©í•˜ë©´ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ ì—¬ëŸ¬ ìš”ì†Œ(Element)ë‚˜ ê·¸ì— ë”°ë¥¸ ì†ì„±(Attribute)ì„ ì´ìš©í•  ìˆ˜ ìˆê³  ì´ë¥¼ ë„˜ì–´ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ í•©ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ ì´ë¥¼ ì´ìš©í•˜ì—¬ **ë¬´ì—‡ì´ë“ ì§€ ë  ìˆ˜ ìˆëŠ” ê°€ì¥ ì¶”ìƒí™”ëœ í˜•íƒœì˜ ì»´í¬ë„ŒíŠ¸**ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

ë‹¤ë§Œ ì´ ë°©ë²•ì€ ì—¬ëŸ¬ ë¹„íŒì„ ë°›ê¸°ë„ í•˜ëŠ”ë° ê°€ì¥ í° ì´ìœ ëŠ” **ëª¨í˜¸ì„±** ë•Œë¬¸ì´ë‹¤. `as` ì†ì„±ì„ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ê²°í•©í•˜ëŠ” ê²½ìš° ì „ë‹¬í•  ìˆ˜ ìˆëŠ” `prop`ì´ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì˜ ê²ƒì¸ì§€ ì•Œê¸° í˜ë“¤ë‹¤ëŠ” ì ê³¼ ì½”ë“œë§Œ ë´ì„œëŠ” ì–´ë–»ê²Œ ë Œë”ë§ë˜ëŠ”ì§€ ì•Œê¸° í˜ë“¤ë‹¤ëŠ” ì ì´ë‹¤. ê·¸ ì™¸ì˜ ë¹„íŒì ìœ¼ë¡œëŠ” ìë™ ì™„ì„±ì´ ëŠë ¤ì§„ë‹¤ê±°ë‚˜ TypeScriptì—ì„œ íƒ€ì…ì„ ì¶”ë¡ í•˜ê¸° ì–´ë µë‹¤ëŠ” ì  ë“±ì´ ìˆë‹¤.

ë”°ë¼ì„œ ì´ì— ëŒ€í•œ ëŒ€ì•ˆìœ¼ë¡œ ìì‹ ì˜ ì†ì„±ê³¼ í–‰ë™ì„ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ê²Œ ë„˜ê¸´ í›„ ìì‹ì´ ì§ì ‘ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ëŒ€ì‹ í•˜ì—¬ ë Œë”ë§í•˜ëŠ” ë°©ë²•ì¸ `Render Delegation`[^1]ì´ ë“±ì¥í–ˆë‹¤. ì´ëŠ” [Radix](https://www.radix-ui.com)ë¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ìœ ëª…í•´ì§„ ë°©ë²•ìœ¼ë¡œ Render Delegation ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë³´í†µ `asChild`ë¼ëŠ” ì†ì„±ì„ í†µí•´ í•´ë‹¹ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆê²Œ ì œê³µí•œë‹¤.

<Image src="/images/2024-02-18-render-delegation-react-component/render-delegation-component.png" width="70%" caption="Render Delegation ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ì„±" />

Render Delegation ì»´í¬ë„ŒíŠ¸ëŠ” ë³´í†µ `Slot`ê³¼ `Slottable`ì´ë¼ëŠ” ë‘ ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ êµ¬ì„±ëœë‹¤. `Slot`ì€ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ì—­í• ì„ í•˜ê³  `Slottable`ì€ `Slot`ì— ë“¤ì–´ê°ˆ ê²ƒì´ ë¬´ì—‡ì¸ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

ì°¸ê³ ë¡œ ê¸°ì¡´ Polymorphic ì»´í¬ë„ŒíŠ¸ê°€ í•´ê²°í•˜ë ¤ëŠ” ëª©ì ì¸ í•©ì„±ì„ í†µí•œ ë³€í˜•ì€ ê°™ì§€ë§Œ Render Delegation ì»´í¬ë„ŒíŠ¸ëŠ” **ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ì™€ í•©ì„±ì´ë  ì»´í¬ë„ŒíŠ¸ë¥¼ ì½”ë“œì—ì„œ ë¶„ë¦¬í•œë‹¤ëŠ” ì **ì´ ë‹¤ë¥´ë‹¤.

# ë¬¸ì œ ì¸ì‹í•˜ê¸°

ë§Œì•½ ì•ì„œ ì–¸ê¸‰í•œ Polymorphic ì»´í¬ë„ŒíŠ¸ì™€ ì´ë²ˆ ê¸€ì—ì„œ ë‹¤ë£° Render Delegation ì»´í¬ë„ŒíŠ¸ê°€ ì™œ í•„ìš”í•œì§€ ì˜ ëª¨ë¥¼ ìˆ˜ ìˆë‹¤. ì´ì „ì— ì‘ì„±í•œ ê¸€ì—ì„œë„ ì„¤ëª…í–ˆì§€ë§Œ ë‹¤ì‹œ í•œ ë²ˆ ê°„ë‹¨íˆ ì„¤ëª…í•´ë³´ê² ë‹¤.

```jsx
/**
 * Button.jsx
 */
export const Button = ({ ...props }) => {
  return (
    <button 
      style={{ backgroundColor: 'black', color: 'white' }} 
      {...props} 
    />
  );
}

/**
 * App.jsx
 */
import { Button } from './Button';

const App = () => {
  return (
    <div>
      <Button onClick={() => alert('Good!')}>Click Me!</Button>
    </div>
  );
}
```

ì„¤ëª…ì´ í•„ìš” ì—†ì„ ì •ë„ë¡œ ê°„ë‹¨í•œ ì½”ë“œë‹¤. ë‹¨ìˆœí•˜ê²Œ í‘œí˜„í–ˆì§€ë§Œ ìœ„ ì½”ë“œì²˜ëŸ¼ ìŠ¤íƒ€ì¼ë§Œ ì ìš©í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ì‹¤ì œë¡œë„ ë§ì´ ì‚¬ìš©ëœë‹¤. Button ì»´í¬ë„ŒíŠ¸ëŠ” propìœ¼ë¡œ ë„˜ê¸°ëŠ” ê°’ì„ button íƒœê·¸ì˜ ì†ì„±ìœ¼ë¡œ ì „ë¶€ ë„˜ê¸°ê¸° ë•Œë¬¸ì— ê½¤ í™•ì¥ì„± ìˆê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë° ë§Œì•½ ë²„íŠ¼ì— í˜ì´ì§€ ë§í¬ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?

```jsx
import { Button } from './Button';

const App = () => {
  return (
    <div>
      <a href="https://kciter.so">
        <Button>Click Me!</Button>
      </a>
    </div>
  );
}
```

ìœ„ ì²˜ëŸ¼ ì‘ì„±í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ ì¬ì‚¬ìš©ì„± ì¸¡ë©´ì—ì„  ê·¸ë‹¤ì§€ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹ˆë‹¤. ì¶”í›„ ì¬ì‚¬ìš©ì„ ê³ ë ¤í•˜ì—¬ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

```jsx
/**
 * Button.jsx
 */
export const Button = ({ ...props }) => {
  return (
    <button 
      style={{ backgroundColor: 'black', color: 'white' }} 
      {...props} 
    />
  );
}

/**
 * LinkButton.jsx
 */
import { Button } from './Button';

export const LinkButton = ({ href, ...props }) => {
  return (
    <a href={href}>
      <Button {...props} />
    </a>
  );
}

/**
 * App.jsx
 */
import { LinkButton } from './LinkButton';

const App = () => {
  return (
    <div>
      <LinkButton href="https://kciter.so">Click Me!</LinkButton>
    </div>
  );
}
```

ìœ„ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ë„ ìˆì§€ë§Œ ì´ ê²½ìš° a íƒœê·¸ê°€ í™•ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë¬¸ì œì ì´ ìˆê³  ì»´í¬ë„ŒíŠ¸ì˜ ì˜ì¡´ ê´€ê³„ê°€ ìƒˆë¡­ê²Œ ì¶”ê°€ëœë‹¤ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. ê·¸ë¦¬ê³  ë§Œì•½ react-routerë‚˜ Next.jsë¥¼ ì‚¬ìš©í•˜ì—¬ SPAë¥¼ ìœ„í•œ Link ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë˜ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì¤„ ìˆ˜ ë°–ì— ì—†ë‹¤. ì´ ë¬¸ì œì˜ í•´ê²°ë²•ìœ¼ë¡œ Polymorphic ì»´í¬ë„ŒíŠ¸ë‚˜ Render Delegation ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

# ì‚´í´ë³´ê¸°

ì•ì„œ ì–¸ê¸‰í•œ [Radix](https://www.radix-ui.com)ì—ì„œëŠ” [asChild](https://www.radix-ui.com/primitives/docs/guides/composition)ë¥¼ í†µí•´ Render Delegationì´ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê³µí•œë‹¤. í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ë™ì‘ì„ ì‚´í´ë³´ì.

## ì—¿ë³´ê¸°

ë¨¼ì € ì•„ì£¼ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ì‚´í´ë³´ì. ë‹¤ìŒì€ Radixì—ì„œ ì œê³µí•˜ëŠ” `Label`ì„ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œë‹¤.

```jsx
import * as Label from "@radix-ui/react-label";

const App = () => {
  return (
    <div>
      {/* asChildë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš° */}
      <Label.Root>
        https://kciter.so
      </Label.Root>
    </div>
  );
};
```

ìœ„ ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” `Label.Root` ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•˜ë©´ íŠ¹ë³„í•œ ê¸°ëŠ¥ ì—†ì´ `label`ì„ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ ë§Œì•½ ë§í¬ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ `asChild` ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
import * as Label from "@radix-ui/react-label";

const App = () => {
  return (
    <div>
      {/* asChildë¥¼ ì‚¬ìš©í•œ ê²½ìš° */}
      <Label.Root asChild>
        <a href="https://kciter.so">https://kciter.so</a>
      </Label.Root>
    </div>
  );
};
```

<Image src="/images/2024-02-18-render-delegation-react-component/aschild-basic-example.png" caption="ìš”ì†Œê°€ ë³€ê²½ë˜ì—ˆë‹¤" />

ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ë Œë”ë§ë˜ëŠ” ìš”ì†Œê°€ `a`ë¡œ ë³€ê²½ëœë‹¤.

## Slot ì‚¬ìš©í•˜ê¸°

ì•ì„œ ì‚´í´ë³¸ ì˜ˆì œëŠ” ì´ë¯¸ ì œê³µí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ë‹¨ìˆœíˆ ìš”ì†Œë¥¼ ë³€ê²½í•˜ê¸°ë§Œ í•˜ëŠ” ì•„ì£¼ ê°„ë‹¨í•œ ì˜ˆì œì˜€ë‹¤. Radixì—ì„œ ì œê³µí•˜ëŠ” [Slot](https://www.radix-ui.com/primitives/docs/utilities/slot)ì„ ì‚¬ìš©í•˜ë©´ ì§ì ‘ Render Delegationì´ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```jsx
import { Slot } from "@radix-ui/react-slot";

const Button = ({ asChild, ...props }) => {
  const Element = asChild ? Slot : "button";
  return (
    <Element 
      {...props}
      style={{
        padding: "10px",
        border: "1px solid #000",
        borderRadius: "5px",
        backgroundColor: 'transparent',
        fontSize: 12
      }}
    />
  );
};

const App = () => {
  return (
    <div>
      <Button>
        This is button
      </Button>

      <Button asChild>
        <a href="https://kciter.so">This is link</a>
      </Button>
    </div>
  );
};
```

`Slot` ì»´í¬ë„ŒíŠ¸ëŠ” `children`ìœ¼ë¡œ ë°›ì€ JSX ìš”ì†Œë¥¼ ë Œë”ë§í•œë‹¤. ìœ„ ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ `asChild` ì†ì„±ì´ `true`ì¼ ë•ŒëŠ” `Slot` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  `false`ì¼ ë•ŒëŠ” `button`ë¥¼ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ `asChild`ë¥¼ ì‚¬ìš©í•œ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ ê²°ê³¼ë¥¼ ë³´ë©´ ê¸°ì¡´ `Button` ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„¤ì •í•œ ìŠ¤íƒ€ì¼ì€ ë³€í•˜ì§€ ì•Šì§€ë§Œ ìš”ì†Œê°€ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<Image src="/images/2024-02-18-render-delegation-react-component/slot-example.png" width="50%" caption="asChild ì—¬ë¶€ì— ë”°ë¼ ë Œë”ë§ì´ ë‹¬ë¼ì§„ë‹¤" />

ì¦‰ Slotì„ ì´ìš©í•˜ì—¬ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ì†ì„±ì„ ìì‹ ì»´í¬ë„ŒíŠ¸ì— ë„˜ê¸°ê³  ë Œë”ë§ì„ ìœ„ì„í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

## Slottable ì‚¬ìš©í•˜ê¸°

ì´ì „ ì˜ˆì œëŠ” Slotì„ ì´ìš©í•˜ì—¬ ëª¨ë“  ê²ƒì„ ìœ„ì„í–ˆë‹¤ë©´ Slottableì„ ì´ìš©í•˜ì—¬ **ì¼ë¶€ë¶„ë§Œ ìœ„ì„**í•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒ ì˜ˆì œë¥¼ ì‚´í´ë³´ì.

```jsx
import { Slot, Slottable } from "@radix-ui/react-slot";

const Icon = () => (
  <span>ğŸ”´</span>
)

const Button = ({ asChild, icon, children, ...props }) => {
  const Element = asChild ? Slot : "button";
  return (
    <Element 
      {...props}
      style={{
        padding: "10px",
        border: "1px solid #000",
        borderRadius: "5px",
        backgroundColor: 'transparent',
        fontSize: 12
      }}
    >
      {icon}
      <Slottable>{children}</Slottable>
    </Element>
  );
};

const App = () => {
  return (
    <div>
      <Button icon={<Icon />}>
        This is button
      </Button>

      <Button icon={<Icon />} asChild>
        <a href="https://kciter.so">This is link</a>
      </Button>
    </div>
  );
};
```

Slottable ì»´í¬ë„ŒíŠ¸ëŠ” Slot ì»´í¬ë„ŒíŠ¸ë¡œ ë Œë”ë§ë  ì»´í¬ë„ŒíŠ¸ì˜ `children`ì´ ë“¤ì–´ê°ˆ ê³³ì„ ì •í•  ìˆ˜ ìˆë‹¤. ì¦‰, ìœ„ ì½”ë“œì—ì„  `Button`ì˜ `children`ì´ ì•„ë‹Œ `a` ìš”ì†Œì˜ `children`ì´ Slottable ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ê²Œ ëœë‹¤.

<Image src="/images/2024-02-18-render-delegation-react-component/slottable-example.png" width="50%" caption="ë Œë”ë§ ê²°ê³¼" />

ì‹¤ì œë¡œ ë Œë”ë§ëœ ì½”ë“œë¥¼ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```html
<div>
  <button style="...">
    <span>ğŸ”´</span>
    This is button
  </button>
  
  <a href="https://kciter.so" style="...">
    <span>ğŸ”´</span>
    This is link
  </a>
</div>
```

ê²°ê³¼ì ìœ¼ë¡œ `icon` ì†ì„±ì€ `Button` ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„¤ì •í•œëŒ€ë¡œ ë”°ë¥´ì§€ë§Œ ê·¸ ì™¸ ì†ì„±ì€ `asChild` ì†ì„±ì— ë”°ë¼ ìœ„ì„ëœë‹¤. ì¦‰, ìœ„ì„í•˜ê³  ì‹¶ì€ ë¶€ë¶„ë§Œ ë”°ë¡œ ì§€ì •í•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ì´ë ‡ê²Œ Slottableì„ ì‚¬ìš©í•˜ë©´ ì¡°ê¸ˆ ë” í’ë¶€í•œ í‘œí˜„ì´ ê°€ëŠ¥í•´ì§„ë‹¤. ì°¸ê³ ë¡œ Slotë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ Slot ë‚´ë¶€ì— Slottableì„ ìµœìƒìœ„ë¡œ ë‘¬ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.

# JavaScriptì—ì„œ êµ¬í˜„í•˜ê¸°

ì´ì œ Slotê³¼ Slottable ì»´í¬ë„ŒíŠ¸ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•˜ìœ¼ë‹ˆ ì´ ë‘ ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ì. ë¨¼ì € JavaScriptë¡œ êµ¬í˜„í•´ë³´ì.

## Slot êµ¬í˜„í•˜ê¸°

Slot ì»´í¬ë„ŒíŠ¸ëŠ” `children`ì„ ì¡°ê¸ˆë§Œ ë³€í˜•í•´ì„œ ë Œë”ë§í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ì•„ì£¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```jsx
// Slot.jsx

import React from "react";

export const Slot = ({ children, ...props }) => {
  if (React.isValidElement(children)) {
    return React.cloneElement(children, {
      ...props,
      ...children.props,
    });
  }

  console.warn("Slot component should have only one React element as a child");

  return null;
};
```

ìœ„ ì½”ë“œì—ì„œ `Slot` ì»´í¬ë„ŒíŠ¸ëŠ” `children`ìœ¼ë¡œ ë°›ì€ JSX ìš”ì†Œë¥¼ ë Œë”ë§í•œë‹¤. ë§Œì•½ `children`ì´ JSX ìš”ì†Œë¼ë©´ `props`ë¥¼ í•©ì„±í•˜ì—¬ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ ë Œë”ë§í•˜ê³  ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ë Œë”ë§í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë•Œ `children`ì´ React Elementê°€ ì•„ë‹ˆê±°ë‚˜ ì—¬ëŸ¬ ê°œ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°ì—” ê²½ê³  ë¡œê·¸ë¥¼ ë³´ì—¬ì£¼ê³  `null`ì„ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤. ê·¸ëŸ¼ ë²Œì¨ `Slot`ì„ êµ¬í˜„í–ˆë‹¤. ì´ì „ì— Radix ì˜ˆì œì— ì‚¬ìš©í–ˆë˜ ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸í•˜ë©´ ì˜ ëŒì•„ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```jsx
// App.jsx

import { Slot } from "./Slot";

const Button = ({ asChild, ...props }) => {
  const Element = asChild ? Slot : "button";
  return (
    <Element {...props} style={/* ... */} />
  );
};

const App = () => {
  return (
    <div>
      <Button>
        This is button
      </Button>

      <Button asChild>
        <a href="https://kciter.so">This is link</a>
      </Button>
    </div>
  );
};
```

<Image src="/images/2024-02-18-render-delegation-react-component/handmade-slot.png" width="70%" caption="ì˜ ë™ì‘í•œë‹¤" />

## Slottable êµ¬í˜„í•˜ê¸°

ê·¸ëŸ¼ ì´ë²ˆì—ëŠ” `Slottable` ê°œë…ì„ êµ¬í˜„í•´ë³´ì.

```jsx
// Slottable.jsx

export const Slottable = ({ children }) => {
  return <>children</>;
}
```

`Slottable` ì»´í¬ë„ŒíŠ¸ëŠ” ë”°ë¡œ í•˜ëŠ”ê²Œ ì—†ë‹¤. ê·¸ì € ìŠ¤ìŠ¤ë¡œ `Slottable`ë¼ëŠ” ê²ƒì„ ì•Œë ¤ì¤„ ìˆ˜ë§Œ ìˆìœ¼ë©´ ë˜ê¸°ì— ìœ„ì™€ ê°™ì´ êµ¬í˜„í•˜ë©´ ëœë‹¤. ëŒ€ì‹  ê¸°ì¡´ì— êµ¬í˜„í–ˆë˜ Slot ì»´í¬ë„ŒíŠ¸ì˜ ë¡œì§ì„ ë³€ê²½í•  í•„ìš”ê°€ ìˆë‹¤. ì´ ë¶€ë¶„ì´ ì¡°ê¸ˆ ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤.

```jsx
import React from "react";
import { Slottable } from "./Slottable";

export const Slot = ({ children, ...props }) => {
  const childrenArray = React.Children.toArray(children);
  const slottable = childrenArray.find((child) => {
    return React.isValidElement(child) && child.type === Slottable
  });

  if (slottable) { // Slottableì´ ìˆë‹¤ë©´
    const newElement = slottable.props.children;
    const newChildren = childrenArray.map((child) => {
      if (child !== slottable) return child;

      if (React.isValidElement(newElement)) {
        return newElement.props.children;
      } else {
        console.warn(
          "Slot component should have only one React element as a child"
        );
      }

      return null;
    });

    return React.isValidElement(newElement)
      ? React.cloneElement(
          newElement, 
          { ...props, ...newElement.props }, 
          newChildren
        )
      : null
  }

  if (React.isValidElement(children)) {
    return React.cloneElement(children, {
      ...props,
      ...children.props,
    });
  }

  console.warn("Slot component should have only one React element as a child");

  return null;
};
```

ê¸°ì¡´ ì½”ë“œì—ì„œ ë‹¬ë¼ì§„ ì ì€ Slottableì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ìˆë‹¤ë©´ ì´ì— ëŒ€í•´ ì²˜ë¦¬í•´ì£¼ëŠ” ë¶€ë¶„ì´ë‹¤. ì´ ë¶€ë¶„ì„ ì œì™¸í•˜ë©´ ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼í•˜ë‹¤. ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ Slotê³¼ Slottableì„ ì´ìš©í•˜ì—¬ ì´ì „ì— ì‚¬ìš©í–ˆë˜ ì˜ˆì œë¡œ ì‹¤í–‰í•´ë³´ë©´ ì˜ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<Image src="/images/2024-02-18-render-delegation-react-component/handmade-slottable.png" width="70%" caption="ì•„ì£¼ ì˜ ë™ì‘í•œë‹¤" />

# TypeScriptì—ì„œ êµ¬í˜„

ì´ì œ TypeScriptì—ì„œ êµ¬í˜„í•´ë³´ì. íƒ€ì…ì„ ì‹ ê²½ì¨ì•¼ í•´ì„œ êµ¬í˜„ì´ ë³µì¡í•˜ì§€ ì•Šì„ê¹Œ ì‹¶ì§€ë§Œ Render Delegation ì»´í¬ë„ŒíŠ¸ëŠ” Polymorphic ì»´í¬ë„ŒíŠ¸ì™€ ë‹¤ë¥´ê²Œ ì»´í¬ë„ŒíŠ¸ê°€ ì½”ë“œì—ì„œ ë¶„ë¦¬ë˜ê¸° ë•Œë¬¸ì— íƒ€ì… ì¶”ë¡ ì´ ì‰½ë‹¤. ë”°ë¼ì„œ TypeScriptì—ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì–´ë µì§€ ì•Šë‹¤.

## íƒ€ì… ë¶™ì´ê¸°

ë¨¼ì € Slot ì»´í¬ë„ŒíŠ¸ì— íƒ€ì…ì„ ë¶™ì´ë©´ì„œ ë‹¤ì‹œ êµ¬í˜„í•´ë³´ì.

```tsx
// Slot.tsx

import React from "react";

export interface SlotProps extends React.HTMLAttributes<HTMLElement> {
  children: React.ReactNode;
}

export type RenderDelegationProps<T> = T & {
  asChild?: boolean;
};

export const Slot = ({ children, ...props }: SlotProps) => {
  if (React.isValidElement(children)) {
    return React.cloneElement(children, {
      ...props,
      ...children.props,
    });
  }

  console.warn("Slot component should have only one React element as a child");

  return null;
};
```

íƒ€ì…ì„ ì•„ì£¼ ìƒì‹ì ì¸ ìˆ˜ì¤€ ì •ë„ë¡œ ë¶™ì˜€ëŠ”ë° ë²Œì¨ ì™„ì„±ëë‹¤. ì½”ë“œ ì¤‘ `RenderDelegationProps`ëŠ” Render Delegationì„ ì‚¬ìš©í•  ì»´í¬ë„ŒíŠ¸ì— ë¶™ì¼ ìˆ˜ ìˆëŠ” íƒ€ì…ì´ë‹¤. ì´ íƒ€ì…ì„ ì´ìš©í•˜ë©´ `asChild` ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ì´ì–´ì„œ Slottable ê°œë…ê³¼ ê´€ë ¨ëœ ë¡œì§ì— íƒ€ì…ì„ ë¶™ì´ë©´ì„œ ë‹¤ì‹œ êµ¬í˜„í•´ë³´ì.

```tsx
// Slottable.tsx

import React from "react";

export interface SlottableProps {
  children: React.ReactNode;
}

export const Slottable = ({ children }: SlottableProps) => {
  return <>children</>;
};
```

ë§ˆì°¬ê°€ì§€ë¡œ ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ì´ì œ Slot ì»´í¬ë„ŒíŠ¸ì˜ ë¡œì§ì„ ë³€ê²½í•˜ë©´ì„œ íƒ€ì…ì„ ë¶™ì´ë©´ ëœë‹¤.

```tsx
// Slot.tsx

import React from "react";
import { Slottable, SlottableProps } from "./Slottable";

export interface SlotProps extends React.HTMLAttributes<HTMLElement> {
  children: React.ReactNode;
}

export type AsChildProps<T> = T & {
  asChild?: boolean;
};

export const Slot = ({ children, ...props }: SlotProps) => {
  const childrenArray = React.Children.toArray(children);
  const slottable = childrenArray.find((child) => {
    return React.isValidElement(child) && child.type === Slottable;
  }) as React.ReactElement<SlottableProps>;

  if (slottable) {
    const newElement = slottable.props.children;
    const newChildren = childrenArray.map((child) => {
      if (child !== slottable) return child;

      if (React.isValidElement(newElement)) {
        return newElement.props.children;
      } else {
        console.warn(
          "Slot component should have only one React element as a child"
        );
      }

      return null;
    });

    return React.isValidElement(newElement)
      ? React.cloneElement(
          newElement,
          { ...props, ...newElement.props },
          newChildren
        )
      : null;
  }

  if (React.isValidElement(children)) {
    return React.cloneElement(children, {
      ...props,
      ...children.props,
    });
  }

  console.warn("Slot component should have only one React element as a child");

  return null;
};
```

ë§ˆì°¬ê°€ì§€ë¡œ ê¸°ì¡´ ì½”ë“œì™€ í¬ê²Œ ë‹¤ë¥¸ì ì´ ì—†ë‹¤. ë”± í•œ ë¼ì¸ì´ ì¶”ê°€ë˜ì—ˆëŠ”ë° ì´ëŠ” `Slottable` ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ì€ í›„ ì–´ë–¤ íƒ€ì…ì¸ì§€ ëª…ì‹œí•´ì£¼ëŠ” ê²ƒ ë¿ì´ë‹¤. ë§Œì•½ TypeScriptì˜ [ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œ ë¬¸ë²•](https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates)ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.

```tsx
// Slot.tsx

function isSlottable(child: React.ReactNode): child is React.ReactElement {
  return React.isValidElement(child) && child.type === Slottable;
}

export const Slot = ({ children, ...props }: SlotProps) => {
  const childrenArray = React.Children.toArray(children);
  const slottable = childrenArray.find(isSlottable);
  
  // ...
}
```

<!--

## ref ë°›ì•„ì˜¤ê¸°

## prop ë³‘í•© ë¬¸ì œ

# ê³ ê¸‰ ì‚¬ìš©ë²•

## ë‹¤ì¤‘ ê²°í•©

# Polymorphic vs Render Delegation

https://sandroroth.com/blog/react-polymorphic-components/
https://github.com/ariakit/ariakit/issues/1245

-->

# ë§ˆì¹˜ë©°

ì´ì „ì— í¬ìŠ¤íŒ…í•œ `as`ë¥¼ ì´ìš©í•œ Polymorphic ì»´í¬ë„ŒíŠ¸ì™€ `asChild`ë¥¼ ì´ìš©í•˜ëŠ” Slottable ì»´í¬ë„ŒíŠ¸ëŠ” ê°ê° ì¥ë‹¨ì ì´ ìˆë‹¤. ë”°ë¼ì„œ ë¬´ì—‡ì´ ë” ì¢‹ë‹¤ë©´ì„œ ì¶”ì¢…í•˜ëŠ” ê²ƒë³´ë‹¨ ë‹¤ì–‘í•œ íŒ¨í„´ì´ ìˆìŒì„ ì¸ì§€í•˜ê³  ìƒí™©ì— ë”°ë¼ ì ì ˆí•œ ë°©ë²•ì„ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì°¸ê³ ë¡œ ì´ í¬ìŠ¤íŒ…ì„ í†µí•´ ë§Œë“¤ì–´ì§„ ìµœì¢…ì ì¸ ì½”ë“œëŠ” [GitHub ì €ì¥ì†Œ](https://github.com/kciter/render-delegation-react-component-sample)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

[^1]: ë Œë”ë§ì„ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ë§¡ê¸°ê¸° ë•Œë¬¸ì— Render Delegationì´ë¼ ë¶€ë¥¸ë‹¤.