<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.4"/><meta name="theme-color" content="#ffffff"/><style data-href="/styles.2c8dcdcc73805e7a8bfa.css" data-identity="gatsby-global-css">.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;text-align:right;-webkit-user-select:none;user-select:none}.command-line-prompt>span:before{opacity:.7}.command-line-prompt>span[data-continuation-prompt]:before{content:attr(data-continuation-prompt)}.command-line span.token.output{opacity:.7}code[class*=language-],pre[class*=language-]{color:#5c6e74;direction:ltr;font-family:Source Code Pro,monospace;font-size:13px;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:none;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::mozselection,code[class*=language-]::selection,pre[class*=language-]::mozselection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:#fff;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{background:#f9f2f4;border-radius:3px;color:#db4c69;padding:.25em .5em;position:relative;top:-1px;white-space:normal}.namespace{opacity:.7}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#999}.token.boolean,.token.constant,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[data-line]{position:relative}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight{background:#f7efda;box-shadow:inset 5px 0 0 #87d8ff;left:0;line-height:inherit;margin-top:1em;padding-bottom:inherit;padding-left:0;padding-right:0;padding-top:inherit;pointer-events:none;position:absolute;right:0;white-space:pre;z-index:0}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}.gatsby-highlight pre{float:left;min-width:100%}.gatsby-highlight{background-color:#fff;border-radius:.3em;box-shadow:0 5px 20px rgba(0,0,0,.12);margin:32px auto;overflow:auto;padding:1em}.gatsby-highlight pre[class*=language-]{background-color:transparent;float:left;margin:0;min-width:100%;overflow:initial;padding:0}.gatsby-highlight-code-line{background:#fffbdd;border-left:.25em solid #87d8ff;display:block;margin-left:-1em;margin-right:-1em;padding-left:.75em;padding-right:1em}h1{border-bottom:1px solid #eee;font-size:2rem;padding-bottom:12px}h1 a{text-decoration:none}h2{border-bottom:1px solid #eee;font-size:1.6em;padding-bottom:8px}h3{font-size:1.3em}h3,h4{margin:8px 0}h4{font-size:1.2em}h1,h2,h3,h4,h5,h6{color:#454f5b;margin-top:48px}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{color:#454f5b!important;text-decoration:none}a{color:#454f5b;text-decoration:underline}img,video{border-radius:5px;height:auto;max-width:100%}blockquote{background-color:#eee;border-left:.25em solid #ccc;color:#454f5b;line-height:1.5;margin:10px 0;padding:8px 16px}hr{border-top:1px solid #ccc}.thumbnail-container{border-radius:8px;box-shadow:0 0 10px 2px rgba(0,0,0,.05);margin-bottom:25px;max-width:100%}.thumbnail-container a,.thumbnail-container img{display:block;object-fit:cover;width:100%}.post-container{line-height:1.75rem;position:relative}.post-content a{color:#5c6ac4;text-decoration:none}.post-content a:hover{text-decoration:underline}.post-content a.footnote-ref,.post-content a[data-footnote-ref]{color:#ff6f00}.post-content>p:first-letter{margin-left:.3em}.post-content ul{word-break:break-all}@media (max-width:30em){.post-content ul{list-style-position:outside;padding-left:24px}.post-content li>ul{list-style-position:outside;padding-left:12px}}sup{font-weight:400;position:relative;top:-.5em;vertical-align:top}.post-title{border:none;line-height:1.2;margin:0;padding:0}.post-date{color:#9a9a9a;display:block;font-family:Quattrocento Sans,sans-serif;font-size:.8rem;margin-bottom:1rem;margin-top:3px}@media (max-width:30rem){.posts>h1{font-size:1.5rem}}figure{margin:24px 40px;text-align:center}@media (max-width:30em){figure{margin:24px 0}}figcaption{color:#637381;font-size:12px;text-align:center}.footnotes{border-top:1px solid #eee;font-size:12px;margin-top:48px}.footnotes ol{line-height:16px;padding-left:16px}.footnotes ol li{margin-top:8px;padding-left:4px}.footnotes ol p{margin:0}.footnotes ol li::marker{color:#ff6f00}.footnotes ol li .footnote-backref{margin-left:5px}table{border-collapse:collapse;margin-bottom:30px;width:100%}table,td,th{border:1px solid #888}td,th{padding:8px;text-align:left}.sharing-icons a{padding-right:10px}.fa-envelope{padding:5px;transition:.5s}.fa-envelope:hover{color:#f39c12}.fa-twitter{padding:5px;transition:color .5s}.fa-twitter:hover{color:#00aced}.fa-instagram{padding:5px;transition:color .5s}.fa-instagram:hover{color:#375989}.fa-github{padding:5px;transition:color .5s}.fa-github:hover{color:#343434}.fa-linkedin{padding:5px;transition:color .5s}.fa-linkedin:hover{color:#0073a4}.fa-facebook{padding:5px;transition:color .5s}.fa-facebook:hover{color:#3d5b99}.fa-google-plus{padding:5px;transition:color .5s}.fa-google-plus:hover{color:#e64a41}.fa-pinterest{padding:5px;transition:color .5s}.fa-pinterest:hover{color:#bd081c}.fa-medium{padding:5px;transition:color .5s}.fa-medium:hover{color:#00ab6c}.fa-codepen{padding:5px;transition:color .5s}.fa-codepen:hover{color:#000}.fa-rss-square{padding:5px;transition:color .5s}.fa-rss-square:hover{color:#f60}.fa-user{padding:5px;transition:color .5s}.fa-user:hover{color:#00a962}[data-tooltip]{position:relative}[data-tooltip]:after{background-color:#212b36;border-left:6px solid #ff6f00;border-radius:2px;box-shadow:1px 2px 6px rgba(0,0,0,.3);color:#fff;content:attr(data-tooltip);display:none;font-size:12px;height:auto;left:10px;line-height:16px;max-width:400px;padding:8px 10px;pointer-events:none;position:absolute;top:0;width:-webkit-max-content;width:max-content;z-index:1000}[data-tooltip]:focus:after,[data-tooltip]:hover:after{display:block}@media (max-width:30em){[data-tooltip]:focus:after,[data-tooltip]:hover:after{display:none}}.member-container{display:flex;padding:24px 0}.member-container .avatar{flex:0 1 160px}.avatar img{border-radius:50%;width:100%}.member-container .summary{flex:1 1;margin-left:32px}.member-container{display:block}.member-container .avatar{display:block;margin:0 auto;max-width:300px;width:50%}.member-container .summary{font-size:12px;margin-left:0;text-align:center}.member-container .summary .name{font-size:28px;font-weight:100;margin-top:18px}.member-container .summary .description{font-weight:100;margin-top:8px}.tiny-header{color:#212b36;font-size:16px;font-weight:700}.gatsby-highlight{padding:0;width:95%}.gatsby-highlight pre[class*=language-]{box-sizing:border-box;padding:16px}@media (max-width:30em){.gatsby-highlight{width:100%}}</style><link rel="icon" href="/favicon-32x32.png?v=8d8fa298b67e447760210d9e8b28e447" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8d8fa298b67e447760210d9e8b28e447"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="alternate" type="application/rss+xml" title="kciter.so" href="/feed.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><h1 id="들어가며"><a href="#들어가며">들어가며</a></h1>
<p>소프트웨어는 다양한 데이터를 다루는 복잡한 시스템이다. 이러한 데이터는 단순히 숫자나 문자열로 표현되는 것이 아니라, 그 자체로 의미를 가지며, 이를 잘 이해하고 활용하는 것이 소프트웨어 개발의 핵심이다. 이번 글에서는 이러한 데이터의 양이나 크기를 정량적으로 표현하는 방법인 측도(Measure)에 대해 알아보겠다.</p>
<p>먼저 측도라는 단어가 생소하게 느껴질 수 있다. 측도는 데이터의 양이나 크기를 정량적으로 표현하는 방법을 말한다. 수학적으로는 개수, 길이, 넓이, 부피 등의 개념을 추상화한 것을 말한다. 예를 들어, 마리, 권, 그루, 다스와 같은 수량 개념부터 cm, kg, mL와 같은 단위, 달러나 엔과 같은 화폐까지 모두 측도의 일종이다. 좀 더 나아간다면 바퀴, 번과 같은 횟수 개념도 측도로 볼 수 있다.</p>
<p>이러한 측도는 비즈니스 관점에서 중요하다. 물건을 판매한다면 가격과 수량을 표현해야 하고, 글로벌 서비스를 한다면 다양한 화폐 단위를 다룰 수 있어야 한다. 또한, 단위 변환과 연산에 대한 고려도 필요하다. 예를 들어, 미국에서 판매되는 제품의 가격을 한국 원화로 변환해야 하거나, 세금이나 수수료 등을 고려하여 계산해줄 수도 있다.</p>
<h1 id="추상화된-것을-구체화하기"><a href="#추상화된-것을-구체화하기">추상화된 것을 구체화하기</a></h1>
<p>우리는 숫자를 코드로 표현하고 싶을 때 <span><code class="language-text">Int</code></span>나 <span><code class="language-text">Float</code></span>와 같은 기본 자료형을 사용한다. 하지만 이러한 기본 자료형은 단순히 숫자일 뿐, 그 자체로 의미를 가지지 않는다. 예를 들어, <span><code class="language-text">100</code></span>이라는 숫자는 단순한 정수일 뿐이라 무게인지 길이인지 알 수 없다. 그래서 보통 다음과 같이 변수명에 의존하여 의미를 부여한다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> weight<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 무게</span>
<span class="token keyword">val</span> length<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 길이</span></code></pre></div></span>
<p>하지만 이러한 방식은 실수할 여지가 많다. <span><code class="language-text">Int</code></span>라는 타입은 아무 숫자나 받을 수 있기 때문에, 잘못된 값을 넣을 수도 있다. 이를 방지하기 위해서 코드 리뷰나 테스트를 통해 확인할 수 있지만, 이런 단순한 문제로 생산성을 떨어뜨리는 것은 바람직하지 않다. 따라서 실수를 방지하기 위해 별도 타입을 만들 수 있다. 예를 들어, 무게를 표현하기 위해 <span><code class="language-text">Weight</code></span>라는 클래스를 만들고, 이를 사용하여 무게를 표현할 수 있다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">Weight</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">init</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span>value <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token string-literal singleline"><span class="token string">"Weight must be positive"</span></span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">val</span> weight <span class="token operator">=</span> <span class="token function">Weight</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// 무게</span></code></pre></div></span>
<p>위와 같이 <span><code class="language-text">Weight</code></span>라는 클래스를 만들면, 무게를 표현할 때는 항상 <span><code class="language-text">Weight</code></span> 타입을 사용해야 하므로 실수를 방지할 수 있다. 또한, 클래스에 다양한 연산을 추가하여 무게에 대한 연산을 쉽게 수행할 수 있다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">Weight</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">init</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span>value <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token string-literal singleline"><span class="token string">"Weight must be positive"</span></span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">plus</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Weight<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Weight</span><span class="token punctuation">(</span>value <span class="token operator">+</span> other<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">minus</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Weight<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Weight</span><span class="token punctuation">(</span>value <span class="token operator">-</span> other<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">times</span><span class="token punctuation">(</span>scalar<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Weight</span><span class="token punctuation">(</span>value <span class="token operator">*</span> scalar<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">div</span><span class="token punctuation">(</span>scalar<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Weight</span><span class="token punctuation">(</span>value <span class="token operator">/</span> scalar<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">val</span> weight1 <span class="token operator">=</span> <span class="token function">Weight</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> weight2 <span class="token operator">=</span> <span class="token function">Weight</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> totalWeight <span class="token operator">=</span> weight1 <span class="token operator">+</span> weight2 <span class="token comment">// 300</span>
<span class="token keyword">val</span> halfWeight <span class="token operator">=</span> weight1 <span class="token operator">/</span> <span class="token number">2</span> <span class="token comment">// 50</span></code></pre></div></span>
<p>이러한 객체를 DDD(도메인 주도 설계)에서는 값 객체(Value Object)라고 부른다. 값 객체는 단순히 숫자나 문자열을 감싸는 것이 아니라, 그 자체로 의미를 가지는 객체를 말한다.</p>
<p>측도에 대한 모델링은 이런 개념에서 시작된다. 추상화된 값을 구체화하여 의미를 부여하고, 이를 통해 코드의 가독성을 높이고 실수를 방지하며, 비즈니스에 필요한 다양한 연산을 추가할 수 있다.</p>
<h1 id="측도-모델링"><a href="#측도-모델링">측도 모델링</a></h1>
<p>앞서 구현한 값 객체를 이용할 수도 있지만, 조금 더 범용적으로 모델을 만드는 것도 가능하다. 단순히 무게나 길이와 같은 개별 타입을 만드는 것이 아니라, 모든 측도에 공통으로 적용할 수 있는 추상화된 모델을 구현해보자.</p>
<h2 id="값과-단위"><a href="#값과-단위">값과 단위</a></h2>
<p>측도 시스템을 구현할 때 가장 기본이 되는 것은 &#x27;값(Value)&#x27;과 &#x27;단위(Unit)&#x27;의 개념이다. 모든 측도는 값과 단위의 조합으로 표현할 수 있다. 예를 들어 &quot;5kg&quot;는 값이 5이고 단위가 킬로그램인 측도이다.</p>
<p>그리고 단위는 연관성이 있는 단위들끼리 변환이 가능하다. 예를 들어 킬로그램(kg)과 그램(g)은 서로 변환이 가능하다. 이러한 단위 간의 변환을 지원하기 위해서는 별도로 단위계를 정의할 수 있어야 한다. 이와 같은 요구사항을 기반으로 다음과 같이 다이어그램을 그려볼 수 있다.</p>
<figure><img src="/images/2025-05-02-modeling-series-measure/measure-diagram.png" width="100%" style="cursor:default;max-width:340px"/></figure>
<p>우리는 전체 측도 모델에 대한 기본 구조를 위와 같이 정의할 것이다. <span><code class="language-text">Measure</code></span>는 모든 측도를 표현하는 모델이며, <span><code class="language-text">Unit</code></span> 은 단위를 표현하는 모델이다. 그리고 <span><code class="language-text">UnitSystem</code></span>은 특정 종류의 측도에 사용할 수 있는 모든 단위들의 집합을 관리하는 시스템이다. 이 구조를 기반으로 측도 모델을 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> Measure<span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token operator">:</span> Comparable<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> value<span class="token operator">:</span> BigDecimal
  <span class="token keyword">val</span> unit<span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span>
  
  <span class="token keyword">fun</span> <span class="token function">convertTo</span><span class="token punctuation">(</span>targetUnit<span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> T
  <span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>other<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T
  <span class="token keyword">fun</span> <span class="token function">subtract</span><span class="token punctuation">(</span>other<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T
  <span class="token keyword">fun</span> <span class="token function">multiply</span><span class="token punctuation">(</span>factor<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> T
  <span class="token keyword">fun</span> <span class="token function">divide</span><span class="token punctuation">(</span>divisor<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> T
<span class="token punctuation">}</span></code></pre></div></span>
<p>위 코드에서 <span><code class="language-text">Measure</code></span> 인터페이스는 <span><code class="language-text">T</code></span>라는 제네릭 타입을 사용하며, 이는 자기 자신의 타입을 참조한다. 이러한 설계는 F-bounded polymorphism 패턴으로, 자기 자신의 타입을 참조하여 타입 안전성을 보장한다. 예를 들어 <span><code class="language-text">Weight</code></span>라는 클래스가 <span><code class="language-text">Measure&lt;Weight></code></span>를 구현한다면, <span><code class="language-text">add</code></span> 메서드는 <span><code class="language-text">Weight</code></span> 타입만 받을 수 있다.</p>
<p>또한 모든 측도는 <span><code class="language-text">Comparable</code></span>을 구현하여 비교 가능하도록 했다. 예를 들어 &quot;5kg&quot;과 &quot;3kg&quot;를 비교하여 어느 것이 더 무거운지 판단할 수 있다.</p>
<p>다음으로 단위를 표현하는 인터페이스를 살펴보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> Unit<span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> symbol<span class="token operator">:</span> String
  <span class="token keyword">val</span> name<span class="token operator">:</span> String
  
  <span class="token keyword">fun</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> toUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> BigDecimal
  <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> T
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">Unit</code></span> 인터페이스는 단위의 기호(symbol)와 이름(name)을 가지며, 단위 간 변환(convert)과 새로운 측도 생성(create) 기능을 제공한다. 예를 들어 킬로그램(kg)에서 파운드(lb)로 변환하거나, 5kg의 새로운 무게 객체를 생성할 수 있다.</p>
<p>마지막으로, 특정 종류의 측도에 사용할 수 있는 모든 단위들의 집합을 관리하는 시스템 인터페이스를 정의한다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> UnitSystem<span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> baseUnit<span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span>
  <span class="token keyword">val</span> availableUnits<span class="token operator">:</span> Set<span class="token operator">&lt;</span>MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span>
  
  <span class="token keyword">fun</span> <span class="token function">getUnitBySymbol</span><span class="token punctuation">(</span>symbol<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">?</span>
  <span class="token keyword">fun</span> <span class="token function">getUnitByName</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">?</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">UnitSystem</code></span>은 모든 변환의 기준이 되는 기본 단위(baseUnit)와 사용 가능한 모든 단위들(availableUnits)을 관리한다. 또한 기호나 이름으로 단위를 찾는 메서드도 제공한다.</p>
<p>위에서 정의한 인터페이스를 기반으로 추상 클래스를 구현해보자. 추상 클래스는 인터페이스의 공통 기능을 구현하여 중복 코드를 줄이고, 향후 구현할 구체적인 측도 클래스에서 필요한 기능만 구현할 수 있도록 한다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> AbstractMeasure<span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> unit<span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">convertTo</span><span class="token punctuation">(</span>targetUnit<span class="token operator">:</span> MeasurementUnit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>unit <span class="token operator">==</span> targetUnit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation builtin">@Suppress</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"UNCHECKED_CAST"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">as</span> T
      <span class="token punctuation">}</span>
      
      <span class="token keyword">val</span> convertedValue <span class="token operator">=</span> unit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> targetUnit<span class="token punctuation">)</span>
      <span class="token keyword">return</span> targetUnit<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>convertedValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>other<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
      <span class="token keyword">val</span> baseValue <span class="token operator">=</span> unit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>baseUnit<span class="token punctuation">)</span>
      <span class="token keyword">val</span> otherBaseValue <span class="token operator">=</span> other<span class="token punctuation">.</span>unit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>baseUnit<span class="token punctuation">)</span>
      <span class="token keyword">return</span> baseValue<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>otherBaseValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 다른 연산 메서드들...</span>
  
  <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UnitSystem<span class="token operator">&lt;</span>T<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">AbstractMeasure</code></span> 클래스는 <span><code class="language-text">convertTo</code></span> 메서드를 구현하여 다른 단위로 변환할 수 있게 하고, <span><code class="language-text">compareTo</code></span> 메서드를 구현하여 서로 다른 단위의 측도도 비교할 수 있게 한다. 예를 들어 kg과 lb 단위의 무게를 비교할 수 있다.</p>
<h2 id="수량"><a href="#수량">수량</a></h2>
<p>이제 측도의 값과 단위에 대한 기본 인터페이스를 정의했으니, 이를 활용하여 실제로 수량(Quantity)을 어떻게 표현할 수 있는지 알아볼 것이다.</p>
<p>측도 모델에 기반한 수량 모델은 값과 단위의 개념을 기반으로, 실제 세계의 다양한 측정값을 프로그래밍적으로 표현할 수 있게 해준다. 보통 이러한 수량 모델은 변환에 있어 공식이 정해져 있는 물리적 수량(개수, 무게, 길이, 부피 등)에 사용된다.</p>
<p>수량을 구현하기 위해 <span><code class="language-text">Measure</code></span> 인터페이스를 구현하는 추상 클래스인 <span><code class="language-text">Quantity</code></span>를 먼저 살펴보자. 이 클래스는 모든 종류의 물리적 수량(무게, 길이, 부피 등)의 공통 기능을 제공한다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Quantity<span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> unit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>T<span class="token operator">></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractMeasure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 포맷팅을 위한 메서드</span>
  <span class="token keyword">fun</span> <span class="token function">format</span><span class="token punctuation">(</span>precision<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword">val</span> roundedValue <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span>precision<span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">roundedValue</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">unit<span class="token punctuation">.</span>symbol</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// toString 재정의</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">value</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">unit<span class="token punctuation">.</span>symbol</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span>
  
  <span class="token comment">// 동등성 비교</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Any<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> other<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>other <span class="token operator">!</span><span class="token keyword">is</span> Measure<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    
    <span class="token annotation builtin">@Suppress</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"UNCHECKED_CAST"</span></span><span class="token punctuation">)</span>
    other <span class="token keyword">as</span> T
    
    <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">compareTo</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> ClassCastException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    
  <span class="token comment">// 해시코드 생성</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token keyword">val</span> baseValue <span class="token operator">=</span> unit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>baseUnit<span class="token punctuation">)</span>
    <span class="token keyword">return</span> baseValue<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>이제 이 추상 클래스를 바탕으로 구체적인 수량 타입들을 구현할 수 있다. 여기서는 무게(Weight)를 예로 들어보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Weight <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
  value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  unit<span class="token operator">:</span> WeightUnit
<span class="token punctuation">)</span> <span class="token operator">:</span> Quantity<span class="token operator">&lt;</span>Weight<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
    <span class="token comment">// 팩토리 메서드: 기본 생성</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> unit<span class="token operator">:</span> WeightUnit<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">Weight</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">,</span> unit<span class="token operator">:</span> WeightUnit<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Int<span class="token punctuation">,</span> unit<span class="token operator">:</span> WeightUnit<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    
    <span class="token comment">// 편의 메서드: 특정 단위로 생성</span>
    <span class="token keyword">fun</span> <span class="token function">kilograms</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> WeightSystem<span class="token punctuation">.</span>KILOGRAM<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">grams</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> WeightSystem<span class="token punctuation">.</span>GRAM<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">pounds</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> WeightSystem<span class="token punctuation">.</span>POUND<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">ounces</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> WeightSystem<span class="token punctuation">.</span>OUNCE<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UnitSystem<span class="token operator">&lt;</span>Weight<span class="token operator">></span> <span class="token operator">=</span> WeightSystem
<span class="token punctuation">}</span></code></pre></div></span>
<p>앞서 정의한 <span><code class="language-text">Quantity</code></span> 클래스를 상속받아 <span><code class="language-text">Weight</code></span> 클래스를 구현했다. 이후 편의를 위해 팩토리 메서드를 구현해 다양한 단위로 무게를 생성할 수 있도록 했다. 예를 들어 <span><code class="language-text">Weight.kilograms(5.0)</code></span>은 5kg의 무게 객체를 생성한다.</p>
<p>이어서 무게 단위를 정의하는 <span><code class="language-text">WeightUnit</code></span> 클래스를 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> symbol<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> conversionFactor<span class="token operator">:</span> BigDecimal <span class="token comment">// 기본 단위(kg)에 대한 변환 계수</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Weight<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> toUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Weight<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> BigDecimal <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>conversionFactor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>toUnit<span class="token punctuation">.</span>conversionFactor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> Weight <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Weight</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>여기서 <span><code class="language-text">conversionFactor</code></span>는 해당 단위를 기본 단위(킬로그램)로 변환할 때 곱하는 계수이다. 예를 들어 그램은 킬로그램의 1/1000이므로, 그램의 conversionFactor는 0.001이 된다.</p>
<p>마지막으로 무게 단위계를 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> WeightSystem <span class="token operator">:</span> UnitSystem<span class="token operator">&lt;</span>Weight<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> KILOGRAM <span class="token operator">=</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"kg"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Kilogram"</span></span><span class="token punctuation">,</span> BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span>
  <span class="token keyword">val</span> GRAM <span class="token operator">=</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"g"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Gram"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> MILLIGRAM <span class="token operator">=</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"mg"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Milligram"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0.000001</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> TON <span class="token operator">=</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"t"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Ton"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> POUND <span class="token operator">=</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"lb"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Pound"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0.45359237</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> OUNCE <span class="token operator">=</span> <span class="token function">WeightUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"oz"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"OUNCE"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0.028349523125</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">override</span> <span class="token keyword">val</span> baseUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Weight<span class="token operator">></span> <span class="token operator">=</span> KILOGRAM
  <span class="token keyword">override</span> <span class="token keyword">val</span> availableUnits<span class="token operator">:</span> Set<span class="token operator">&lt;</span>Unit<span class="token operator">&lt;</span>Weight<span class="token operator">></span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span>KILOGRAM<span class="token punctuation">,</span> GRAM<span class="token punctuation">,</span> POUND<span class="token punctuation">,</span> OUNCE<span class="token punctuation">)</span>

  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getUnitBySymbol</span><span class="token punctuation">(</span>symbol<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Weight<span class="token operator">></span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> availableUnits<span class="token punctuation">.</span><span class="token function">find</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>symbol <span class="token operator">==</span> symbol <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getUnitByName</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Weight<span class="token operator">></span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> availableUnits<span class="token punctuation">.</span><span class="token function">find</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token operator">==</span> name <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">WeightSystem</code></span>은 싱글톤 객체로 구현해서 애플리케이션 전체에서 단 하나의 인스턴스만 존재하도록 만들었다. 이를 통해 단위 정의의 일관성을 보장하고 메모리 사용을 최적화할 수 있다. 이제 이를 사용한 예제 코드를 살펴보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token comment">// 무게 생성</span>
<span class="token keyword">val</span> weight1 <span class="token operator">=</span> Weight<span class="token punctuation">.</span><span class="token function">kilograms</span><span class="token punctuation">(</span><span class="token number">75.5</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> weight2 <span class="token operator">=</span> Weight<span class="token punctuation">.</span><span class="token function">pounds</span><span class="token punctuation">(</span><span class="token number">150.0</span><span class="token punctuation">)</span>

<span class="token comment">// 단위 변환</span>
<span class="token keyword">val</span> weight2InKg <span class="token operator">=</span> weight2<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>WeightSystem<span class="token punctuation">.</span>KILOGRAM<span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"150 pounds = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">weight2InKg</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// "150 pounds = 68.0388555 kg"</span>

<span class="token comment">// 무게 덧셈</span>
<span class="token keyword">val</span> totalWeight <span class="token operator">=</span> weight1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>weight2<span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Total weight: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">totalWeight</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// "Total weight: 143.5388555 kg"</span>

<span class="token comment">// 무게 비교</span>
<span class="token keyword">val</span> isHeavier <span class="token operator">=</span> weight1 <span class="token operator">></span> weight2
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Is 75.5 kg heavier than 150 pounds? </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">isHeavier</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment">// true</span></code></pre></div></span>
<p>이와 같은 방식으로 무게 외에도 다양한 측도를 구현할 수 있다. 예를 들어 거리를 표현하는 <span><code class="language-text">Distance</code></span> 클래스, 부피를 표현하는 <span><code class="language-text">Volume</code></span> 클래스 등을 구현할 수 있다. 각 클래스는 <span><code class="language-text">Measure</code></span> 인터페이스를 구현하고, 단위와 단위계도 각각 정의하면 된다.</p>
<p>각 수량 타입은 고유한 단위 시스템과 단위 간 변환 규칙을 가지지만, 기본적인 구조와 연산 방식은 동일하게 유지된다. 이는 객체지향 설계의 다형성과 상속을 잘 활용한 예시이다.</p>
<h2 id="화폐"><a href="#화폐">화폐</a></h2>
<p>앞서 구현한 수량 모델으로 해결할 수 없는 단위도 있다. 그 중 하나가 화폐이다. 화폐는 단순히 수량과 단위의 조합인 동시에, 환율이라는 특수한 변환 관계를 가지고 있다. 또한 비즈니스 애플리케이션에서 가장 많이 사용되는 측도 중 하나이다. 이번에는 앞서 구현한 측도 시스템을 바탕으로 화폐를 어떻게 모델링할 수 있는지 살펴보자.</p>
<p>먼저 화폐는 일반적인 물리적 수량과 달리 몇 가지 고유한 특성을 가지고 있다. ISO 표준 코드가 존재하고, 환율이 있으므로 변환이 고정되어 있지 않다. 이를 고려하여 화폐 모델을 구현해보자. 먼저 화폐를 표현하는 <span><code class="language-text">Money</code></span> 클래스를 정의해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Money <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
  value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  unit<span class="token operator">:</span> CurrencyUnit
<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractMeasure<span class="token operator">&lt;</span>Money<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
    <span class="token comment">// 팩토리 메서드</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> currency<span class="token operator">:</span> CurrencyUnit<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">Money</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">,</span> currency<span class="token operator">:</span> CurrencyUnit<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Int<span class="token punctuation">,</span> currency<span class="token operator">:</span> CurrencyUnit<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
    
    <span class="token comment">// 주요 통화별 편의 메서드</span>
    <span class="token keyword">fun</span> <span class="token function">usd</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> CurrencySystem<span class="token punctuation">.</span>USD<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">eur</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> CurrencySystem<span class="token punctuation">.</span>EUR<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">jpy</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> CurrencySystem<span class="token punctuation">.</span>JPY<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">krw</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> CurrencySystem<span class="token punctuation">.</span>KRW<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 통화 단위에 더 직관적으로 접근하기 위한 속성</span>
  <span class="token keyword">val</span> currency<span class="token operator">:</span> CurrencyUnit
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> unit <span class="token keyword">as</span> CurrencyUnit
  
  <span class="token comment">// 화폐 포맷팅</span>
  <span class="token keyword">fun</span> <span class="token function">format</span><span class="token punctuation">(</span>locale<span class="token operator">:</span> Locale <span class="token operator">=</span> Locale<span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword">val</span> formatter <span class="token operator">=</span> NumberFormat<span class="token punctuation">.</span><span class="token function">getCurrencyInstance</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
      currency <span class="token operator">=</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Currency<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token label symbol">@Money</span><span class="token punctuation">.</span>currency<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 간단한 포맷팅</span>
  <span class="token keyword">fun</span> <span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">currency<span class="token punctuation">.</span>symbol</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">value</span></span><span class="token string">"</span></span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UnitSystem<span class="token operator">&lt;</span>Money<span class="token operator">></span> <span class="token operator">=</span> CurrencySystem
  
  <span class="token comment">// 화폐 연산에 특화된 메서드들</span>
  <span class="token keyword">fun</span> <span class="token function">percentage</span><span class="token punctuation">(</span>percent<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token punctuation">{</span>
    <span class="token keyword">val</span> factor <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"100"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">multiply</span><span class="token punctuation">(</span>factor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">fun</span> <span class="token function">addPercentage</span><span class="token punctuation">(</span>percent<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token punctuation">{</span>
    <span class="token keyword">val</span> factor <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"100"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">multiply</span><span class="token punctuation">(</span>factor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">Money</code></span> 클래스를 구현하며 기본적인 측도 기능을 상속받으면서 화폐에 특화된 기능을 추가했다. 먼저 <span><code class="language-text">currency</code></span> 필드를 통해 확장된 <span><code class="language-text">Unit</code></span> 타입인 <span><code class="language-text">CurrencyUnit</code></span>에 접근할 수 있도록 했다. 그리고 <span><code class="language-text">format</code></span> 메서드를 통해 지역화된 화폐 포맷팅을 지원하며, 세금이나 할인율과 같은 퍼센트 기반 연산을 쉽게 수행할 수 있는 메서드를 제공했다.</p>
<p>다음으로 화폐 단위를 정의하는 <span><code class="language-text">CurrencyUnit</code></span> 클래스를 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">CurrencyUnit</span><span class="token punctuation">(</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> symbol<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">val</span> code<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// ISO 통화 코드 (예: USD, EUR)</span>
  <span class="token keyword">var</span> exchangeRate<span class="token operator">:</span> BigDecimal <span class="token comment">// 기준 통화(예: USD)에 대한 환율, 변할 수 있음</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Money<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> toUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Money<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> BigDecimal <span class="token punctuation">{</span>
    toUnit <span class="token keyword">as</span> CurrencyUnit
    
    <span class="token comment">// 기본 통화로 변환 후 대상 통화로 변환</span>
    <span class="token keyword">val</span> valueInBaseUnit <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>exchangeRate<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
    <span class="token keyword">return</span> valueInBaseUnit<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>toUnit<span class="token punctuation">.</span>exchangeRate<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> Money <span class="token operator">=</span> Money<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">CurrencyUnit</code></span>은 일반적인 단위 정보(기호, 이름) 외에도 ISO 통화 코드와 환율을 추가로 저장한다. 그리고 <span><code class="language-text">convert</code></span> 메서드에서는 일반적인 물리적 단위와 달리, 직접적인 변환이 아닌 USD와 같은 기준 통화를 경유한 변환을 수행한다. 이는 금융 시스템에서 일반적으로 사용되는 방식으로, 모든 통화 쌍에 대한 환율을 개별적으로 관리하지 않고, 기준 통화에 대한 환율만 관리하는 방식이다.</p>
<p>마지막으로 통화 단위들을 관리하는 <span><code class="language-text">CurrencySystem</code></span>을 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> CurrencySystem <span class="token operator">:</span> AbstractUnitSystem<span class="token operator">&lt;</span>Money<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 주요 통화 정의</span>
  <span class="token keyword">val</span> USD <span class="token operator">=</span> <span class="token function">CurrencyUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"$"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"US Dollar"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"USD"</span></span><span class="token punctuation">,</span> BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span>
  <span class="token keyword">val</span> EUR <span class="token operator">=</span> <span class="token function">CurrencyUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"€"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Euro"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"EUR"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"1.09"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> GBP <span class="token operator">=</span> <span class="token function">CurrencyUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"£"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"British Pound"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"GBP"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"1.27"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> JPY <span class="token operator">=</span> <span class="token function">CurrencyUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"¥"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Japanese Yen"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"JPY"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"0.0067"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> KRW <span class="token operator">=</span> <span class="token function">CurrencyUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"₩"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Korean Won"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"KRW"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"0.00074"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  
  <span class="token keyword">override</span> <span class="token keyword">val</span> baseUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Money<span class="token operator">></span> <span class="token operator">=</span> USD  <span class="token comment">// 기준 통화: USD</span>
  
  <span class="token keyword">override</span> <span class="token keyword">val</span> availableUnits<span class="token operator">:</span> Set<span class="token operator">&lt;</span>Unit<span class="token operator">&lt;</span>Money<span class="token operator">></span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span>
    USD<span class="token punctuation">,</span> EUR<span class="token punctuation">,</span> GBP<span class="token punctuation">,</span> JPY<span class="token punctuation">,</span> KRW
  <span class="token punctuation">)</span>
  
  <span class="token comment">// 통화 코드로 통화 단위 찾기</span>
  <span class="token keyword">fun</span> <span class="token function">getUnitByCode</span><span class="token punctuation">(</span>code<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> CurrencyUnit<span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> availableUnits<span class="token punctuation">.</span><span class="token function">find</span> <span class="token punctuation">{</span> 
      <span class="token punctuation">(</span>it <span class="token keyword">as</span> CurrencyUnit<span class="token punctuation">)</span><span class="token punctuation">.</span>code<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> ignoreCase <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">as</span> CurrencyUnit<span class="token operator">?</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 환율 업데이트</span>
  <span class="token keyword">fun</span> <span class="token function">updateExchangeRate</span><span class="token punctuation">(</span>currencyCode<span class="token operator">:</span> String<span class="token punctuation">,</span> newRate<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> currency <span class="token operator">=</span> <span class="token function">getUnitByCode</span><span class="token punctuation">(</span>currencyCode<span class="token punctuation">)</span> <span class="token operator">?:</span> 
      <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Unknown currency code: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">currencyCode</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        
    currency<span class="token punctuation">.</span>exchangeRate <span class="token operator">=</span> newRate
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p><span><code class="language-text">CurrencySystem</code></span>은 주요 통화들을 정의하고, 기준 통화와 사용 가능한 통화 단위들을 관리한다. 또한 통화 코드로 단위를 찾는 메서드와 환율을 업데이트하는 메서드를 제공한다.  여기서는 단순화를 위해 환율 정보를 하드코딩된 값으로 사용했지만, 실제 애플리케이션에서는 외부 API를 통해 실시간으로 가져와서 최신 환율을 반영해야 한다. 예를 들어, <a href="https://openexchangerates.org/" rel="nofollow noopener noreferrer">Open Exchange Rates</a>와 같은 서비스를 사용하여 환율 정보를 가져올 수 있다. 여기서 환율 정보를 가져오는 구현은 생략한다.</p>
<p>이제 <span><code class="language-text">Money</code></span> 클래스를 사용하여 화폐를 표현하고, 다양한 연산을 수행할 수 있다. 예를 들어, 다음과 같이 화폐 객체를 생성하고 연산을 수행할 수 있다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token comment">// 화폐 생성</span>
<span class="token keyword">val</span> usd100 <span class="token operator">=</span> Money<span class="token punctuation">.</span><span class="token function">usd</span><span class="token punctuation">(</span><span class="token number">100.0</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> eur50 <span class="token operator">=</span> Money<span class="token punctuation">.</span><span class="token function">eur</span><span class="token punctuation">(</span><span class="token number">50.0</span><span class="token punctuation">)</span>

<span class="token comment">// 간단한 포맷팅</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"USD amount: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">usd100<span class="token punctuation">.</span><span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "USD amount: $100.0"</span>

<span class="token comment">// 지역화된 포맷팅</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"EUR amount in US format: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">eur50<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>Locale<span class="token punctuation">.</span>US<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "EUR amount in US format: €50.00"</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"EUR amount in German format: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">eur50<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>Locale<span class="token punctuation">.</span>GERMANY<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "EUR amount in German format: 50,00 €"</span>

<span class="token comment">// 통화 변환</span>
<span class="token keyword">val</span> eurToUsd <span class="token operator">=</span> eur50<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>CurrencySystem<span class="token punctuation">.</span>USD<span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"50 EUR = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">eurToUsd<span class="token punctuation">.</span><span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "50 EUR = $54.5"</span>

<span class="token comment">// 화폐 연산</span>
<span class="token keyword">val</span> total <span class="token operator">=</span> usd100<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>eur50<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>CurrencySystem<span class="token punctuation">.</span>USD<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Total: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">total<span class="token punctuation">.</span><span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "Total: $154.5"</span>

<span class="token comment">// 퍼센트 계산 (세금, 할인 등)</span>
<span class="token keyword">val</span> tax <span class="token operator">=</span> usd100<span class="token punctuation">.</span><span class="token function">percentage</span><span class="token punctuation">(</span><span class="token number">8.0</span><span class="token punctuation">)</span>  <span class="token comment">// 8% 세금</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"8% tax on $100: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">tax<span class="token punctuation">.</span><span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "8% tax on $100: $8.0"</span>

<span class="token keyword">val</span> withTax <span class="token operator">=</span> usd100<span class="token punctuation">.</span><span class="token function">addPercentage</span><span class="token punctuation">(</span><span class="token number">8.0</span><span class="token punctuation">)</span>  <span class="token comment">// 세금 포함 금액</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"$100 with 8% tax: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">withTax<span class="token punctuation">.</span><span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "$100 with 8% tax: $108.0"</span></code></pre></div></span>
<p>이런 방식을 통해 수량 모델과는 다르게, 화폐라는 특수한 모델에 대해서도 대응이 가능하다. 보통 특수한 측도는 다음과 같은 특성을 가진다.</p>
<ul>
<li>비선형 변환: 단순한 곱셈/나눗셈이 아닌 복잡한 변환 공식이 필요하다.</li>
<li>특별한 의미론: 덧셈, 뺄셈 등 연산의 의미가 일반 측도와 다를 수 있다.</li>
<li>도메인 특화 로직: 각 도메인에 특화된 추가 기능이 필요하다.</li>
<li>문화적/지역적 차이: 같은 측도도 문화권이나 지역에 따라 다른 표현 방식을 가질 수 있다.</li>
</ul>
<p>화폐 외에도 데이터 크기(KB, MB, GB 등), 시간, 온도, 주파수 등은 일반적인 물리적 수량과는 다른 변환 관계나 연산을 가지므로, 수량 모델이 아닌 별도의 모델이 필요하다.</p>
<h1 id="수학적-측도"><a href="#수학적-측도">수학적 측도</a></h1>
<p>앞서 다룬 일상적인 단위 외에 수학적 측도는 물리적 수량과는 다른 개념으로, 비율(Ratio)이나 각도(Angle), 지수(Exponent) 등과 같은 수학적 개념을 표현하는 데 사용된다.</p>
<p>수학적 측도는 기존 측도를 이용하여 연산 후 결과를 표현하는 데 사용된다. 예를 들어, 비율은 두 수량 간의 관계를 나타내며, 각도는 회전이나 기울기를 나타낸다. 이러한 측도는 일반적으로 물리적 수량과는 다른 연산 규칙을 가지므로, 별도의 모델로 구현하는 것이 좋다.</p>
<p>먼저 비율을 살펴보자. 비율은 두 수량 간의 관계를 나타내는 값으로, 일반적으로 분수 형태로 표현된다. 이를 표현할 수 있는 <span><code class="language-text">Ratio</code></span>를 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">RatioUnit</span><span class="token punctuation">(</span>
    <span class="token keyword">override</span> <span class="token keyword">val</span> symbol<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">val</span> conversionFactor<span class="token operator">:</span> BigDecimal  <span class="token comment">// 십진수(decimal) 기준 변환 계수</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Ratio<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> toUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Ratio<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> BigDecimal <span class="token punctuation">{</span>
    toUnit <span class="token keyword">as</span> RatioUnit
    
    <span class="token comment">// 기본 단위(십진수)로 변환 후 목표 단위로 변환</span>
    <span class="token keyword">val</span> valueInDecimal <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>conversionFactor<span class="token punctuation">)</span>
    <span class="token keyword">return</span> valueInDecimal<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>toUnit<span class="token punctuation">.</span>conversionFactor<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> Ratio<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> Ratio <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
  value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  unit<span class="token operator">:</span> RatioUnit
<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractMeasure<span class="token operator">&lt;</span>Ratio<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> unit<span class="token operator">:</span> RatioUnit<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">Ratio</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">,</span> unit<span class="token operator">:</span> RatioUnit<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    
    <span class="token comment">// 편의 메서드</span>
    <span class="token keyword">fun</span> <span class="token function">decimal</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> RatioSystem<span class="token punctuation">.</span>DECIMAL<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">percentage</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> RatioSystem<span class="token punctuation">.</span>PERCENTAGE<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">permille</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> RatioSystem<span class="token punctuation">.</span>PERMILLE<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">fraction</span><span class="token punctuation">(</span>numerator<span class="token operator">:</span> Int<span class="token punctuation">,</span> denominator<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token punctuation">{</span>
        <span class="token keyword">val</span> value <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>numerator<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>denominator<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">decimal</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UnitSystem<span class="token operator">&lt;</span>Ratio<span class="token operator">></span> <span class="token operator">=</span> RatioSystem
  
  <span class="token comment">// 편의 변환 메서드</span>
  <span class="token keyword">fun</span> <span class="token function">toPercentage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">convertTo</span><span class="token punctuation">(</span>RatioSystem<span class="token punctuation">.</span>PERCENTAGE<span class="token punctuation">)</span>
  <span class="token keyword">fun</span> <span class="token function">toDecimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">convertTo</span><span class="token punctuation">(</span>RatioSystem<span class="token punctuation">.</span>DECIMAL<span class="token punctuation">)</span>
  
  <span class="token comment">// 두 측도의 비율 계산을 위한 정적 메서드</span>
  <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token function">between</span><span class="token punctuation">(</span>value1<span class="token operator">:</span> T<span class="token punctuation">,</span> value2<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value1<span class="token punctuation">.</span>unit <span class="token operator">!=</span> value2<span class="token punctuation">.</span>unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Cannot compute ratio between different units without conversion"</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      
      <span class="token keyword">val</span> ratio <span class="token operator">=</span> value1<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>value2<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token function">decimal</span><span class="token punctuation">(</span>ratio<span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 측도의 변화율 계산</span>
    <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token function">changeRate</span><span class="token punctuation">(</span>oldValue<span class="token operator">:</span> T<span class="token punctuation">,</span> newValue<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token punctuation">{</span>
      <span class="token keyword">val</span> convertedNew <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldValue<span class="token punctuation">.</span>unit <span class="token operator">!=</span> newValue<span class="token punctuation">.</span>unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        newValue<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">.</span>unit <span class="token keyword">as</span> Unit<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        newValue
      <span class="token punctuation">}</span>
      
      <span class="token keyword">val</span> change <span class="token operator">=</span> convertedNew<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token keyword">val</span> rate <span class="token operator">=</span> change<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
      
      <span class="token keyword">return</span> <span class="token function">decimal</span><span class="token punctuation">(</span>rate<span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 비율 연산</span>
  <span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Ratio<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token punctuation">{</span>
    <span class="token keyword">val</span> convertedOther <span class="token operator">=</span> other<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>unit <span class="token keyword">as</span> RatioUnit<span class="token punctuation">)</span>
    <span class="token keyword">val</span> sum <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>convertedOther<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Ratio<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> unit <span class="token keyword">as</span> RatioUnit<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">plus</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Ratio<span class="token punctuation">)</span><span class="token operator">:</span> Ratio <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
  
  <span class="token comment">// 측도에 비율 적용</span>
  <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token function">applyTo</span><span class="token punctuation">(</span>measure<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
    <span class="token keyword">val</span> decimalRatio <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>RatioSystem<span class="token punctuation">.</span>DECIMAL<span class="token punctuation">)</span>
    <span class="token keyword">return</span> measure<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>decimalRatio<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 증가율 적용 (1 + rate)</span>
  <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Measure<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">></span> <span class="token function">increase</span><span class="token punctuation">(</span>measure<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
    <span class="token keyword">val</span> decimalRatio <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>RatioSystem<span class="token punctuation">.</span>DECIMAL<span class="token punctuation">)</span>
    <span class="token keyword">val</span> factor <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>decimalRatio<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token keyword">return</span> measure<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>factor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> RatioSystem <span class="token operator">:</span> AbstractUnitSystem<span class="token operator">&lt;</span>Ratio<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> DECIMAL <span class="token operator">=</span> <span class="token function">RatioUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"decimal"</span></span><span class="token punctuation">,</span> BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span>
  <span class="token keyword">val</span> PERCENTAGE <span class="token operator">=</span> <span class="token function">RatioUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"%"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"percentage"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"0.01"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> PERMILLE <span class="token operator">=</span> <span class="token function">RatioUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"‰"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"permille"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"0.001"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> BASIS_POINT <span class="token operator">=</span> <span class="token function">RatioUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"bp"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"basis point"</span></span><span class="token punctuation">,</span> <span class="token function">BigDecimal</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"0.0001"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  
  <span class="token keyword">override</span> <span class="token keyword">val</span> baseUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Ratio<span class="token operator">></span> <span class="token operator">=</span> DECIMAL
  
  <span class="token keyword">override</span> <span class="token keyword">val</span> availableUnits<span class="token operator">:</span> Set<span class="token operator">&lt;</span>Unit<span class="token operator">&lt;</span>Ratio<span class="token operator">></span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span>
    DECIMAL<span class="token punctuation">,</span> PERCENTAGE<span class="token punctuation">,</span> PERMILLE<span class="token punctuation">,</span> BASIS_POINT
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>위와 같이 <span><code class="language-text">Ratio</code></span>를 구현하면, 두 수량 간의 비율을 쉽게 계산할 수 있다. 예를 들어, 두 무게 간의 비율을 계산할 때는 다음과 같이 사용할 수 있다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> weight1 <span class="token operator">=</span> Weight<span class="token punctuation">.</span><span class="token function">kilograms</span><span class="token punctuation">(</span><span class="token number">50.0</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> weight2 <span class="token operator">=</span> Weight<span class="token punctuation">.</span><span class="token function">kilograms</span><span class="token punctuation">(</span><span class="token number">25.0</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> ratio <span class="token operator">=</span> Ratio<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weight1<span class="token punctuation">,</span> weight2<span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Ratio of weight1 to weight2: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">ratio</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "Ratio of weight1 to weight2: 2.0"</span></code></pre></div></span>
<p>혹은 이자와 같은 금융 비율을 계산할 때도 사용할 수 있다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> interestRate <span class="token operator">=</span> Ratio<span class="token punctuation">.</span><span class="token function">percentage</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span>  <span class="token comment">// 5%</span>
<span class="token keyword">val</span> principal <span class="token operator">=</span> Money<span class="token punctuation">.</span><span class="token function">usd</span><span class="token punctuation">(</span><span class="token number">1000.0</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> interest <span class="token operator">=</span> interestRate<span class="token punctuation">.</span><span class="token function">applyTo</span><span class="token punctuation">(</span>principal<span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Interest on $1000 at 5%: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">interest<span class="token punctuation">.</span><span class="token function">formatSimple</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>  <span class="token comment">// "Interest on $1000 at 5%: $50.0"</span></code></pre></div></span>
<p>이렇게 수학적 측도를 구현하면, 다양한 수량 간의 관계를 표현하고 계산할 수 있다. 외에도 다양한 수학적 측도를 구현할 수 있으며, 각 측도에 맞는 단위와 변환 규칙을 정의하면 된다.</p>
<h1 id="복합-측도와-파생-측도"><a href="#복합-측도와-파생-측도">복합 측도와 파생 측도</a></h1>
<p>앞서 살펴본 기본 측도(수량)와 특수 측도(화폐 등)를 넘어, 현실 세계에서는 여러 측도가 결합되거나 파생되는 경우가 많다. 이러한 복합 측도와 파생 측도를 모델링하는 방법을 알아보자.</p>
<h2 id="복합-측도"><a href="#복합-측도">복합 측도</a></h2>
<p>복합 측도는 두 개 이상의 기본 측도가 결합된 형태를 말한다. 예를 들어 속도는 거리와 시간의 비율(km/h)로, 밀도는 질량과 부피의 비율(kg/m³)로 표현된다.</p>
<p>복합 측도를 모델링할 때는 기존 측도를 조합하여 새로운 측도를 생성하는 방식으로 구현할 수 있다. 예를 들어 속도를 표현하는 <span><code class="language-text">Velocity</code></span>를 구현해보자.</p>
<p>먼저 속도에 대한 단위를 정의하는 <span><code class="language-text">VelocityUnit</code></span> 클래스를 구현한다. 이 클래스는 거리 단위와 시간 단위를 조합하여 속도를 표현한다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">VelocityUnit</span><span class="token punctuation">(</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> symbol<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token comment">// 거리 단위와 시간 단위를 조합</span>
  <span class="token keyword">val</span> distanceUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Distance<span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token keyword">val</span> timeUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Time<span class="token operator">></span>
<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractUnit<span class="token operator">&lt;</span>Velocity<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> toUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Velocity<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> BigDecimal <span class="token punctuation">{</span>
    toUnit <span class="token keyword">as</span> VelocityUnit
    
    <span class="token comment">// 거리 단위 변환 계수</span>
    <span class="token keyword">val</span> distanceFactor <span class="token operator">=</span> distanceUnit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>
      BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">,</span> 
      toUnit<span class="token punctuation">.</span>distanceUnit
    <span class="token punctuation">)</span>
    
    <span class="token comment">// 시간 단위 변환 계수</span>
    <span class="token keyword">val</span> timeFactor <span class="token operator">=</span> timeUnit<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>
      BigDecimal<span class="token punctuation">.</span>ONE<span class="token punctuation">,</span>
      toUnit<span class="token punctuation">.</span>timeUnit
    <span class="token punctuation">)</span>
    
    <span class="token comment">// 속도 변환: (거리 변환 / 시간 변환) * 원래 값</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>distanceFactor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>timeFactor<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token operator">=</span> Velocity<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>위 코드를 보면 <span><code class="language-text">VelocityUnit</code></span> 클래스는 거리 단위와 시간 단위를 조합하여 속도를 표현한다. <span><code class="language-text">convert</code></span> 메서드는 거리 단위와 시간 단위를 각각 변환한 후, 속도 변환을 수행한다. 예를 들어 60km/h를 m/s로 변환할 때, 거리 단위는 km에서 m로, 시간 단위는 h에서 s로 변환하여 최종 속도를 계산한다.</p>
<p>다음으로 속도를 표현하는 <span><code class="language-text">Velocity</code></span> 클래스를 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Velocity <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
  value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  unit<span class="token operator">:</span> VelocityUnit
<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractMeasure<span class="token operator">&lt;</span>Velocity<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> unit<span class="token operator">:</span> VelocityUnit<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token operator">=</span> <span class="token function">Velocity</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">,</span> unit<span class="token operator">:</span> VelocityUnit<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span>
    
    <span class="token comment">// 편의 메서드</span>
    <span class="token keyword">fun</span> <span class="token function">metersPerSecond</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> VelocitySystem<span class="token punctuation">.</span>METERS_PER_SECOND<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">kilometersPerHour</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> VelocitySystem<span class="token punctuation">.</span>KILOMETERS_PER_HOUR<span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">milesPerHour</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token operator">=</span> <span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> VelocitySystem<span class="token punctuation">.</span>MILES_PER_HOUR<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getUnitSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UnitSystem<span class="token operator">&lt;</span>Velocity<span class="token operator">></span> <span class="token operator">=</span> VelocitySystem
  
  <span class="token comment">// 거리 계산 (속도 × 시간)</span>
  <span class="token keyword">fun</span> <span class="token function">multiply</span><span class="token punctuation">(</span>time<span class="token operator">:</span> Time<span class="token punctuation">)</span><span class="token operator">:</span> Distance <span class="token punctuation">{</span>
    <span class="token keyword">val</span> velocityUnit <span class="token operator">=</span> unit <span class="token keyword">as</span> VelocityUnit
    <span class="token keyword">val</span> convertedTime <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>velocityUnit<span class="token punctuation">.</span>timeUnit<span class="token punctuation">)</span>
    
    <span class="token keyword">val</span> distanceValue <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>convertedTime<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Distance<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>distanceValue<span class="token punctuation">,</span> velocityUnit<span class="token punctuation">.</span>distanceUnit <span class="token keyword">as</span> DistanceUnit<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 시간 계산 (거리 ÷ 속도)</span>
  <span class="token keyword">fun</span> <span class="token function">timeToTravel</span><span class="token punctuation">(</span>distance<span class="token operator">:</span> Distance<span class="token punctuation">)</span><span class="token operator">:</span> Time <span class="token punctuation">{</span>
    <span class="token keyword">val</span> velocityUnit <span class="token operator">=</span> unit <span class="token keyword">as</span> VelocityUnit
    <span class="token keyword">val</span> convertedDistance <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>velocityUnit<span class="token punctuation">.</span>distanceUnit <span class="token keyword">as</span> DistanceUnit<span class="token punctuation">)</span>
    
    <span class="token keyword">val</span> timeValue <span class="token operator">=</span> convertedDistance<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Time<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>timeValue<span class="token punctuation">,</span> velocityUnit<span class="token punctuation">.</span>timeUnit<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>여기서 주목할 점은 <span><code class="language-text">multiply</code></span> 메서드와 <span><code class="language-text">timeToTravel</code></span> 메서드이다. <span><code class="language-text">multiply</code></span> 메서드는 속도와 시간을 곱하여 거리를 계산하고, <span><code class="language-text">timeToTravel</code></span> 메서드는 거리를 속도로 나누어 시간을 계산한다. 이처럼 복합 측도는 기본 측도를 조합하여 새로운 기능을 제공할 수 있다.</p>
<p>마지막으로 속도 단위계를 정의하는 <span><code class="language-text">VelocitySystem</code></span>을 구현해보자.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> VelocitySystem <span class="token operator">:</span> AbstractUnitSystem<span class="token operator">&lt;</span>Velocity<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> METERS_PER_SECOND <span class="token operator">=</span> <span class="token function">VelocityUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"m/s"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"meters per second"</span></span><span class="token punctuation">,</span> 
                                        DistanceSystem<span class="token punctuation">.</span>METER<span class="token punctuation">,</span> TimeSystem<span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span>
  
  <span class="token keyword">val</span> KILOMETERS_PER_HOUR <span class="token operator">=</span> <span class="token function">VelocityUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"km/h"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"kilometers per hour"</span></span><span class="token punctuation">,</span>
                                          DistanceSystem<span class="token punctuation">.</span>KILOMETER<span class="token punctuation">,</span> TimeSystem<span class="token punctuation">.</span>HOUR<span class="token punctuation">)</span>
  
  <span class="token keyword">val</span> MILES_PER_HOUR <span class="token operator">=</span> <span class="token function">VelocityUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"mph"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"miles per hour"</span></span><span class="token punctuation">,</span>
                                    DistanceSystem<span class="token punctuation">.</span>MILE<span class="token punctuation">,</span> TimeSystem<span class="token punctuation">.</span>HOUR<span class="token punctuation">)</span>
  
  <span class="token keyword">val</span> FEET_PER_SECOND <span class="token operator">=</span> <span class="token function">VelocityUnit</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"ft/s"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"feet per second"</span></span><span class="token punctuation">,</span>
                                      DistanceSystem<span class="token punctuation">.</span>FOOT<span class="token punctuation">,</span> TimeSystem<span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span>
  
  <span class="token keyword">override</span> <span class="token keyword">val</span> baseUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Velocity<span class="token operator">></span> <span class="token operator">=</span> METERS_PER_SECOND
  
  <span class="token keyword">override</span> <span class="token keyword">val</span> availableUnits<span class="token operator">:</span> Set<span class="token operator">&lt;</span>Unit<span class="token operator">&lt;</span>Velocity<span class="token operator">></span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span>
    METERS_PER_SECOND<span class="token punctuation">,</span> KILOMETERS_PER_HOUR<span class="token punctuation">,</span> MILES_PER_HOUR<span class="token punctuation">,</span> FEET_PER_SECOND
  <span class="token punctuation">)</span>
  
  <span class="token comment">// 속도 생성 메서드</span>
  <span class="token keyword">fun</span> <span class="token function">from</span><span class="token punctuation">(</span>distance<span class="token operator">:</span> Distance<span class="token punctuation">,</span> time<span class="token operator">:</span> Time<span class="token punctuation">)</span><span class="token operator">:</span> Velocity <span class="token punctuation">{</span>
    <span class="token comment">// 기본 단위로 변환</span>
    <span class="token keyword">val</span> baseDistance <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>DistanceSystem<span class="token punctuation">.</span>METER<span class="token punctuation">)</span>
    <span class="token keyword">val</span> baseTime <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>TimeSystem<span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span>
    
    <span class="token comment">// 속도 계산</span>
    <span class="token keyword">val</span> velocityValue <span class="token operator">=</span> baseDistance<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>baseTime<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> RoundingMode<span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> Velocity<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>velocityValue<span class="token punctuation">,</span> METERS_PER_SECOND<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>위와 같이 여러 단위가 정의된 복합 측도도 기본 측도 모델로 구현할 수 있다.</p>
<h2 id="파생-측도"><a href="#파생-측도">파생 측도</a></h2>
<p>이어서 파생 측도는 기본 측도를 기반으로 만들 수 있는 새로운 측도다. 대표적인 예로 길이를 곱하여 면적을 구하거나, 길이와 면적을 곱하여 부피를 구하는 경우가 있다. 이런 경우 다음과 같이 코드를 작성할 수 있다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Distance <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
  value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span>
  unit<span class="token operator">:</span> DistanceUnit
<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractMeasure<span class="token operator">&lt;</span>Distance<span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
  <span class="token comment">// 기존 메서드들...</span>
  
  <span class="token comment">// 두 길이를 곱해 직사각형 면적 계산</span>
  <span class="token keyword">fun</span> <span class="token function">area</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Distance<span class="token punctuation">)</span><span class="token operator">:</span> Area <span class="token punctuation">{</span>
    <span class="token comment">// 같은 단위로 변환</span>
    <span class="token keyword">val</span> convertedOther <span class="token operator">=</span> other<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>unit <span class="token keyword">as</span> DistanceUnit<span class="token punctuation">)</span>
    
    <span class="token comment">// 면적 계산</span>
    <span class="token keyword">val</span> areaValue <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>convertedOther<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    
    <span class="token comment">// 길이 단위에 맞는 면적 단위 생성</span>
    <span class="token keyword">val</span> areaUnit <span class="token operator">=</span> AreaUnit<span class="token punctuation">.</span><span class="token function">fromDistanceUnit</span><span class="token punctuation">(</span>unit <span class="token keyword">as</span> DistanceUnit<span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> Area<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>areaValue<span class="token punctuation">,</span> areaUnit<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 정사각형 면적</span>
  <span class="token keyword">fun</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Area <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>위와 같이 <span><code class="language-text">area</code></span> 메서드를 통해 두 길이를 곱하여 면적을 계산할 수 있다. 이때 면적 단위는 길이 단위를 기반으로 생성할 수 있다. 예를 들어 미터(m) 단위의 길이를 곱하면 제곱미터(m²) 단위의 면적이 된다. 이를 위해 <span><code class="language-text">AreaUnit</code></span>에서 <span><code class="language-text">fromDistanceUnit</code></span> 메서드를 구현하여 길이 단위를 기반으로 면적 단위를 생성할 수 있도록 만들어야 한다.</p>
<span><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">AreaUnit</span><span class="token punctuation">(</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> symbol<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">val</span> conversionFactor<span class="token operator">:</span> BigDecimal <span class="token comment">// 기본 단위(m²)에 대한 변환 계수</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Area<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
    <span class="token comment">// 길이 단위로부터 면적 단위 생성</span>
    <span class="token keyword">fun</span> <span class="token function">fromDistanceUnit</span><span class="token punctuation">(</span>unit<span class="token operator">:</span> DistanceUnit<span class="token punctuation">)</span><span class="token operator">:</span> AreaUnit <span class="token punctuation">{</span>
      <span class="token keyword">val</span> symbol <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">unit<span class="token punctuation">.</span>symbol</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">²"</span></span>
      <span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"square </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">unit<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span>
      <span class="token comment">// 길이 변환 계수의 제곱이 면적 변환 계수가 됨</span>
      <span class="token keyword">val</span> conversionFactor <span class="token operator">=</span> unit<span class="token punctuation">.</span>conversionFactor<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token function">AreaUnit</span><span class="token punctuation">(</span>symbol<span class="token punctuation">,</span> name<span class="token punctuation">,</span> conversionFactor<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">,</span> toUnit<span class="token operator">:</span> Unit<span class="token operator">&lt;</span>Area<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> BigDecimal <span class="token punctuation">{</span>
    <span class="token comment">// ... 면적 단위 변환 로직</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">create</span><span class="token punctuation">(</span>value<span class="token operator">:</span> BigDecimal<span class="token punctuation">)</span><span class="token operator">:</span> Area <span class="token operator">=</span> Area<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Area, AreaSystem 구현 생략</span></code></pre></div></span>
<p>이런 방식으로 측도와 측도 간의 관계를 정의하여 파생 측도를 구현할 수 있다. 측도는 독립적으로만 존재하는 것이 아니라, 서로 관계를 맺고 있으며, 이를 통해 복합 측도와 파생 측도를 모델링할 수 있다. 이러한 관계를 잘 정의하면, 다양한 물리적 현상을 프로그래밍적으로 표현할 수 있다.</p>
<h1 id="마치며"><a href="#마치며">마치며</a></h1>
<p>지금까지 측도 모델을 통해 어떻게 다양한 물리적 수량을 표현하고, 단위 변환 및 연산을 수행할 수 있는지 살펴보았다. 측도 모델은 객체지향 설계의 원칙을 잘 활용하여, 코드의 재사용성과 유지보수성을 높일 수 있는 강력한 도구이다. 또한 안정성 측면에서도 원시 타입을 사용하는 것보다 훨씬 안전하다.</p>
<p>소프트웨어가 어떤 가치를 제공하냐에 따라 필요한 측도는 다를 수 있다. 따라서 측도 모델을 설계할 때는 도메인에 맞는 측도를 정의하고, 필요한 연산과 변환을 고려하여 설계해야 한다. 또한, 측도 모델은 단순히 수량을 표현하는 것뿐만 아니라, 비즈니스 로직을 구현하는 데에도 큰 도움이 된다.</p></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7M8K7EBEDX"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7M8K7EBEDX', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2025-05-02-modeling-series-measure/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-020370bf8aad70be0406.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-6759857f5bd0a16abdff.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-0f280757e439b5ae50d7.js\"],\"component---src-pages-bookshelf-tsx\":[\"/component---src-pages-bookshelf-tsx-00c0a42b1a986440000d.js\"],\"component---src-pages-business-card-tsx\":[\"/component---src-pages-business-card-tsx-d15363e85a44b2f2ec82.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-3177a74e6d917ef1d92c.js\"],\"component---src-pages-timeline-tsx\":[\"/component---src-pages-timeline-tsx-fdaa746b747c17ab9975.js\"],\"component---src-posts-2021-02-23-first-post-md\":[\"/component---src-posts-2021-02-23-first-post-md-68235a9324b44a239285.js\"],\"component---src-posts-2021-02-25-about-mongodb-mdx\":[\"/component---src-posts-2021-02-25-about-mongodb-mdx-491b97155ed5053a749b.js\"],\"component---src-posts-2021-02-28-basic-web-hacking-mdx\":[\"/component---src-posts-2021-02-28-basic-web-hacking-mdx-e88cf62ee63386b89585.js\"],\"component---src-posts-2021-03-14-effective-atomic-design-mdx\":[\"/component---src-posts-2021-03-14-effective-atomic-design-mdx-29f61b3ed844d58dd717.js\"],\"component---src-posts-2021-03-20-deep-dive-into-datetime-mdx\":[\"/component---src-posts-2021-03-20-deep-dive-into-datetime-mdx-5161635181ff3c1b4d2d.js\"],\"component---src-posts-2022-08-05-programmers-brain-book-report-mdx\":[\"/component---src-posts-2022-08-05-programmers-brain-book-report-mdx-aabd3bc987deeda83430.js\"],\"component---src-posts-2022-08-16-polymorphic-react-component-mdx\":[\"/component---src-posts-2022-08-16-polymorphic-react-component-mdx-2326296b87c37bdca931.js\"],\"component---src-posts-2022-08-31-the-nature-of-software-development-book-report-mdx\":[\"/component---src-posts-2022-08-31-the-nature-of-software-development-book-report-mdx-aac6070c72ea3773509e.js\"],\"component---src-posts-2022-09-08-software-master-book-report-mdx\":[\"/component---src-posts-2022-09-08-software-master-book-report-mdx-61acc151ee5ec539d4c5.js\"],\"component---src-posts-2022-09-18-crafting-esolang-mdx\":[\"/component---src-posts-2022-09-18-crafting-esolang-mdx-fc3425e61d2097a61ae6.js\"],\"component---src-posts-2023-05-03-spring-multi-module-architecture-mdx\":[\"/component---src-posts-2023-05-03-spring-multi-module-architecture-mdx-259d62e4991399e5d554.js\"],\"component---src-posts-2023-07-10-effective-work-mdx\":[\"/component---src-posts-2023-07-10-effective-work-mdx-ff36760795e4a3f51541.js\"],\"component---src-posts-2023-07-17-railway-oriented-programming-mdx\":[\"/component---src-posts-2023-07-17-railway-oriented-programming-mdx-00186813e9d6881bc7cf.js\"],\"component---src-posts-2023-07-24-functional-data-structure-mdx\":[\"/component---src-posts-2023-07-24-functional-data-structure-mdx-6a8bc98e10671b25451d.js\"],\"component---src-posts-2023-11-08-retrace-my-life-mdx\":[\"/component---src-posts-2023-11-08-retrace-my-life-mdx-2df8f078c8b66e8b0636.js\"],\"component---src-posts-2023-12-05-what-is-beautiful-code-mdx\":[\"/component---src-posts-2023-12-05-what-is-beautiful-code-mdx-17d5d0cd7f4da0323ea6.js\"],\"component---src-posts-2023-12-24-developers-learning-and-growth-mdx\":[\"/component---src-posts-2023-12-24-developers-learning-and-growth-mdx-ebcf93388c9f5d60a918.js\"],\"component---src-posts-2024-01-21-type-driven-development-mdx\":[\"/component---src-posts-2024-01-21-type-driven-development-mdx-d67e393cc4f7715069e5.js\"],\"component---src-posts-2024-01-23-linear-method-mdx\":[\"/component---src-posts-2024-01-23-linear-method-mdx-fda82ceb595bf6129e72.js\"],\"component---src-posts-2024-02-18-render-delegation-react-component-mdx\":[\"/component---src-posts-2024-02-18-render-delegation-react-component-mdx-06f0ab89b5d79ee0b9a5.js\"],\"component---src-posts-2024-03-03-ascii-3-d-renderer-mdx\":[\"/component---src-posts-2024-03-03-ascii-3-d-renderer-mdx-23f17f7f1dde9a138d3e.js\"],\"component---src-posts-2024-03-16-principles-of-debugging-mdx\":[\"/component---src-posts-2024-03-16-principles-of-debugging-mdx-f097da7fb22ce9b712bb.js\"],\"component---src-posts-2024-04-14-encrypted-vault-system-mdx\":[\"/component---src-posts-2024-04-14-encrypted-vault-system-mdx-8b0a59b5b1120f7df247.js\"],\"component---src-posts-2024-04-26-living-with-ai-mdx\":[\"/component---src-posts-2024-04-26-living-with-ai-mdx-54579da83f152591effb.js\"],\"component---src-posts-2024-05-10-the-shortcut-mdx\":[\"/component---src-posts-2024-05-10-the-shortcut-mdx-f792fb24d8bbe2d88b61.js\"],\"component---src-posts-2024-05-17-warp-and-weft-mdx\":[\"/component---src-posts-2024-05-17-warp-and-weft-mdx-e4be23e42aaa4f4df49e.js\"],\"component---src-posts-2024-06-08-log-1-mdx\":[\"/component---src-posts-2024-06-08-log-1-mdx-3e794cb1422429da9974.js\"],\"component---src-posts-2024-06-09-log-2-mdx\":[\"/component---src-posts-2024-06-09-log-2-mdx-f04eaa8383b993c33836.js\"],\"component---src-posts-2024-06-10-log-3-mdx\":[\"/component---src-posts-2024-06-10-log-3-mdx-4a39ada72345f2bf5389.js\"],\"component---src-posts-2024-06-11-log-4-mdx\":[\"/component---src-posts-2024-06-11-log-4-mdx-cec000d572fc46f39f5d.js\"],\"component---src-posts-2024-06-12-log-5-mdx\":[\"/component---src-posts-2024-06-12-log-5-mdx-6ef9e67ff5fe5ac70d81.js\"],\"component---src-posts-2024-06-13-log-6-mdx\":[\"/component---src-posts-2024-06-13-log-6-mdx-78d51d7bfac03c6fe75d.js\"],\"component---src-posts-2024-06-15-log-7-mdx\":[\"/component---src-posts-2024-06-15-log-7-mdx-0f9b2d38d876d4994a1d.js\"],\"component---src-posts-2024-06-18-log-8-mdx\":[\"/component---src-posts-2024-06-18-log-8-mdx-f6cac8968574126688bf.js\"],\"component---src-posts-2024-07-09-best-prompt-engineering-lesson-mdx\":[\"/component---src-posts-2024-07-09-best-prompt-engineering-lesson-mdx-f8f31b78069c8b169b49.js\"],\"component---src-posts-2024-07-11-log-9-mdx\":[\"/component---src-posts-2024-07-11-log-9-mdx-b2ba72b7b68a3784b4ba.js\"],\"component---src-posts-2024-07-27-tidy-first-mdx\":[\"/component---src-posts-2024-07-27-tidy-first-mdx-c5d41b3f443ac3c79ea3.js\"],\"component---src-posts-2024-07-29-copybook-mdx\":[\"/component---src-posts-2024-07-29-copybook-mdx-ffadf36ccc7000a0f52e.js\"],\"component---src-posts-2024-10-12-the-aesthetics-of-destroying-software-mdx\":[\"/component---src-posts-2024-10-12-the-aesthetics-of-destroying-software-mdx-2c6638e7044cd82439f0.js\"],\"component---src-posts-2024-10-27-music-recognition-system-mdx\":[\"/component---src-posts-2024-10-27-music-recognition-system-mdx-e2c1adc0d35b14351f19.js\"],\"component---src-posts-2024-11-10-developers-abstraction-structural-thinking-mdx\":[\"/component---src-posts-2024-11-10-developers-abstraction-structural-thinking-mdx-adc0d76cc0c769102d7a.js\"],\"component---src-posts-2025-01-19-using-kotlin-script-mdx\":[\"/component---src-posts-2025-01-19-using-kotlin-script-mdx-e5a8f78f66a6427e7651.js\"],\"component---src-posts-2025-02-06-data-oriented-programming-mdx\":[\"/component---src-posts-2025-02-06-data-oriented-programming-mdx-b6fec9226d2c992378ec.js\"],\"component---src-posts-2025-02-19-coding-test-story-mdx\":[\"/component---src-posts-2025-02-19-coding-test-story-mdx-cb3527463dfdf37ec635.js\"],\"component---src-posts-2025-03-02-react-component-based-thinking-mdx\":[\"/component---src-posts-2025-03-02-react-component-based-thinking-mdx-fa1e329274336b40696c.js\"],\"component---src-posts-2025-03-12-build-large-scale-react-web-apps-mdx\":[\"/component---src-posts-2025-03-12-build-large-scale-react-web-apps-mdx-6c854ca189b3618daf79.js\"],\"component---src-posts-2025-03-30-destruction-oriented-development-with-ai-mdx\":[\"/component---src-posts-2025-03-30-destruction-oriented-development-with-ai-mdx-a60fa8aa8678a6af8953.js\"],\"component---src-posts-2025-04-09-new-kind-of-hallucination-mdx\":[\"/component---src-posts-2025-04-09-new-kind-of-hallucination-mdx-e2098be1631bc06b8be2.js\"],\"component---src-posts-2025-04-10-mcp-from-ux-perspective-mdx\":[\"/component---src-posts-2025-04-10-mcp-from-ux-perspective-mdx-a1d7fdde2786d154b580.js\"],\"component---src-posts-2025-04-16-modeling-series-foreword-mdx\":[\"/component---src-posts-2025-04-16-modeling-series-foreword-mdx-985b56bedf4cc812c2f5.js\"],\"component---src-posts-2025-04-18-modeling-series-view-model-mdx\":[\"/component---src-posts-2025-04-18-modeling-series-view-model-mdx-0e5a1f7d4c654b3973e7.js\"],\"component---src-posts-2025-04-23-modeling-series-conditional-tree-mdx\":[\"/component---src-posts-2025-04-23-modeling-series-conditional-tree-mdx-9880c24a3bcf20ed46fd.js\"],\"component---src-posts-2025-04-25-multi-paradigm-programming-book-mdx\":[\"/component---src-posts-2025-04-25-multi-paradigm-programming-book-mdx-5dbe858c7e334aff3f2a.js\"],\"component---src-posts-2025-04-26-how-to-build-an-agent-mdx\":[\"/component---src-posts-2025-04-26-how-to-build-an-agent-mdx-f86a020610262125b5f2.js\"],\"component---src-posts-2025-05-01-log-10-mdx\":[\"/component---src-posts-2025-05-01-log-10-mdx-19881a6a65875285cce1.js\"],\"component---src-posts-2025-05-02-modeling-series-measure-mdx\":[\"/component---src-posts-2025-05-02-modeling-series-measure-mdx-870ea90a115de9c7797d.js\"],\"component---src-posts-2025-05-06-modeling-series-temporal-mdx\":[\"/component---src-posts-2025-05-06-modeling-series-temporal-mdx-99b8f08e97dd8e4513dd.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2021-02-23-first-post-md\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2021-02-23-first-post-md-d59f91eff07fb0f1fc67.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2021-02-25-about-mongodb-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2021-02-25-about-mongodb-mdx-276196c71516721676a1.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2021-02-28-basic-web-hacking-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2021-02-28-basic-web-hacking-mdx-819424ed2ff7a36f18a0.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2021-03-14-effective-atomic-design-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2021-03-14-effective-atomic-design-mdx-791842ebd7e28c690f92.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2021-03-20-deep-dive-into-datetime-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2021-03-20-deep-dive-into-datetime-mdx-164ff9cc941a5d32a383.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2022-08-05-programmers-brain-book-report-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2022-08-05-programmers-brain-book-report-mdx-2f4a38b4b5a30c29c544.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2022-08-16-polymorphic-react-component-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2022-08-16-polymorphic-react-component-mdx-1fcfc6c206bace22f2b1.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2022-08-31-the-nature-of-software-development-book-report-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2022-08-31-the-nature-of-software-development-book-report-mdx-b5a299938c9c61eb3586.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2022-09-08-software-master-book-report-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2022-09-08-software-master-book-report-mdx-9519baaf5e3f31485fb6.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2022-09-18-crafting-esolang-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2022-09-18-crafting-esolang-mdx-92b56992f868d5c72f86.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-05-03-spring-multi-module-architecture-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-05-03-spring-multi-module-architecture-mdx-1729401e4d67ebbda41c.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-07-10-effective-work-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-07-10-effective-work-mdx-2b575f2c80195b444282.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-07-17-railway-oriented-programming-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-07-17-railway-oriented-programming-mdx-630f8ba6acfa2477008d.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-07-24-functional-data-structure-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-07-24-functional-data-structure-mdx-bce9a1cc30b870af86ab.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-11-08-retrace-my-life-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-11-08-retrace-my-life-mdx-2688f43ce14f4136bb2f.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-12-05-what-is-beautiful-code-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-12-05-what-is-beautiful-code-mdx-6021db15789f1a9ff63a.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2023-12-24-developers-learning-and-growth-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2023-12-24-developers-learning-and-growth-mdx-2e818111b1fd4bbc4c2f.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-01-21-type-driven-development-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-01-21-type-driven-development-mdx-48abc8b5a7461f58ffe3.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-01-23-linear-method-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-01-23-linear-method-mdx-b8063a5798e3688c4aa1.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-02-18-render-delegation-react-component-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-02-18-render-delegation-react-component-mdx-be305c10eae2583e0392.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-03-03-ascii-3-d-renderer-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-03-03-ascii-3-d-renderer-mdx-6eb5695180f016f9f303.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-03-16-principles-of-debugging-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-03-16-principles-of-debugging-mdx-7b62463fe8d47752119a.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-04-14-encrypted-vault-system-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-04-14-encrypted-vault-system-mdx-5c10e5701e19286044a3.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-04-26-living-with-ai-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-04-26-living-with-ai-mdx-f15d5e1a7f1d1f3a29d3.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-05-10-the-shortcut-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-05-10-the-shortcut-mdx-368f620c5923da7e6b10.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-05-17-warp-and-weft-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-05-17-warp-and-weft-mdx-f4d31117d9acaf561485.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-08-log-1-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-08-log-1-mdx-6ea3904b80b88a0fdc2e.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-09-log-2-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-09-log-2-mdx-50aafe6c6789f4510b2c.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-10-log-3-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-10-log-3-mdx-d84eede5231c99d8e432.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-11-log-4-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-11-log-4-mdx-cebe8fa0961c0c6c9a7f.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-12-log-5-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-12-log-5-mdx-c4f2c150b3d48841448f.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-13-log-6-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-13-log-6-mdx-66f894f82e6286f8220a.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-15-log-7-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-15-log-7-mdx-dc56cf2bd37a3eef0c8a.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-06-18-log-8-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-06-18-log-8-mdx-dd52e24dfd78947904a4.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-07-09-best-prompt-engineering-lesson-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-07-09-best-prompt-engineering-lesson-mdx-d1a4fd8389018cf31d60.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-07-11-log-9-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-07-11-log-9-mdx-72105c56d01cce621a23.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-07-27-tidy-first-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-07-27-tidy-first-mdx-0646563efd77552134ad.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-07-29-copybook-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-07-29-copybook-mdx-367c4cf5def14f179ce3.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-10-12-the-aesthetics-of-destroying-software-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-10-12-the-aesthetics-of-destroying-software-mdx-00f9215b27ebe1df6909.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-10-27-music-recognition-system-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-10-27-music-recognition-system-mdx-d00a048b09929652fee9.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2024-11-10-developers-abstraction-structural-thinking-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2024-11-10-developers-abstraction-structural-thinking-mdx-6ed2bd53efe601bf3b4d.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-01-19-using-kotlin-script-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-01-19-using-kotlin-script-mdx-d636a52f8a3c083767f7.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-02-06-data-oriented-programming-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-02-06-data-oriented-programming-mdx-2780fb5e8cb471e0c6a0.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-02-19-coding-test-story-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-02-19-coding-test-story-mdx-dd579238f0a3b566c093.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-03-02-react-component-based-thinking-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-03-02-react-component-based-thinking-mdx-e910126b37b520265bbb.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-03-12-build-large-scale-react-web-apps-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-03-12-build-large-scale-react-web-apps-mdx-ec0a99548d1300dcd0a0.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-03-30-destruction-oriented-development-with-ai-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-03-30-destruction-oriented-development-with-ai-mdx-8abfdcdb4f69c7efface.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-09-new-kind-of-hallucination-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-09-new-kind-of-hallucination-mdx-b2367c7cc1ae0706d89b.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-10-mcp-from-ux-perspective-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-10-mcp-from-ux-perspective-mdx-5806e3f3d63d3cb4fee0.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-16-modeling-series-foreword-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-16-modeling-series-foreword-mdx-d9f46ed3d04f0539a80f.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-18-modeling-series-view-model-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-18-modeling-series-view-model-mdx-1b26e1f1fa4faa1b3394.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-23-modeling-series-conditional-tree-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-23-modeling-series-conditional-tree-mdx-d16e430a00a359290dc2.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-25-multi-paradigm-programming-book-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-25-multi-paradigm-programming-book-mdx-11e7885f20ea6dac59d4.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-04-26-how-to-build-an-agent-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-04-26-how-to-build-an-agent-mdx-001878fd7005b73ba36a.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-05-01-log-10-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-05-01-log-10-mdx-a05699914f4fdbf34afc.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-05-02-modeling-series-measure-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-05-02-modeling-series-measure-mdx-cca6a96cccf9bc6d5979.js\"],\"component---src-templates-post-tsx-content-file-path-src-posts-2025-05-06-modeling-series-temporal-mdx\":[\"/component---src-templates-post-tsx-content-file-path-src-posts-2025-05-06-modeling-series-temporal-mdx-d2268ca269474ab8bb48.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="0317a80c526049591721";</script><script src="/webpack-runtime-3aa53fc22db43b73a0a4.js" async></script><script src="/app-020370bf8aad70be0406.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>