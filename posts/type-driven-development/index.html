<!DOCTYPE html><html lang="ko"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="color-scheme" content="light"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><link rel="alternate" type="application/rss+xml" title="kciter.so" href="/feed.xml"><title>Type-Driven Development | kciter.so</title><meta name="description" content="타입은 개발자에게 친숙하면서도 어색할 수 있는 개념이다. 특히 정적 타입 언어를 사용한다면 타입은 땔래야 땔 수 없는 존재다. 타입은 가끔씩 귀찮게 굴 때도 있지만 개발자에게 막강한 무기가 될 수 있다. 타입은 함수와 데이터가 준수해야 하는 엄격한…"><meta name="author" content="Lee Sun-Hyoup"><!-- Open Graph --><meta property="og:title" content="Type-Driven Development | kciter.so"><meta property="og:description" content="타입은 개발자에게 친숙하면서도 어색할 수 있는 개념이다. 특히 정적 타입 언어를 사용한다면 타입은 땔래야 땔 수 없는 존재다. 타입은 가끔씩 귀찮게 굴 때도 있지만 개발자에게 막강한 무기가 될 수 있다. 타입은 함수와 데이터가 준수해야 하는 엄격한…"><meta property="og:type" content="website"><meta property="og:site_name" content="kciter.so"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://kciter.so/images/2024-01-21-type-driven-development/thumbnail.png"><meta property="og:url" content="https://kciter.so/posts/type-driven-development/"><link rel="canonical" href="https://kciter.so/posts/type-driven-development/"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="Sunhyoup Lee"><meta name="twitter:title" content="Type-Driven Development | kciter.so"><meta name="twitter:description" content="타입은 개발자에게 친숙하면서도 어색할 수 있는 개념이다. 특히 정적 타입 언어를 사용한다면 타입은 땔래야 땔 수 없는 존재다. 타입은 가끔씩 귀찮게 굴 때도 있지만 개발자에게 막강한 무기가 될 수 있다. 타입은 함수와 데이터가 준수해야 하는 엄격한…"><meta name="twitter:image" content="https://kciter.so/images/2024-01-21-type-driven-development/thumbnail.png"><!-- Additional meta from props --><meta name="article:published_time" content="2024-01-21T00:00:00+09:00"><meta name="image" content="https://kciter.so/images/2024-01-21-type-driven-development/thumbnail.png"><meta property="og:image" content="https://kciter.so/images/2024-01-21-type-driven-development/thumbnail.png"><meta property="og:image:secure_url" content="https://kciter.so/images/2024-01-21-type-driven-development/thumbnail.png"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400&family=PT+Sans:wght@400&family=Source+Code+Pro&family=Quattrocento+Sans&display=swap"><!-- Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8K7EBEDX"></script><script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-7M8K7EBEDX');
        </script> <script type="application/ld+json">{"headline":"Type-Driven Development","dateModified":"2024-01-21T00:00:00+09:00","datePublished":"2024-01-21T00:00:00+09:00","image":"https://kciter.so/images/2024-01-21-type-driven-development/thumbnail.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://kciter.so/posts/type-driven-development/"},"author":{"@type":"Person","name":"Lee Sun-Hyoup"},"description":"타입은 개발자에게 친숙하면서도 어색할 수 있는 개념이다. 특히 정적 타입 언어를 사용한다면 타입은 땔래야 땔 수 없는 존재다. 타입은 가끔씩 귀찮게 굴 때도 있지만 개발자에게 막강한 무기가 될 수 있다. 타입은 함수와 데이터가 준수해야 하는 엄격한…","url":"https://kciter.so/posts/type-driven-development/","@type":"BlogPosting","@context":"https://schema.org"}</script> <link rel="stylesheet" href="/_astro/_slug_.D5IQWdfx.css">
<style>.name-gradient[data-astro-cid-k7qsseos]{background:linear-gradient(to right,#191335,#191335 33.33333%,#00ab6c 66.66666%,#00cb8c);background-clip:text;-webkit-text-fill-color:transparent;transition:all .3s ease;background-size:300% 100%;background-position:top left}.name-gradient[data-astro-cid-k7qsseos]:hover{background-position:top left 100%}@media(max-width:30rem){.sponsors[data-astro-cid-4kgnabjz] a:not(:first-of-type){margin-left:-16px}}.related-post[data-astro-cid-llggujpl]{position:relative;transform:scaleZ(1)}.related-post[data-astro-cid-llggujpl]:after{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:8px;transform:scale(1.06);transition:opacity 2s cubic-bezier(.165,.84,.44,1);box-shadow:0 8px 17px #0003,0 6px 20px #00000026;content:"";opacity:0;z-index:-1}.related-post[data-astro-cid-llggujpl]:hover{transform:scale3d(1.006,1.006,1)}.related-post[data-astro-cid-llggujpl]:hover:after{opacity:1}
</style></head> <body> <div class="mx-auto w-[715px] pt-4 max-md:w-[90vw]"> <div class="relative z-10 mb-10 -mx-4 rounded-xl bg-white/40 px-4 py-2.5 font-['Quattrocento_Sans',sans-serif] backdrop-blur-[44px] max-md:-mx-4 max-md:-mt-4 max-md:mb-8 max-md:rounded-none max-md:bg-transparent max-md:backdrop-blur-none" data-astro-cid-3ef6ksr2> <div class="mt-2 w-full" data-astro-cid-3ef6ksr2> <a href="/" class="site-title text-[32px] font-black" style="line-height: 1.15; text-decoration: none; margin-right: 5px;" data-astro-cid-3ef6ksr2>kciter.so</a> <small class="text-[#999]" data-astro-cid-3ef6ksr2>devlog</small> </div> <nav class="flex w-full justify-between pt-2" data-astro-cid-3ef6ksr2> <div class="flex items-center" data-astro-cid-3ef6ksr2> <a href="/timeline/" class="menu-item updated" data-astro-cid-3ef6ksr2>
Timeline
</a> <div class="dropdown" data-astro-cid-3ef6ksr2> <span class="menu-item dropdown-trigger" id="posts-trigger" data-astro-cid-3ef6ksr2>
Posts <span class="chevron" data-astro-cid-3ef6ksr2>&#9662;</span> </span> <div class="dropdown-menu" data-astro-cid-3ef6ksr2> <a href="/articles/" class="dropdown-item" data-astro-cid-3ef6ksr2>Articles</a> <a href="/bookshelf/" class="dropdown-item" data-astro-cid-3ef6ksr2>Bookshelf</a> <a href="/thought/" class="dropdown-item" data-astro-cid-3ef6ksr2>Thoughts</a> </div> </div> <a href="https://kciter.so/talks/" class="menu-item" data-astro-cid-3ef6ksr2>Talks</a> <a href="/about/" class="menu-item" data-astro-cid-3ef6ksr2>About</a> </div> <div class="flex items-center gap-3" data-astro-cid-3ef6ksr2> <button id="search-btn" class="search-btn" aria-label="Search" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-3ef6ksr2> <circle cx="11" cy="11" r="8" data-astro-cid-3ef6ksr2></circle> <line x1="21" y1="21" x2="16.65" y2="16.65" data-astro-cid-3ef6ksr2></line> </svg> </button> <div class="max-md:hidden" data-astro-cid-3ef6ksr2> <a href="https://github.com/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="GitHub" style="--hover-color: #343434; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.38.6.12.83-.26.83-.57v-2.2c-3.34.73-4.04-1.44-4.04-1.44-.55-1.38-1.33-1.75-1.33-1.75-1.09-.74.08-.73.08-.73 1.2.09 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49 1 .1-.78.42-1.3.76-1.6-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6.02 0c2.28-1.55 3.28-1.23 3.28-1.23.66 1.66.25 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .31.22.7.83.57C20.57 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z"/></svg></a><a href="https://www.facebook.com/sunhyoup.lee" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="Facebook" style="--hover-color: #3d5b99; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M24 12.07C24 5.41 18.63 0 12 0S0 5.41 0 12.07c0 6.02 4.39 11.02 10.13 11.93v-8.44H7.08v-3.49h3.04V9.41c0-3.02 1.79-4.68 4.53-4.68 1.31 0 2.68.24 2.68.24v2.97h-1.51c-1.49 0-1.95.93-1.95 1.88v2.26h3.33l-.53 3.49h-2.8v8.44C19.61 23.09 24 18.09 24 12.07z"/></svg></a><a href="https://www.linkedin.com/in/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="LinkedIn" style="--hover-color: #0073a4; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M20.45 20.45h-3.55v-5.57c0-1.33-.02-3.04-1.85-3.04-1.85 0-2.14 1.45-2.14 2.94v5.67H9.36V9h3.41v1.56h.05c.48-.9 1.64-1.85 3.37-1.85 3.6 0 4.27 2.37 4.27 5.46v6.28zM5.34 7.43a2.06 2.06 0 1 1 0-4.12 2.06 2.06 0 0 1 0 4.12zM7.12 20.45H3.56V9h3.56v11.45zM22.22 0H1.77C.79 0 0 .77 0 1.72v20.56C0 23.23.79 24 1.77 24h20.45C23.2 24 24 23.23 24 22.28V1.72C24 .77 23.2 0 22.22 0z"/></svg></a><a href="https://twitter.com/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="X (Twitter)" style="--hover-color: #343434; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href="/feed.xml" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="RSS Feed" style="--hover-color: #ff6600; transition: color .5s;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M6.18 15.64a2.18 2.18 0 1 1 0 4.36 2.18 2.18 0 0 1 0-4.36zM4 4.44v3.57A12.01 12.01 0 0 1 15.99 20h3.57A15.57 15.57 0 0 0 4 4.44zM4 10.1v3.57c3.5 0 6.33 2.84 6.33 6.33h3.57c0-5.47-4.43-9.9-9.9-9.9z"/></svg></a> </div> </div> </nav> <!-- Mobile sub-tab (hidden by default) --> <div class="mobile-tabs" id="mobile-tabs" data-astro-cid-3ef6ksr2> <a href="/articles/" class="mobile-tab" data-astro-cid-3ef6ksr2>Articles</a> <a href="/bookshelf/" class="mobile-tab" data-astro-cid-3ef6ksr2>Bookshelf</a> <a href="/thought/" class="mobile-tab" data-astro-cid-3ef6ksr2>Thoughts</a> </div> </div> <!-- Search Modal --> <div id="search-modal" class="search-modal" data-astro-cid-3ef6ksr2> <div class="search-backdrop" data-astro-cid-3ef6ksr2></div> <div class="search-container" data-astro-cid-3ef6ksr2> <div class="search-input-wrap" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-3ef6ksr2> <circle cx="11" cy="11" r="8" data-astro-cid-3ef6ksr2></circle> <line x1="21" y1="21" x2="16.65" y2="16.65" data-astro-cid-3ef6ksr2></line> </svg> <input id="search-input" type="text" placeholder="Search posts..." autocomplete="off" data-astro-cid-3ef6ksr2> <kbd class="search-kbd" data-astro-cid-3ef6ksr2>ESC</kbd> </div> <div id="search-results" class="search-results" data-astro-cid-3ef6ksr2></div> </div> </div>  <script type="module">const o=document.getElementById("posts-trigger"),l=document.getElementById("mobile-tabs");if(o&&l){const e=o.querySelector(".chevron");o.addEventListener("click",t=>{window.innerWidth<=768&&(t.preventDefault(),l.classList.toggle("open"),e?.classList.toggle("open"))});const i=window.location.pathname;l.querySelectorAll(".mobile-tab").forEach(t=>{i.startsWith(t.getAttribute("href")||"")&&t.classList.add("active")})}let s=null;async function m(){if(s)return s;try{s=await import(new URL("/pagefind/pagefind.js",window.location.origin).href),await s.init()}catch{console.warn("Pagefind not available (run build first)")}return s}const c=document.getElementById("search-modal"),r=document.getElementById("search-input"),a=document.getElementById("search-results"),p=document.getElementById("search-btn"),v=c.querySelector(".search-backdrop");function f(){c.classList.add("open"),r.value="",a.innerHTML="",setTimeout(()=>r.focus(),50),m()}function d(){c.classList.remove("open")}p.addEventListener("click",f);v.addEventListener("click",d);document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),c.classList.contains("open")?d():f()),e.key==="Escape"&&d()});let u;r.addEventListener("input",()=>{clearTimeout(u),u=setTimeout(()=>g(r.value),200)});async function g(e){if(!e.trim()){a.innerHTML="";return}const i=await m();if(!i){a.innerHTML='<div class="search-no-results">Search is not available in dev mode.</div>';return}const t=await i.search(e);if(t.results.length===0){a.innerHTML='<div class="search-no-results">No results found.</div>';return}const h=await Promise.all(t.results.slice(0,10).map(n=>n.data()));a.innerHTML=h.map(n=>`
        <a href="${n.url}" class="search-result-item">
          <div class="search-result-title">${n.meta?.title||n.url}</div>
          <div class="search-result-excerpt">${n.excerpt}</div>
        </a>
      `).join("")}</script> <div class="post-container">   <h1 class="post-title">Type-Driven Development</h1> <span class="post-date">Written on January 21, 2024</span> <img src="/images/2024-01-21-type-driven-development/thumbnail.png" alt="Type-Driven Development" style="width: 100%;"><div class="toc" data-margin-top="50"><ul class="toc-list"><li><a href="#타입에-대한-재인식">타입에 대한 재인식</a><ul class="toc-list"><li><a href="#타입은-집합이다">타입은 집합이다</a></li><li><a href="#타입의-변환">타입의 변환</a></li><li><a href="#타입을-통한-추상화">타입을 통한 추상화</a></li><li><a href="#가독성과-런타임-안정성-챙기기">가독성과 런타임 안정성 챙기기</a></li></ul></li><li><a href="#우아한-타입-활용">우아한 타입 활용</a><ul class="toc-list"><li><a href="#제네릭을-이용한-범용적인-타입">제네릭을 이용한 범용적인 타입</a></li><li><a href="#팬텀-타입을-이용한-범위-제한">팬텀 타입을 이용한 범위 제한</a></li><li><a href="#유니온-타입을-이용한-행동-제한">유니온 타입을 이용한 행동 제한</a></li><li><a href="#최소-타입을-이용한-todo-처리">최소 타입을 이용한 TODO 처리</a></li><li><a href="#타입을-이용한-유한-상태-머신-구현">타입을 이용한 유한 상태 머신 구현</a></li><li><a href="#의존-타입으로-검증하기">의존 타입으로 검증하기</a></li></ul></li><li><a href="#타입-주도-개발">타입 주도 개발</a><ul class="toc-list"><li><a href="#타입을-먼저-정의하기">타입을 먼저 정의하기</a></li><li><a href="#도메인-반영하기">도메인 반영하기</a></li><li><a href="#함수를-타입으로-추상화하기">함수를 타입으로 추상화하기</a></li><li><a href="#테스트-코드와-함께하기">테스트 코드와 함께하기</a></li></ul></li><li><a href="#마치며">마치며</a><ul class="toc-list"><li><a href="#footnote-label">Footnotes</a></li></ul></li></ul></div><div class="post-content" data-pagefind-body>  <p>타입은 개발자에게 친숙하면서도 어색할 수 있는 개념이다. 특히 정적 타입 언어를 사용한다면 타입은 땔래야 땔 수 없는 존재다. 타입은 가끔씩 귀찮게 굴 때도 있지만 개발자에게 <strong>막강한 무기</strong>가 될 수 있다. <strong>타입은 함수와 데이터가 준수해야 하는 엄격한 계약</strong>이며 타입 시스템은 이를 어길 수 없게 만든다.</p>
<p>개발자는 타입 시스템 잘 활용하여 더 안정적인 프로그램을 만들거나 코드 중복을 제거하는 것이 가능하다. 반대로 개발자가 타입을 풍부하게 사용하지 않는다면 타입 시스템을 통해 얻을 수 있는 이점을 제대로 누릴 수 없다. 이 글에서 소개하는 <code>타입 주도 개발</code>은 타입 시스템에 대해 공부하기 좋은 방법론이며 이를 통해 로직에 대한 새로운 관점을 익힐 수 있다.</p>
<blockquote>
<p>🚨 참고로 타입 주도 개발은 대중적이지 않기에 뚜렷하게 어떻게 해야한다고 정해져 있지 않다. 따지자면 타입 주도 개발은 타입이라는 계약을 통해 로직을 설계하고 책임과 역할을 분명하게 정의한다는 점에서 <a href="https://ko.wikipedia.org/wiki/%EA%B3%84%EC%95%BD%EC%97%90_%EC%9D%98%ED%95%9C_%EC%84%A4%EA%B3%84" rel="noopener noreferrer" target="_blank">계약에 의한 설계</a>와 비슷하다.</p>
<p>다만, 타입 시스템이 정교하지 않은 언어를 주력으로 사용한다면 의미가 없는 허상이라 생각할 수 있다. 그렇지만 최근 몇 년 동안 함수형 기반 언어의 개념이 널리 퍼졌고 타입을 잘 다루기 위한 논의도 충분히 깊어졌기에 시도해볼 수 있는 방법론이 됐다고 생각한다. 따라서 이 글에서는 필자 나름대로 타입을 중심으로 사고하는 방법을 소개할 것이다.</p>
</blockquote>
<h1 id="타입에-대한-재인식"><a href="#타입에-대한-재인식">타입에 대한 재인식</a></h1>
<p>타입에 대해 깊게 생각해본 적이 없다면 단순히 언어에서 제공되는 원시 타입이나 정의된 클래스만을 생각할 수 있다. 하지만 타입 시스템을 잘 활용하면 좀 더 풍부한 타입을 정의할 수 있다. 앞서 말했듯이 이를 통해 코드의 안정성을 높이거나 코드 중복을 제거할 수 있다. 타입을 잘 활용하는 방법과 타입 주도 개발에 대해 알아보기 전에 타입이 무엇인지 다시 알아보도록하자.</p>
<h2 id="타입은-집합이다"><a href="#타입은-집합이다">타입은 집합이다</a></h2>
<p>타입은 어떠한 값이 속할 수 있는 집합이며, 이 집합에 속하는 값은 타입을 준수한다고 말한다. 예를 들어 <code>Int</code> 타입은 정수를 포함하는 집합이며, <code>String</code> 타입은 문자열을 포함하는 집합이다. 예를 들어 표현하면 다음과 같다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#24292E">Int </span><span style="color:#D73A49">=</span><span style="color:#24292E"> { </span><span style="color:#D73A49">-</span><span style="color:#005CC5">2147483648</span><span style="color:#24292E">, </span><span style="color:#D73A49">..</span><span style="color:#24292E">., </span><span style="color:#D73A49">-</span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#005CC5">0</span><span style="color:#24292E">, </span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#D73A49">..</span><span style="color:#24292E">., </span><span style="color:#005CC5">2147483647</span><span style="color:#24292E"> }</span></span>
<span class="line"><span style="color:#24292E">Boolean </span><span style="color:#D73A49">=</span><span style="color:#24292E"> { </span><span style="color:#005CC5">true</span><span style="color:#24292E">, </span><span style="color:#005CC5">false</span><span style="color:#24292E"> }</span></span>
<span class="line"><span style="color:#24292E">String </span><span style="color:#D73A49">=</span><span style="color:#24292E"> { </span><span style="color:#032F62">&quot;&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;a&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;b&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;c&quot;</span><span style="color:#24292E">, </span><span style="color:#D73A49">..</span><span style="color:#24292E">. }</span></span></code></pre>
<p>중요한 것은 타입은 무한하지 않고 제한적이라는 것이다. 예를 들어 <code>Int</code> 타입은 <code>-2147483648</code>부터 <code>2147483647</code>까지의 정수만 포함한다. 이는 <code>Int</code> 타입이라는 집합에 속하는 값은 이 범위를 벗어날 수 없다는 것을 의미한다. 따라서 이제 인식을 바꿔 <strong>타입은 범위를 제한한 집합</strong>이라고 생각해보자. 이는 개발자에게 있어 타입이라는 개념을 더욱 풍부하게 만들어준다.</p>
<h2 id="타입의-변환"><a href="#타입의-변환">타입의 변환</a></h2>
<p>타입에 속한 값은 변형을 통해 다른 타입으로 변환될 수 있다. 예를 들어 <code>Int</code> 타입의 값은 대부분의 언어에서 제공하는 변환 함수를 통해 <code>String</code> 타입으로 변환될 수 있다. 혹은 같은 계열인 타입으로 변환하는 것도 가능하다. 예를 들어 <code>Int</code> 타입의 값은 더 큰 범위인 <code>Long</code> 타입으로 변환될 수 있다.</p>
<p>중요한 것은 변환을 할 때 <strong>함수를 거친다</strong>는 것이다. 수학적으로 함수는 정의역에 해당하는 값을 치역으로 변환하는 것이다.</p>
<figure><img src="/images/2024-01-21-type-driven-development/function-process.png" alt="수학 책에서 볼 수 있던 도식" loading="lazy" width="50%" style="cursor:default;margin:0 auto;display:block"/><figcaption>수학 책에서 볼 수 있던 도식</figcaption></figure>
<p>이를 프로그래밍 언어의 함수에 대응하면 다음과 같다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#24292E">          ↓ 정의역  ↓ </span><span style="color:#6F42C1">치역</span><span style="color:#24292E">(공역)</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> f</span><span style="color:#24292E">(x: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">): </span><span style="color:#6F42C1">String</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> </span></span>
<span class="line"><span style="color:#24292E">  x.</span><span style="color:#6F42C1">toString</span><span style="color:#24292E">()</span></span></code></pre>
<p>즉, 함수의 파라메터는 정의역에 해당하며, 반환값은 치역에 해당한다. 이러한 개념으로 바라보면 함수를 크게 세 가지로 나눌 수 있다.</p>
<ul>
<li>범위를 확장하는 함수</li>
<li>범위를 제한하는 함수</li>
<li>일대일 대응 함수</li>
</ul>
<p>범위를 확장하는 함수는 더 요소가 더 많은 집합으로 변환하는 함수를 말한다. 이를 조금 더 단순하게 표현하면 <strong>범위가 작은 타입에서 큰 타입으로 변환하는 것</strong>을 말한다. 예를 들어 <code>Int</code> 타입의 값은 <code>Long</code> 타입으로 변환될 수 있다. 이는 <code>Int</code> 타입의 값이 <code>Long</code> 타입의 값으로 변환될 때 값의 손실이 없기 때문이다. 하지만 반대는 문제가 생길 수 있다.</p>
<figure><img src="/images/2024-01-21-type-driven-development/injective-function.png" alt="범위 확장 함수" loading="lazy" width="50%" style="cursor:default;margin:0 auto;display:block"/><figcaption>범위 확장 함수</figcaption></figure>
<p>간단한 코드 예시를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">enum</span><span style="color:#6F42C1"> Event</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">  BIRTH_DAY,</span></span>
<span class="line"><span style="color:#24292E">  AWESOME_DAY,</span></span>
<span class="line"><span style="color:#24292E">  BEAUTIFUL_DAY</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> getEventId</span><span style="color:#24292E">(event: </span><span style="color:#6F42C1">Event</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Int</span><span style="color:#D73A49"> =</span></span>
<span class="line"><span style="color:#D73A49">  when</span><span style="color:#24292E"> (event) {</span></span>
<span class="line"><span style="color:#24292E">    Event.BIRTH_DAY </span><span style="color:#D73A49">-&gt;</span><span style="color:#005CC5"> 1</span></span>
<span class="line"><span style="color:#24292E">    Event.AWESOME_DAY </span><span style="color:#D73A49">-&gt;</span><span style="color:#005CC5"> 2</span></span>
<span class="line"><span style="color:#24292E">    Event.BEAUTIFUL_DAY </span><span style="color:#D73A49">-&gt;</span><span style="color:#005CC5"> 3</span></span>
<span class="line"><span style="color:#24292E">  }</span></span></code></pre>
<p>위 코드는 <code>Event</code> 타입을 <code>Int</code> 타입으로 변환하는 함수이다. 이 함수는 단사 함수라서 <code>Event</code> 타입의 값은 <code>Int</code> 타입의 값으로 변환될 때 값의 손실이 없다. 하지만 반대로 <code>Int</code> 타입의 값은 <code>Event</code> 타입의 값으로 변환될 때 값의 손실이 발생한다. 예를 들어 <code>4</code>라는 <code>Int</code> 타입의 값은 <code>Event</code> 타입으로 변환될 수 없다. 이는 <code>Event</code> 타입의 값은 <code>1</code>, <code>2</code>, <code>3</code>만 포함하기 때문이다.</p>
<p>반대로 범위를 제한하는 함수는 <strong>범위가 큰 타입에서 작은 타입으로 변환하는 것</strong>을 말한다. 앞서 들었던 예의 반대로 <code>Long</code> 타입의 값을 <code>Int</code> 타입으로 변환할 수는 있지만 <code>Int</code> 타입의 범위를 벗어날 수 있기 때문에 이에 대한 처리가 필요하다.</p>
<figure><img src="/images/2024-01-21-type-driven-development/surjective-function.png" alt="범위 제한 함수" loading="lazy" width="50%" style="cursor:default;margin:0 auto;display:block"/><figcaption>범위 제한 함수</figcaption></figure>
<p>앞서 작성한 코드의 반대를 작성해보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> getEvent</span><span style="color:#24292E">(eventId: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Event</span><span style="color:#D73A49"> =</span></span>
<span class="line"><span style="color:#D73A49">  when</span><span style="color:#24292E"> (eventId) {</span></span>
<span class="line"><span style="color:#005CC5">    1</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Event.BIRTH_DAY</span></span>
<span class="line"><span style="color:#005CC5">    2</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Event.AWESOME_DAY</span></span>
<span class="line"><span style="color:#005CC5">    3</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Event.BEAUTIFUL_DAY</span></span>
<span class="line"><span style="color:#D73A49">    else</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Event.BEAUTIFUL_DAY</span></span>
<span class="line"><span style="color:#24292E">  }</span></span></code></pre>
<p><code>eventId</code>를 통해 <code>Event</code>를 생성할 수 있지만 범위를 벗어나는 경우가 생기기 때문에 이에 대한 예외 처리를 추가해줬다.</p>
<p>마지막으로 일대일 대응 함수는 두 집합 사이를 중복 없이 일대일로 대응시키는 함수를 말한다. 보통 항등 함수를 말한다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> identity</span><span style="color:#24292E">(x: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Int</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">identity</span><span style="color:#24292E">(</span><span style="color:#005CC5">1</span><span style="color:#24292E">) </span><span style="color:#6A737D">// 1</span></span>
<span class="line"><span style="color:#6F42C1">identity</span><span style="color:#24292E">(</span><span style="color:#005CC5">126</span><span style="color:#24292E">) </span><span style="color:#6A737D">// 126</span></span></code></pre>
<p>위 같은 함수가 불필요하게 보일 수 있지만 항등 함수는 0과 1이 필요한 것처럼 고차 함수를 사용할 때 유용하게 사용할 수 있다. 예를 들어, 변환 함수를 인자로 받는 고차 함수를 작성한다고 가정해보자. 이때 만약 변환이 필요없다면 항등 함수를 사용할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">fun</span><span style="color:#24292E"> &lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt; </span><span style="color:#6F42C1">identity</span><span style="color:#24292E">(x: </span><span style="color:#6F42C1">T</span><span style="color:#24292E">): </span><span style="color:#6F42C1">T</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#24292E"> &lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">, </span><span style="color:#6F42C1">R</span><span style="color:#24292E">&gt; </span><span style="color:#6F42C1">map</span><span style="color:#24292E">(list: </span><span style="color:#6F42C1">List</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt;, f: (</span><span style="color:#6F42C1">T</span><span style="color:#24292E">) -&gt; </span><span style="color:#6F42C1">R</span><span style="color:#24292E">): </span><span style="color:#6F42C1">List</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">R</span><span style="color:#24292E">&gt; </span><span style="color:#D73A49">=</span></span>
<span class="line"><span style="color:#24292E">  list.</span><span style="color:#6F42C1">map</span><span style="color:#24292E"> { </span><span style="color:#6F42C1">f</span><span style="color:#24292E">(it) }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">map</span><span style="color:#24292E">(</span><span style="color:#6F42C1">listOf</span><span style="color:#24292E">(</span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#005CC5">2</span><span style="color:#24292E">, </span><span style="color:#005CC5">3</span><span style="color:#24292E">), ::</span><span style="color:#6F42C1">identity</span><span style="color:#24292E">) </span><span style="color:#6A737D">// [1, 2, 3]</span></span>
<span class="line"><span style="color:#6F42C1">map</span><span style="color:#24292E">(</span><span style="color:#6F42C1">listOf</span><span style="color:#24292E">(</span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#005CC5">2</span><span style="color:#24292E">, </span><span style="color:#005CC5">3</span><span style="color:#24292E">), { it </span><span style="color:#D73A49">*</span><span style="color:#005CC5"> 2</span><span style="color:#24292E"> }) </span><span style="color:#6A737D">// [2, 4, 6]</span></span></code></pre>
<p>위 코드를 봤을 때 단순히 변환 함수를 사용하지 않고 바로 반환하면 된다고 생각할 수 있다. 일반적으론 그렇지만 함수형으로 코드를 작성한다면 분기 로직을 작성하기 애매하거나 가독성 등을 위해 항등 함수를 사용하는 경우가 있을 수 있다. 예를 들어, 조건에 따라 값을 다르게 변형해야 하는 경우가 있고 조건 중 하나가 변환을 하지 않아도 되는 경우가 있다. 이때 항등 함수를 사용하면 이를 깔끔하게 처리할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// 상품 상태를 나타내는 enum class</span></span>
<span class="line"><span style="color:#D73A49">enum</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> ProductStatus</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">  OnSale, Regular</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 상품 데이터 클래스</span></span>
<span class="line"><span style="color:#D73A49">data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Product</span><span style="color:#24292E">(</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> name: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">, </span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> price: </span><span style="color:#6F42C1">Double</span><span style="color:#24292E">, </span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> status: </span><span style="color:#6F42C1">ProductStatus</span></span>
<span class="line"><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 항등 함수 정의</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#24292E"> &lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt; </span><span style="color:#6F42C1">identity</span><span style="color:#24292E">(x: </span><span style="color:#6F42C1">T</span><span style="color:#24292E">): </span><span style="color:#6F42C1">T</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 가격에 할인을 적용하는 함수</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> applyDiscount</span><span style="color:#24292E">(price: </span><span style="color:#6F42C1">Double</span><span style="color:#24292E">, discount: </span><span style="color:#6F42C1">Double</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Double</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> </span></span>
<span class="line"><span style="color:#24292E">  price </span><span style="color:#D73A49">*</span><span style="color:#24292E"> (</span><span style="color:#005CC5">1</span><span style="color:#D73A49"> -</span><span style="color:#24292E"> discount)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 상품의 상태에 따라 가격을 변환하는 로직</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> transformProductPrice</span><span style="color:#24292E">(product: </span><span style="color:#6F42C1">Product</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Double</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">  // 패턴 매칭을 통해 변환기를 선택</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> transformer: (</span><span style="color:#6F42C1">Double</span><span style="color:#24292E">) -&gt; </span><span style="color:#6F42C1">Double</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> when</span><span style="color:#24292E"> (product.status) {</span></span>
<span class="line"><span style="color:#24292E">    ProductStatus.OnSale </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> { price </span><span style="color:#D73A49">-&gt;</span><span style="color:#6F42C1"> applyDiscount</span><span style="color:#24292E">(price, </span><span style="color:#005CC5">0.4</span><span style="color:#24292E">) }</span></span>
<span class="line"><span style="color:#24292E">    ProductStatus.Regular </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> ::</span><span style="color:#6F42C1">identity</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // 선택된 변환기를 사용하여 가격을 변환</span></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#6F42C1"> transformer</span><span style="color:#24292E">(product.price)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> onSaleProduct </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> Product</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Laptop&quot;</span><span style="color:#24292E">, </span><span style="color:#005CC5">1000.0</span><span style="color:#24292E">, ProductStatus.OnSale)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> regularProduct </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> Product</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Phone&quot;</span><span style="color:#24292E">, </span><span style="color:#005CC5">800.0</span><span style="color:#24292E">, ProductStatus.Regular)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">transformProductPrice</span><span style="color:#24292E">(onSaleProduct) </span><span style="color:#6A737D">// 600.0</span></span>
<span class="line"><span style="color:#6F42C1">transformProductPrice</span><span style="color:#24292E">(regularProduct) </span><span style="color:#6A737D">// 800.0</span></span></code></pre>
<h2 id="타입을-통한-추상화"><a href="#타입을-통한-추상화">타입을 통한 추상화</a></h2>
<p>앞서 범위에 대한 이야기를 한 것은 <strong>타입을 통해 집합이 바뀌고 범위가 바뀔 수 있다는 것</strong>을 말하고 싶었기 때문이다. 개발자는 목적 달성을 위해 함수를 통해 값을 변형하거나 필터링하거나 좁히거나 늘릴 수 있다. 이 각각의 과정에서 입력과 출력을 타입으로 나타낼 수 있다. 이말은 즉, <strong>타입을 통해 로직을 추상화 하는 것이 가능하다</strong>라는 뜻이다.</p>
<figure><img src="/images/2024-01-21-type-driven-development/logic.png" alt="로직은 입출력의 연속" loading="lazy" width="100%" style="cursor:default;margin:0 auto;display:block"/><figcaption>로직은 입출력의 연속</figcaption></figure>
<p>프로그램을 개발할 때 어떤 패러다임과 방법론을 사용하더라도 로직이 최종적으로 입력, 처리, 출력을 거친다는 것은 변하지 않는다. 타입을 통해 로직을 추상화 한다는 것은 <strong>입력과 출력을 타입으로 나타내고 이를 통해 로직을 설계</strong>한다는 것과 같다. 이는 뒤에서 조금 더 자세히 설명할 타입 주도 개발의 핵심이라 할 수 있다.</p>
<p>아주 간단한 예시를 들어보자. 만약 <code>리스트 안에 있는 모든 숫자를 더하는 함수</code>를 작성한다고 가정해보자. 그렇다면 다음과 같이 표현할 수 있다.</p>
<ul>
<li>입력: <code>List&lt;Int&gt;</code></li>
<li>출력: <code>Int</code></li>
</ul>
<p>이를 함수로 표현하면 <code>List&lt;Int&gt; -&gt; Int</code>와 같이 표현할 수 있다. 이를 통해 로직을 처리하는 함수의 입력과 출력을 타입으로 나타내고 이를 통해 로직을 구현하는 것이 가능하다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> sum</span><span style="color:#24292E">(list: </span><span style="color:#6F42C1">List</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Int</span><span style="color:#24292E">&gt;): </span><span style="color:#6F42C1">Int</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">  // TODO: List&lt;Int&gt;를 목적에 맞게 처리하여 Int로 가공해야 한다.</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="가독성과-런타임-안정성-챙기기"><a href="#가독성과-런타임-안정성-챙기기">가독성과 런타임 안정성 챙기기</a></h2>
<p>주요 목적은 아니지만 타입을 이용하면 가독성을 챙기는 것도 가능하다. 예를 들어 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> User</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> name: </span><span style="color:#6F42C1">String</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> age: </span><span style="color:#6F42C1">Int</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> email: </span><span style="color:#6F42C1">String</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  constructor</span><span style="color:#24292E">(name: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">, age: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">, email: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.name </span><span style="color:#D73A49">=</span><span style="color:#24292E"> name</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.age </span><span style="color:#D73A49">=</span><span style="color:#24292E"> age</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.email </span><span style="color:#D73A49">=</span><span style="color:#24292E"> email</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>위 코드는 <code>User</code> 클래스를 정의한 코드이다. 이 코드는 문제가 없어 보이지만 이후에 문제가 생길 수 있다. <code>User</code> 클래스가 가지고 있는 <code>age</code>, <code>email</code> 속성은 각각 <code>Int</code>, <code>String</code> 타입을 가지고 있다. 따라서 정수와 문자열을 할당할 수 있지만 할당된 값이 정말로 나이와 이메일인지는 알 수 없다. 이는 타입 시스템이 <code>User</code> 클래스가 가지고 있는 속성이 어떤 의미를 가지고 있는지 알 수 없기 때문이다.</p>
<figure><img src="/images/2024-01-21-type-driven-development/types-are-a-lie.png" alt="타입이 거짓말을 하고 있어요!" loading="lazy" width="50%" style="cursor:default;margin:0 auto;display:block"/><figcaption>타입이 거짓말을 하고 있어요!</figcaption></figure>
<p>이 문제를 해결하기 위해 검증 로직을 사용할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> User</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> name: </span><span style="color:#6F42C1">String</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> age: </span><span style="color:#6F42C1">Int</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> email: </span><span style="color:#6F42C1">String</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  constructor</span><span style="color:#24292E">(name: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">, age: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">, email: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.name </span><span style="color:#D73A49">=</span><span style="color:#24292E"> name</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.age </span><span style="color:#D73A49">=</span><span style="color:#24292E"> age</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.email </span><span style="color:#D73A49">=</span><span style="color:#24292E"> email</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> (age </span><span style="color:#D73A49">&lt;</span><span style="color:#005CC5"> 0</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">      throw</span><span style="color:#6F42C1"> IllegalArgumentException</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;나이는 0보다 작을 수 없습니다.&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">email.</span><span style="color:#6F42C1">contains</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;@&quot;</span><span style="color:#24292E">)) {</span></span>
<span class="line"><span style="color:#D73A49">      throw</span><span style="color:#6F42C1"> IllegalArgumentException</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;이메일 형식이 올바르지 않습니다.&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>위와 같이 해결할 수도 있지만 타입을 이용하면 이를 좀 더 우아하게 해결할 수 있다. 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// 참고로 JVM 환경이라면 @JvmInline 어노테이션이 필요하다</span></span>
<span class="line"><span style="color:#D73A49">value</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Name</span><span style="color:#24292E">(</span><span style="color:#D73A49">val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">  init</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">    require</span><span style="color:#24292E">(</span><span style="color:#D73A49">value</span><span style="color:#24292E">.</span><span style="color:#6F42C1">isNotBlank</span><span style="color:#24292E">()) { </span><span style="color:#032F62">&quot;이름은 공백일 수 없습니다.&quot;</span><span style="color:#24292E"> }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">value</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Age</span><span style="color:#24292E">(</span><span style="color:#D73A49">val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">  init</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">    require</span><span style="color:#24292E">(</span><span style="color:#D73A49">value</span><span style="color:#D73A49"> &gt;=</span><span style="color:#005CC5"> 0</span><span style="color:#24292E">) { </span><span style="color:#032F62">&quot;나이는 0보다 작을 수 없습니다.&quot;</span><span style="color:#24292E"> }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">value</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Email</span><span style="color:#24292E">(</span><span style="color:#D73A49">val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">  init</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">    require</span><span style="color:#24292E">(</span><span style="color:#D73A49">value</span><span style="color:#24292E">.</span><span style="color:#6F42C1">contains</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;@&quot;</span><span style="color:#24292E">)) { </span><span style="color:#032F62">&quot;이메일 형식이 올바르지 않습니다.&quot;</span><span style="color:#24292E"> }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> User</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> name: </span><span style="color:#6F42C1">Name</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> age: </span><span style="color:#6F42C1">Age</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> email: </span><span style="color:#6F42C1">Email</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  constructor</span><span style="color:#24292E">(name: </span><span style="color:#6F42C1">Name</span><span style="color:#24292E">, age: </span><span style="color:#6F42C1">Age</span><span style="color:#24292E">, email: </span><span style="color:#6F42C1">Email</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.name </span><span style="color:#D73A49">=</span><span style="color:#24292E"> name</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.age </span><span style="color:#D73A49">=</span><span style="color:#24292E"> age</span></span>
<span class="line"><span style="color:#005CC5">    this</span><span style="color:#24292E">.email </span><span style="color:#D73A49">=</span><span style="color:#24292E"> email</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>이런 방식으로 타입을 별도로 정의하여 사용하면 <code>User</code> 클래스가 가지고 있는 속성이 어떤 의미를 가지고 있는지 알 수 있으므로 가독성에 더 좋다. 또한 이러한 타입은 다양한 곳에서 재사용할 수 있으므로 코드의 중복을 줄일 수 있다.</p>
<p>참고로 이 글에서는 코틀린의 <code>value class</code>를 사용헀지만 다른 언어에서도 클래스를 사용하여 똑같이 만들 수 있다. 정리하자면 타입 시스템을 풍부하게 사용하는 것으로 다음과 같은 이점을 얻을 수 있다.</p>
<ul>
<li>컴파일 타임에 오류를 발견할 수 있다.</li>
<li>타입을 통해 로직을 설계 할 수 있다.</li>
<li>코드의 가독성을 높일 수 있다.</li>
<li>코드의 안정성을 높일 수 있다.</li>
</ul>
<h1 id="우아한-타입-활용"><a href="#우아한-타입-활용">우아한 타입 활용</a></h1>
<p>타입 시스템을 잘 이해하고 있다면 타입에 기반하여 범위와 행동을 제한하는 설계가 가능하다. 만약 내 코드를 사용하는 다른 개발자가 조금 더 안전하게 코딩할 수 있게 돕고 싶다면 타입 시스템을 잘 활용하는 것이 좋다.</p>
<p>이번에는 앞서 소개한 사례 외에 타입 시스템을 활용한 다른 사례를 소개할 것이다. 다만, 타입 시스템의 동작은 프로그래밍 언어마다 다르기에 이 글에서 소개하는 문법이 모든 언어에서 지원되는 것은 아니다.</p>
<h2 id="제네릭을-이용한-범용적인-타입"><a href="#제네릭을-이용한-범용적인-타입">제네릭을 이용한 범용적인 타입</a></h2>
<p>제네릭(Generic)<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref aria-describedby="footnote-label">1</a></sup>은 <strong>타입을 일반화하는 방법</strong>으로 많은 언어가 지원하므로 대부분 잘 아는 문법일 것이다. 예를 들어 Kotlin에서 <code>List</code> 타입은 제네릭을 이용하여 <code>Int</code> 타입이나 <code>String</code> 타입을 모두 포함할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> numbers: </span><span style="color:#6F42C1">List</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Int</span><span style="color:#24292E">&gt; </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> listOf</span><span style="color:#24292E">(</span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#005CC5">2</span><span style="color:#24292E">, </span><span style="color:#005CC5">3</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> strings: </span><span style="color:#6F42C1">List</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">String</span><span style="color:#24292E">&gt; </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> listOf</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;a&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;b&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;c&quot;</span><span style="color:#24292E">)</span></span></code></pre>
<figcaption>하나의 List 타입으로 Int와 String을 담을 수 있다</figcaption>
<p>만약 타입 시스템이 제네릭을 지원하지 않는다면 아래 코드처럼 필요할 때마다 타입을 정의해야 한다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> IntList</span><span style="color:#24292E"> { </span><span style="color:#6A737D">/* ... */</span><span style="color:#24292E"> }</span></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> StringList</span><span style="color:#24292E"> { </span><span style="color:#6A737D">/* ... */</span><span style="color:#24292E"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> numbers: </span><span style="color:#6F42C1">IntList</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> listOf</span><span style="color:#24292E">(</span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#005CC5">2</span><span style="color:#24292E">, </span><span style="color:#005CC5">3</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> strings: </span><span style="color:#6F42C1">StringList</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> listOf</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;a&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;b&quot;</span><span style="color:#24292E">, </span><span style="color:#032F62">&quot;c&quot;</span><span style="color:#24292E">)</span></span></code></pre>
<p>제네릭을 잘 사용한다면 코드 중복을 많이 줄일 수 있다. 여기까지는 대부분 잘 아는 내용이므로 좀 더 복잡한 내용을 살펴보자.</p>
<h2 id="팬텀-타입을-이용한-범위-제한"><a href="#팬텀-타입을-이용한-범위-제한">팬텀 타입을 이용한 범위 제한</a></h2>
<p>팬텀 타입(Phantom Type)은 이름 그대로 <strong>실체가 없는 타입</strong>을 말한다. 예를 들어 다음 타입은 의미가 없는 타입이라 볼 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A737D">// TypeScript</span></span>
<span class="line"><span style="color:#D73A49">type</span><span style="color:#6F42C1"> Phantom</span><span style="color:#6A737D"> // 아무런 정의가 없는 타입</span></span></code></pre>
<p>이처럼 우측에 정의가 되지 않은 타입을 팬텀 타입이라고 부른다. 별도로 타입을 정의할 수 없는 언어는 빈 클래스를 사용할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// Kotlin</span></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Phantom</span><span style="color:#6A737D"> // 아무런 내용이 없는 클래스</span></span></code></pre>
<p>얼핏 무의미한 코드로 보이지만 나름대로 사용처가 있다. 주로 <strong>특정 타입에 대한 하위 타입으로 구분</strong>할 때 많이 쓰인다. 예를 들어 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Meters</span></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Kilometers</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Distance</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Unit</span><span style="color:#24292E">&gt;(</span><span style="color:#D73A49">val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Double</span><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> Distance</span><span style="color:#D73A49">&lt;</span><span style="color:#24292E">Meters</span><span style="color:#D73A49">&gt;</span><span style="color:#24292E">.</span><span style="color:#6F42C1">toKilometers</span><span style="color:#24292E">(): </span><span style="color:#6F42C1">Distance</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Kilometers</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#6F42C1"> Distance</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.</span><span style="color:#D73A49">value</span><span style="color:#D73A49"> /</span><span style="color:#005CC5"> 1000</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> Distance</span><span style="color:#D73A49">&lt;</span><span style="color:#24292E">Kilometers</span><span style="color:#D73A49">&gt;</span><span style="color:#24292E">.</span><span style="color:#6F42C1">toMeters</span><span style="color:#24292E">(): </span><span style="color:#6F42C1">Distance</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Meters</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#6F42C1"> Distance</span><span style="color:#24292E">(</span><span style="color:#005CC5">this</span><span style="color:#24292E">.</span><span style="color:#D73A49">value</span><span style="color:#D73A49"> *</span><span style="color:#005CC5"> 1000</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> distanceInMeters </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> Distance</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Meters</span><span style="color:#24292E">&gt;(</span><span style="color:#005CC5">5000.0</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> distanceInKilometers </span><span style="color:#D73A49">=</span><span style="color:#24292E"> distanceInMeters.</span><span style="color:#6F42C1">toKilometers</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Distance in kilometers: ${distanceInKilometers.</span><span style="color:#D73A49">value</span><span style="color:#032F62">}&quot;</span><span style="color:#24292E">) </span><span style="color:#6A737D">// 5.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> distanceInKilometers2 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> Distance</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Kilometers</span><span style="color:#24292E">&gt;(</span><span style="color:#005CC5">3.0</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> distanceInMeters2 </span><span style="color:#D73A49">=</span><span style="color:#24292E"> distanceInKilometers2.</span><span style="color:#6F42C1">toMeters</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Distance in meters: ${distanceInMeters2.</span><span style="color:#D73A49">value</span><span style="color:#032F62">}&quot;</span><span style="color:#24292E">) </span><span style="color:#6A737D">// 3000.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 에러 발생</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> invalid </span><span style="color:#D73A49">=</span><span style="color:#24292E"> distanceInMeters.</span><span style="color:#6F42C1">toMeters</span><span style="color:#24292E">()</span></span></code></pre>
<p>위 코드를 보면 <code>Distance</code> 클래스는 제네릭을 이용하여 <code>Meters</code> 타입과 <code>Kilometers</code> 타입을 구분하면서도 하나로 추상화하기 위한 방법으로 팬텀 타입을 사용하고 있다. 이를 통해 <code>Distance</code> 클래스는 <code>Meters</code> 타입과 <code>Kilometers</code> 타입을 구분하여 사용할 수 있다. 또한, 제네릭의 공변성으로 인해 두 타입은 서로 다른 타입으로 취급되기 때문에 컴파일러의 보호를 받을 수 있다.</p>
<p>이를 이용하여 별도의 값 없이 객체에 상태를 부여하는 것도 가능하다. 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Draft</span></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Published</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> Document</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">State</span><span style="color:#24292E">&gt;(</span><span style="color:#D73A49">val</span><span style="color:#24292E"> content: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> publish</span><span style="color:#24292E">(draftDocument: </span><span style="color:#6F42C1">Document</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Draft</span><span style="color:#24292E">&gt;): </span><span style="color:#6F42C1">Document</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Published</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#6F42C1">  println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Publishing document: </span><span style="color:#005CC5">$content</span><span style="color:#032F62">&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#6F42C1"> Document</span><span style="color:#24292E">(draftDocument.content)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> edit</span><span style="color:#24292E">(publishedDocument: </span><span style="color:#6F42C1">Document</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Published</span><span style="color:#24292E">&gt;): </span><span style="color:#6F42C1">Document</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Draft</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#6F42C1">  println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Start editing document: </span><span style="color:#005CC5">$content</span><span style="color:#032F62">&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#6F42C1"> Document</span><span style="color:#24292E">(publishedDocument.content)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> draftDocument </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> Document</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Draft</span><span style="color:#24292E">&gt;(</span><span style="color:#032F62">&quot;Hello, world!&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> publishedDocument </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> publish</span><span style="color:#24292E">(draftDocument)</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> editingDocument </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> edit</span><span style="color:#24292E">(publishedDocument)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 에러 발생</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> invalid </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> edit</span><span style="color:#24292E">(editingDocument)</span></span></code></pre>
<p>여기까지 정리하자면 즉, 팬텀 타입을 통해 <strong>하나의 타입에서 파생되는 복수의 하위 타입을 만드는 것이 가능</strong>하다. 앞서 <a href="#%EA%B0%80%EB%8F%85%EC%84%B1%EA%B3%BC-%EB%9F%B0%ED%83%80%EC%9E%84-%EC%95%88%EC%A0%95%EC%84%B1-%EC%B1%99%EA%B8%B0%EA%B8%B0">타입으로 가독성과 런타임 안정성 챙기기</a>를 다룰 때 단순히 <code>String</code>으로 타입을 이용하지 않고 별도로 이름을 붙여서 사용했다. 다만, 비슷한 사례가 생기면 또 비슷한 타입을 만들어야 한다는 문제가 있다. 이를 해결하기 위해 팬텀 타입을 사용할 수 있다. 마지막으로 다음 예제 하나를 더 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">value</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Id</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt;(</span><span style="color:#D73A49">val</span><span style="color:#24292E"> uuid: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">  override</span><span style="color:#D73A49"> fun</span><span style="color:#6F42C1"> toString</span><span style="color:#24292E">(): </span><span style="color:#6F42C1">String</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> uuid</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> User</span><span style="color:#24292E">(</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> id: </span><span style="color:#6F42C1">Id</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">User</span><span style="color:#24292E">&gt;,</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> name: </span><span style="color:#6F42C1">String</span></span>
<span class="line"><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Post</span><span style="color:#24292E">(</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> id: </span><span style="color:#6F42C1">Id</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Post</span><span style="color:#24292E">&gt;,</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> userId: </span><span style="color:#6F42C1">Id</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">User</span><span style="color:#24292E">&gt;,</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> title: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> content: </span><span style="color:#6F42C1">String</span></span>
<span class="line"><span style="color:#24292E">)</span></span></code></pre>
<p>위 코드를 보면 <code>UserId</code> 같은 타입을 만들지 않고 제네릭을 이용하여 <code>Id</code> 클래스를 정의한 것을 볼 수 있다. <code>Id</code> 클래스에서 <code>T</code>는 아무런 의미가 없는 팬텀 타입이다. 이를 통해 <code>Id</code> 클래스는 <code>User</code> 타입을 가리키는 <code>Id&lt;User&gt;</code> 타입과 <code>Post</code> 타입을 가리키는 <code>Id&lt;Post&gt;</code> 타입을 구분할 수 있다. 이를 통해 <code>Id</code> 클래스는 다양한 타입을 가리킬 수 있으며 이를 통해 코드 중복을 줄일 수 있다.</p>
<h2 id="유니온-타입을-이용한-행동-제한"><a href="#유니온-타입을-이용한-행동-제한">유니온 타입을 이용한 행동 제한</a></h2>
<p>유니온 타입(Union Type)을 이용하면 <strong>두 개 이상의 타입을 하나로 묶어서 사용</strong>할 수 있다. 예를 들어 다음 TypeScript 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#D73A49">type</span><span style="color:#6F42C1"> Fruit</span><span style="color:#D73A49"> =</span><span style="color:#032F62"> &quot;Apple&quot;</span><span style="color:#D73A49"> |</span><span style="color:#032F62"> &quot;Banana&quot;</span><span style="color:#D73A49"> |</span><span style="color:#032F62"> &quot;Orange&quot;</span></span></code></pre>
<p>위 코드는 <code>Fruit</code> 타입을 선언하고 이 타입은 <code>Apple</code>, <code>Banana</code>, <code>Orange</code> 세 가지 타입 중 하나를 가질 수 있다는 것을 의미한다. 참고로 TypeScript에 익숙하지 않다면 값으로 보이는 <code>Apple</code>, <code>Banana</code>, <code>Orange</code>이 타입이 될 수 있다는 것이 이해하기 어려울 수 있다. 이는 TypeScript에서 리터럴 타입(Literal Type)이라고 불리는 타입으로 TypeScript에선 하나의 값을 타입으로 사용할 수 있다.</p>
<p>이를 이용하여 행동을 제한하는 것이 가능하다. 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#D73A49">type</span><span style="color:#6F42C1"> State</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> { </span><span style="color:#E36209">type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> &#39;loading&#39;</span><span style="color:#24292E"> } </span><span style="color:#D73A49">|</span><span style="color:#24292E"> </span></span>
<span class="line"><span style="color:#24292E">  { </span><span style="color:#E36209">type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> &#39;success&#39;</span><span style="color:#24292E">, </span><span style="color:#E36209">data</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> string</span><span style="color:#24292E"> } </span><span style="color:#D73A49">|</span><span style="color:#24292E"> </span></span>
<span class="line"><span style="color:#24292E">  { </span><span style="color:#E36209">type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> &#39;error&#39;</span><span style="color:#24292E">, </span><span style="color:#E36209">message</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> string</span><span style="color:#24292E"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">let</span><span style="color:#24292E"> state</span><span style="color:#D73A49">:</span><span style="color:#6F42C1"> State</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> { type: </span><span style="color:#032F62">&#39;loading&#39;</span><span style="color:#24292E"> };</span></span>
<span class="line"><span style="color:#D73A49">try</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  const</span><span style="color:#005CC5"> data</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> getData</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">  state </span><span style="color:#D73A49">=</span><span style="color:#24292E"> { type: </span><span style="color:#032F62">&#39;success&#39;</span><span style="color:#24292E">, data: data };</span></span>
<span class="line"><span style="color:#24292E">} </span><span style="color:#D73A49">catch</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">  state </span><span style="color:#D73A49">=</span><span style="color:#24292E"> { type: </span><span style="color:#032F62">&#39;error&#39;</span><span style="color:#24292E">, message: </span><span style="color:#032F62">&#39;Error!&#39;</span><span style="color:#24292E"> };</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">if</span><span style="color:#24292E"> (state.type </span><span style="color:#D73A49">===</span><span style="color:#032F62"> &#39;success&#39;</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#24292E">  console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(state.data);</span></span>
<span class="line"><span style="color:#24292E">  console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(state.message); </span><span style="color:#6A737D">// 에러 발생</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>위 코드를 보면 <code>State</code> 타입은 세 타입 중 하나를 가질 수 있다. 이를 통해 <code>State</code> 타입은 <code>type</code> 속성에 <code>loading</code>, <code>success</code>, <code>error</code> 세 가지 리터럴 타입 중 하나를 가질 수 있으며 이를 통해 어떤 타입인지 확인 할 수 있다. 이를 통해 접근할 수 있는 속성을 제한하여 개발자의 행동을 통제하는 것이 가능하다. 참고로 엄밀히 따지면 위 코드에서 사용된 유니온 타입은 서로소 유니온 타입(Disjoint Union Type)이라고 불린다.</p>
<p>아쉽게도 유니온 타입을 지원하지 않는 언어가 많다. 다만, 서로소 유니온 타입은 합 타입(Sum Type)을 지원하는 언어라면 구현할 수 있다. 예를 들어, 합 타입을 지원하는 언어인 Kotlin은 다음과 같이 구현할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">sealed</span><span style="color:#D73A49"> interface</span><span style="color:#6F42C1"> State</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> object</span><span style="color:#6F42C1"> Loading</span><span style="color:#24292E">: </span><span style="color:#6F42C1">State</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Success</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt;(</span><span style="color:#D73A49">val</span><span style="color:#D73A49"> data</span><span style="color:#24292E">: </span><span style="color:#6F42C1">T</span><span style="color:#24292E">): </span><span style="color:#6F42C1">State</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span><span style="color:#D73A49">val</span><span style="color:#24292E"> message: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">State</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">var</span><span style="color:#24292E"> state: </span><span style="color:#6F42C1">State</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> State.Loading</span></span>
<span class="line"><span style="color:#D73A49">try</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#D73A49"> data</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> getData</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#24292E">  state </span><span style="color:#D73A49">=</span><span style="color:#24292E"> State.</span><span style="color:#6F42C1">Success</span><span style="color:#24292E">(</span><span style="color:#D73A49">data</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">} </span><span style="color:#D73A49">catch</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">  state </span><span style="color:#D73A49">=</span><span style="color:#24292E"> State.</span><span style="color:#6F42C1">Error</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Error!&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">if</span><span style="color:#24292E"> (state </span><span style="color:#D73A49">is</span><span style="color:#24292E"> State.Success</span><span style="color:#D73A49">&lt;*&gt;</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#6F42C1">  println</span><span style="color:#24292E">(state.</span><span style="color:#D73A49">data</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#6F42C1">  println</span><span style="color:#24292E">(state.message) </span><span style="color:#6A737D">// 에러 발생</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="최소-타입을-이용한-todo-처리"><a href="#최소-타입을-이용한-todo-처리">최소 타입을 이용한 TODO 처리</a></h2>
<p>최소 타입(Bottom Type)<sup><a href="#user-content-fn-2" id="user-content-fnref-2" data-footnote-ref aria-describedby="footnote-label">2</a></sup>은 <strong>모든 타입의 하위 타입이며 아무런 값도 가질 수 없는 타입</strong>이다. 이는 <strong>실행할 수 없는 코드를 표현</strong>하는 데 사용할 수 있다. 예를 들어 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> fail</span><span style="color:#24292E">(message: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Nothing</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  throw</span><span style="color:#6F42C1"> IllegalArgumentException</span><span style="color:#24292E">(message)</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>위 코드에서 구현한 <code>fail</code> 함수는 실행하면 무조건 <code>IllegalArgumentException</code>을 던지는 함수다. 이 함수가 반환하는 <code>Nothing</code> 타입이 바로 최소 타입이다. 이를 통해 <code>fail</code> 함수는 실행할 수 없는 코드를 표현하는 데 사용할 수 있다. 참고로 Kotlin에선 비슷한 역할을 하는 <code>TODO()</code> 함수를 제공한다.</p>
<p>최소 타입을 지원하는 다른 언어 중 하나로 TypeScript가 있다. TypeScript에선 <code>never</code>라는 이름으로 제공한다. 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> TODO</span><span style="color:#24292E">()</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> never</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  throw</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Error</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Not implemented yet&quot;</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> UserService</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">  getUser</span><span style="color:#24292E">(</span><span style="color:#E36209">id</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> number</span><span style="color:#24292E">)</span><span style="color:#D73A49">:</span><span style="color:#6F42C1"> User</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    return</span><span style="color:#6F42C1"> TODO</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>앞서 Kotlin 예시처럼 <code>TODO</code> 함수를 통해 아직 구현되지 않은 코드를 표현할 수 있다. 이를 통해 개발자는 일단 필요한 함수를 선언하고 이후 구현할 수 있게 된다. 그런 일은 없어야겠지만 만약 구현을 하지 않은 채 배포했다면 바로 에러가 발생하므로 금방 알 수 있다.</p>
<h2 id="타입을-이용한-유한-상태-머신-구현"><a href="#타입을-이용한-유한-상태-머신-구현">타입을 이용한 유한 상태 머신 구현</a></h2>
<p>유한 상태 머신(Finite State Machine)은 상태(State)와 이벤트(Event)를 통해 상태를 전이(Transition)하는 것을 말한다. 타입을 이용하면 <strong>컴파일 시간에 상태 전이를 검증</strong>할 수 있다. 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// 상태와 이벤트를 나타내는 인터페이스</span></span>
<span class="line"><span style="color:#D73A49">interface</span><span style="color:#6F42C1"> State</span></span>
<span class="line"><span style="color:#D73A49">interface</span><span style="color:#6F42C1"> Event</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">S</span><span style="color:#24292E">: </span><span style="color:#6F42C1">State</span><span style="color:#24292E">, </span><span style="color:#6F42C1">T</span><span style="color:#24292E">: </span><span style="color:#6F42C1">State</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#6F42C1"> perform</span><span style="color:#24292E">(state: </span><span style="color:#6F42C1">S</span><span style="color:#24292E">): </span><span style="color:#6F42C1">T</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 팬텀 타입을 이용한 상태 머신 클래스</span></span>
<span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> StateMachine</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">S</span><span style="color:#24292E">: </span><span style="color:#6F42C1">State</span><span style="color:#24292E">&gt;(</span><span style="color:#D73A49">val</span><span style="color:#24292E"> state: </span><span style="color:#6F42C1">S</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#24292E"> &lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E"> : </span><span style="color:#6F42C1">State</span><span style="color:#24292E">&gt; </span><span style="color:#6F42C1">transition</span><span style="color:#24292E">(event: </span><span style="color:#6F42C1">Event</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">S</span><span style="color:#24292E">, </span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt;): </span><span style="color:#6F42C1">StateMachine</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">    return</span><span style="color:#6F42C1"> StateMachine</span><span style="color:#24292E">(event.</span><span style="color:#6F42C1">perform</span><span style="color:#24292E">(state))</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">sealed</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> SimpleState</span><span style="color:#24292E">: </span><span style="color:#6F42C1">State</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> object</span><span style="color:#6F42C1"> Idle</span><span style="color:#24292E">: </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> object</span><span style="color:#6F42C1"> Running</span><span style="color:#24292E">: </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> object</span><span style="color:#6F42C1"> Finished</span><span style="color:#24292E">: </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">()</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">sealed</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> SimpleEvent</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Event</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">, </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">  object</span><span style="color:#6F42C1"> Start</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Event</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Idle</span><span style="color:#24292E">, </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Running</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">    override</span><span style="color:#D73A49"> fun</span><span style="color:#6F42C1"> perform</span><span style="color:#24292E">(state: </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.Idle): </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Running</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">      println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Starting...&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">      return</span><span style="color:#24292E"> SimpleState.Running</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">  object</span><span style="color:#6F42C1"> Stop</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Event</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Running</span><span style="color:#24292E">, </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Finished</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">    override</span><span style="color:#D73A49"> fun</span><span style="color:#6F42C1"> perform</span><span style="color:#24292E">(state: </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.Running): </span><span style="color:#6F42C1">SimpleState</span><span style="color:#24292E">.</span><span style="color:#6F42C1">Finished</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">      println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Stopping...&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#D73A49">      return</span><span style="color:#24292E"> SimpleState.Finished</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 초기 상태</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> idleMachine </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> StateMachine</span><span style="color:#24292E">(SimpleState.Idle)</span></span>
<span class="line"><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Initial state: ${idleMachine.state}&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Running 상태로 전이</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> runningMachine </span><span style="color:#D73A49">=</span><span style="color:#24292E"> idleMachine.</span><span style="color:#6F42C1">transition</span><span style="color:#24292E">(SimpleEvent.Start)</span></span>
<span class="line"><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;After starting: ${runningMachine.state}&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Finished 상태로 전이</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> finishedMachine </span><span style="color:#D73A49">=</span><span style="color:#24292E"> runningMachine.</span><span style="color:#6F42C1">transition</span><span style="color:#24292E">(SimpleEvent.Stop)</span></span>
<span class="line"><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;After stopping: ${finishedMachine.state}&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 에러 발생</span></span>
<span class="line"><span style="color:#D73A49">val</span><span style="color:#24292E"> invalidTransition </span><span style="color:#D73A49">=</span><span style="color:#24292E"> idleMachine.</span><span style="color:#6F42C1">transition</span><span style="color:#24292E">(SimpleEvent.Stop)</span></span></code></pre>
<p>앞서 언급한 합 타입과 팬텀 타입을 이용하여 상태 머신을 구현하면 컴파일 시간에 상태 전이를 검증할 수 있다. 이를 통해 상태 머신을 구현할 때 런타임에 발생할 수 있는 오류를 컴파일 시간에 미리 방지할 수 있다.</p>
<h2 id="의존-타입으로-검증하기"><a href="#의존-타입으로-검증하기">의존 타입으로 검증하기</a></h2>
<p>의존 타입(Dependent Type)은 대부분의 언어에선 보기 힘든 개념이다. 필자는 예전에 <a href="https://www.idris-lang.org/" rel="noopener noreferrer" target="_blank">Idris</a>라는 언어를 통해 이 개념을 처음 접했고 이 글을 쓰며 <a href="https://en.wikipedia.org/wiki/Dependent_type#Comparison_of_languages_with_dependent_types" rel="noopener noreferrer" target="_blank">지원하는 언어</a>를 찾아봤지만 대부분은 처음 들어보는 언어였다. 따라서 굳이 알아야하는 개념은 아니지만 타입 시스템을 고도로 활용하면 이런 개념까지도 가능하다라는 것을 알리기 위해 간단하게 소개해볼 것이다.</p>
<p>의존 타입은 <strong>타입이 다른 타입에 의존하는 타입</strong>을 말한다. 예를 들어 다음 코드를 살펴보자.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>data Vect : Nat -&gt; Type -&gt; Type where</span></span>
<span class="line"><span>  Nil : Vect Z a</span></span>
<span class="line"><span>  (::) : a -&gt; Vect n a -&gt; Vect (S n) a</span></span></code></pre>
<p>위 코드는 Idris로 작성된 코드다. 낯선 코드지만 간단히 설명하자면 Idris는 일급 타입(First Class Type)이라는 기능을 지원하기에 인자나 반환 값으로 타입을 지정하는 것이 가능하다. 코드를 살펴보면 <code>Type</code>이라는 것을 인자로 받고 반환하는데, 이는 타입을 받아 새로운 타입으로 반환할 수 있다는 것을 의미한다. 이 기능을 통해 Idris에서 유한 집합 타입을 정의하는 것이 가능하다.</p>
<p>하나씩 살펴보면 <code>Nat</code> 타입은 자연수를 의미하고 <code>Nat -&gt; Type -&gt; Type</code>은 자연수와 타입을 받아 새로운 타입을 반환하는 함수를 의미한다. 참고로 조금 혼란스러울 수 있지만 커링되어 <code>Vect(5)(Nat)</code>처럼 받는다고 생각하면 된다. 이어서 <code>where</code>는 함수 내부에서 지역적으로 함수나 값을 정의하는 데 사용된다. 따라서 <code>Nil</code>은 <code>Nat</code>가 Z(0을 의미)인 경우를 나타내고 <code>::</code>는 연산자처럼 사용되어 원소를 추가하는 데 사용된다. <code>::</code>는 재귀적으로 <code>Vect</code> 타입을 만들어내기 때문에 마지막에는 반드시 <code>Nil</code>을 넣어줘야 한다. 조금 차이가 있긴 하지만 이에 대한 동작 방식이 궁금하다면 필자가 예전에 작성한 아티클인 <a href="https://kciter.so/posts/functional-data-structure/" rel="noopener noreferrer" target="_blank">함수형 자료구조</a>를 참고해보자.</p>
<p>아무튼 다음과 같이 재귀적으로 고정 길이가 10이며 자연수를 받는 <code>Vect</code> 타입을 만들 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>vect : Vect 10 Nat</span></span></code></pre>
<p>만약 합계를 구해주는 프로그램을 만든다면 다음과 같이 작성할 수 있다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>module Main</span></span>
<span class="line"><span></span></span>
<span class="line"><span>data Vect : Nat -&gt; Type -&gt; Type where</span></span>
<span class="line"><span>  Nil  : Vect Z a</span></span>
<span class="line"><span>  (::) : a -&gt; Vect k a -&gt; Vect (S k) a</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vect : Vect 5 Nat</span></span>
<span class="line"><span>vect = 1 :: 2 :: 3 :: 4 :: 5 :: Nil</span></span>
<span class="line"><span>-- 만약 타입에 정의한 길이와 다르면 컴파일 에러가 발생한다</span></span>
<span class="line"><span>-- vect = 1 :: 2 :: 3 :: 4 :: Nil</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- 패턴 매칭으로 구현된 함수</span></span>
<span class="line"><span>sum_vect : Vect n Nat -&gt; Nat</span></span>
<span class="line"><span>sum_vect Nil = 0</span></span>
<span class="line"><span>sum_vect (x :: xs) = x + sum_vect xs</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- 메인 함수에서 15 출력</span></span>
<span class="line"><span>main : IO ()</span></span>
<span class="line"><span>main = putStrLn $ show $ sum_vect vect</span></span></code></pre>
<p>앞서 <a href="#%EA%B0%80%EB%8F%85%EC%84%B1%EA%B3%BC-%EB%9F%B0%ED%83%80%EC%9E%84-%EC%95%88%EC%A0%95%EC%84%B1-%EC%B1%99%EA%B8%B0%EA%B8%B0">가독성과 런타임 안정성 챙기기</a>에선 별도 타입을 정의하여 런타임에 검증하는 방법을 소개했다. 만약 타입 시스템이 이정도로 강력하다면 보통 런타임에 검증할 것을 컴파일 시간에 검증하는 것까지도 가능하다. 너무 과한 기능인 것은 사실이지만 타입 시스템이 어디까지 강력해질 수 있는지 보여주는 사례라고 볼 수 있다.</p>
<h1 id="타입-주도-개발"><a href="#타입-주도-개발">타입 주도 개발</a></h1>
<p>그럼 이번에는 앞서 배운 것을 활용하여 타입 시스템을 풍부하게 사용할 수 있도록 개발하는 <strong>타입 주도 개발</strong><sup>Type-Driven Development</sup>에 대해 알아보자. 타입 주도 개발은 다른 무언가를 먼저 정의하고 시작하는 XXX 주도 개발과 마찬가지로 <strong>타입을 먼저 정의하고 이를 통해 코드를 작성</strong>하는 방법론이다.</p>
<p>참고로 타입 주도 개발은 함수 구현처럼 아주 작은 부분에 적용할 수 있는 방법론이다. 따라서 다른 테스트 주도 개발과 같은 다른 개발 방법론과 함께 사용할 수 있다.</p>
<h2 id="타입을-먼저-정의하기"><a href="#타입을-먼저-정의하기">타입을 먼저 정의하기</a></h2>
<p>프로그램은 일련의 절차를 통해 원하는 결과를 만들어 낸다. 이때 각 절차는 입력 데이터를 받아 특정 로직을 수행하고 결과를 반환한다. 다양한 패러다임으로 프로그램을 작성할 수 있지만 절차를 통해 원하는 결과를 만들어 낸다는 것 하나는 변하지 않는다. 따라서 타입 주도 개발은 원한다면 어디에도 적용할 수 있으며 각 절차에 대한 결과를 타입으로 정의하는 것으로 시작한다.<sup><a href="#user-content-fn-3" id="user-content-fnref-3" data-footnote-ref aria-describedby="footnote-label">3</a></sup></p>
<p>타입을 먼저 정의한다는 것은 우리가 원하는 로직을 구체적으로 작성하기 전에 타입으로 추상화한다는 것과 같다. 연습을 위해 프로그래머스의 <a href="https://school.programmers.co.kr/learn/courses/30/lessons/120902" rel="noopener noreferrer" target="_blank">문자열 계산하기</a> 문제를 풀어보자. 문제의 요구사항을 요약하면 다음과 같다.</p>
<p>이 각각의 과정에서 입력과 출력을 타입으로 나타낼 수 있다. 이말은 즉, <strong>타입을 통해 로직을 추상화 하는 것이 가능하다</strong>라는 뜻이다. 이러한 사고가 타입 주도 개발의 핵심이라 볼 수 있다. 연습을 위해 프로그래머스의 <a href="https://school.programmers.co.kr/learn/courses/30/lessons/120902" rel="noopener noreferrer" target="_blank">문자열 계산하기</a> 문제를 풀어보자. 문제의 요구사항을 요약하면 다음과 같다.</p>
<ul>
<li>문자열로 이루어진 수식을 입력으로 제공한다.</li>
<li>연산자는 <code>+</code>와 <code>-</code>만 존재한다.</li>
<li>피연산자는 자연수만 존재한다.</li>
<li>잘못된 수식은 주어지지 않는다.</li>
<li>숫자와 연산자는 공백으로 구분한다.</li>
</ul>
<p>먼저 <code>String</code> 타입을 받아 <code>Int</code>로 반환하는 함수가 필요하다는 것을 떠올릴 수 있다. 이는 <code>(String) -&gt; Int</code>와 같이 표현이 가능하다. 요구사항을 기반으로 로직을 더 구체화 해보면 다음과 같은 로직이 필요하다는 것을 알 수 있다.</p>
<ul>
<li>문자열을 숫자와 연산자로 분리한다.
<ul>
<li>문자를 숫자로 변환한다.</li>
<li>문자를 연산자로 변환한다.</li>
</ul>
</li>
<li>문자가 숫자인지 연산자인지 판단한다.</li>
<li>문자열을 계산한다.</li>
</ul>
<p>먼저 각 키워드를 타입으로 추상화하면 다음과 같다.</p>
<ul>
<li>문자열 → <code>String</code></li>
<li>문자 → <code>String</code> or <code>Char</code></li>
<li>숫자 → <code>Int</code></li>
<li>연산자 → <code>String</code></li>
<li>부호 → <code>String</code></li>
<li>판단 결과 -&gt; <code>Boolean</code></li>
<li>계산 결과 -&gt; <code>Int</code></li>
</ul>
<h2 id="도메인-반영하기"><a href="#도메인-반영하기">도메인 반영하기</a></h2>
<p>문제가 간단하여 도메인이라 부르기에 빈약하지만 엄밀히 따져 연산자와 부호는 같은 <code>String</code>이지만 의미가 다르다. 따라서 이를 구분하기 위해 다른 타입으로 정의하는 것이 좋다. 다시 한 번 각 키워드를 타입으로 추상화하면 다음과 같다.</p>
<ul>
<li>문자열 → <code>String</code></li>
<li>문자 → <code>Token</code></li>
<li>숫자 → <code>Number</code></li>
<li>연산자 → <code>Operator</code></li>
<li>부호 → <code>Sign</code></li>
</ul>
<p>요구사항을 다시 확인하면 문자(Token)는 숫자(Number) 혹은 연산자(Operator) 둘 중 하나이므로 문자의 하위 타입으로 볼 수 있다. 그리고 숫자는 <code>Int</code> 타입으로 표현되고 연산자는 <code>Sign</code> 타입으로 표현된다. 이를 코드로 나타내면 다음과 같다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// 부호</span></span>
<span class="line"><span style="color:#D73A49">enum</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Sign</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">  PLUS, MINUS</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 토큰</span></span>
<span class="line"><span style="color:#D73A49">sealed</span><span style="color:#D73A49"> interface</span><span style="color:#6F42C1"> Token</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">T</span><span style="color:#24292E">&gt; {</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">T</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // 숫자 토큰</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Number</span><span style="color:#24292E">(</span><span style="color:#D73A49">override</span><span style="color:#D73A49"> val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Int</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Token</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Int</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#6A737D">  // 연산자 토큰</span></span>
<span class="line"><span style="color:#D73A49">  data</span><span style="color:#D73A49"> class</span><span style="color:#6F42C1"> Operator</span><span style="color:#24292E">(</span><span style="color:#D73A49">override</span><span style="color:#D73A49"> val</span><span style="color:#D73A49"> value</span><span style="color:#24292E">: </span><span style="color:#6F42C1">Sign</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Token</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Sign</span><span style="color:#24292E">&gt;</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h2 id="함수를-타입으로-추상화하기"><a href="#함수를-타입으로-추상화하기">함수를 타입으로 추상화하기</a></h2>
<p>이번에는 각 로직을 타입으로 추상화해보자.</p>
<ul>
<li>문자열을 숫자와 연산자로 분리한다. <br/>
  → <code>(String) -&gt; List&lt;Token&gt;</code>
<ul>
<li>문자를 숫자로 변환한다. <br/>
  → <code>(String) -&gt; Number</code></li>
<li>문자를 연산자로 변환한다. <br/>
  → <code>(String) -&gt; Operator</code></li>
</ul>
</li>
<li>문자가 숫자인지 연산자인지 판단한다. <br/>
  → <code>(String) -&gt; Boolean</code></li>
<li>문자열을 계산한다 <br/>
  → <code>(String) -&gt; Int</code></li>
</ul>
<p>분해한 로직을 합쳐 로직 파이프라인을 만들면 다음과 같다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#6A737D">// 문자가 숫자인지 연산자인지 판단한다.</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> isNumber</span><span style="color:#24292E">(token: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Boolean</span><span style="color:#D73A49"> =</span></span>
<span class="line"><span style="color:#24292E">  token.</span><span style="color:#6F42C1">toIntOrNull</span><span style="color:#24292E">() </span><span style="color:#D73A49">!=</span><span style="color:#005CC5"> null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 문자를 숫자로 변환한다.</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> toNumber</span><span style="color:#24292E">(token: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Int</span><span style="color:#D73A49"> =</span></span>
<span class="line"><span style="color:#24292E">  token.</span><span style="color:#6F42C1">toInt</span><span style="color:#24292E">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 문자를 연산자로 변환한다.</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> toSign</span><span style="color:#24292E">(token: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Sign</span><span style="color:#D73A49"> =</span></span>
<span class="line"><span style="color:#D73A49">  when</span><span style="color:#24292E"> (token) {</span></span>
<span class="line"><span style="color:#032F62">    &quot;+&quot;</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Sign.PLUS</span></span>
<span class="line"><span style="color:#032F62">    &quot;-&quot;</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Sign.MINUS</span></span>
<span class="line"><span style="color:#D73A49">    else</span><span style="color:#D73A49"> -&gt;</span><span style="color:#D73A49"> throw</span><span style="color:#6F42C1"> IllegalArgumentException</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;Unknown operator: ${token}&quot;</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 문자열을 숫자와 연산자 문자로 분리한다.</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> tokenize</span><span style="color:#24292E">(input: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">List</span><span style="color:#24292E">&lt;</span><span style="color:#6F42C1">Token</span><span style="color:#24292E">&lt;*&gt;&gt; </span><span style="color:#D73A49">=</span></span>
<span class="line"><span style="color:#24292E">  input.</span><span style="color:#6F42C1">split</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot; &quot;</span><span style="color:#24292E">).</span><span style="color:#6F42C1">map</span><span style="color:#24292E"> { token </span><span style="color:#D73A49">-&gt;</span></span>
<span class="line"><span style="color:#D73A49">    when</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">      isNumber</span><span style="color:#24292E">(token) </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> Token.</span><span style="color:#6F42C1">Number</span><span style="color:#24292E">(</span><span style="color:#6F42C1">toNumber</span><span style="color:#24292E">(token))</span></span>
<span class="line"><span style="color:#D73A49">      else</span><span style="color:#D73A49"> -&gt;</span><span style="color:#24292E"> Token.</span><span style="color:#6F42C1">Operator</span><span style="color:#24292E">(</span><span style="color:#6F42C1">toSign</span><span style="color:#24292E">(token))</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 문자열을 계산한다.</span></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> calculate</span><span style="color:#24292E">(input: </span><span style="color:#6F42C1">String</span><span style="color:#24292E">): </span><span style="color:#6F42C1">Int</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> tokens </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> tokenize</span><span style="color:#24292E">(input)</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> result </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> 0</span></span>
<span class="line"><span style="color:#D73A49">  var</span><span style="color:#24292E"> sign </span><span style="color:#D73A49">=</span><span style="color:#24292E"> Sign.PLUS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">  tokens.</span><span style="color:#6F42C1">forEach</span><span style="color:#24292E"> { token </span><span style="color:#D73A49">-&gt;</span></span>
<span class="line"><span style="color:#D73A49">    when</span><span style="color:#24292E"> (token) {</span></span>
<span class="line"><span style="color:#D73A49">      is</span><span style="color:#24292E"> Token.Number </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">        when</span><span style="color:#24292E"> (sign) {</span></span>
<span class="line"><span style="color:#24292E">          Sign.PLUS </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            result </span><span style="color:#D73A49">+=</span><span style="color:#24292E"> token.</span><span style="color:#D73A49">value</span></span>
<span class="line"><span style="color:#24292E">          }</span></span>
<span class="line"><span style="color:#24292E">          Sign.MINUS </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            result </span><span style="color:#D73A49">-=</span><span style="color:#24292E"> token.</span><span style="color:#D73A49">value</span></span>
<span class="line"><span style="color:#24292E">          }</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">      }</span></span>
<span class="line"><span style="color:#D73A49">      is</span><span style="color:#24292E"> Token.Operator </span><span style="color:#D73A49">-&gt;</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        sign </span><span style="color:#D73A49">=</span><span style="color:#24292E"> token.</span><span style="color:#D73A49">value</span></span>
<span class="line"><span style="color:#24292E">      }</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#24292E"> result</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">fun</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> input </span><span style="color:#D73A49">=</span><span style="color:#032F62"> &quot;9 - 4 - 1 + 2 + 6&quot;</span></span>
<span class="line"><span style="color:#D73A49">  val</span><span style="color:#24292E"> result </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> calculate</span><span style="color:#24292E">(input)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  println</span><span style="color:#24292E">(result) </span><span style="color:#6A737D">// 12</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<p>참고로 함수 정의는 요구사항에 대한 해석이나 패러다임에 따라 다를 수 있다. 따라서 같은 로직을 작성하더라도 위 코드와 다른 로직이 나올 수 있으므로 틀렸다고 생각하지 말자.</p>
<h2 id="테스트-코드와-함께하기"><a href="#테스트-코드와-함께하기">테스트 코드와 함께하기</a></h2>
<p>타입을 먼저 정의한다는 점에서 테스트 주도 개발과도 잘 어울린다. 테스트 주도 개발은 이미 유명한 방법론이지만 설명하자면 <strong>만들어야 할 기능의 테스트를 먼저 작성하고 이를 통과하는 코드를 작성하는 방법론</strong>이다.</p>
<p>입력과 출력 결과를 미리 정의하고 코드를 작성한다는 점에서 타입 주도 개발과 테스트 주도 개발은 유사하다. 그만큼 궁합도 좋은데 타입 주도 개발이 타입 시스템을 이용하여 컴파일 시간에 미리 안정성을 체크할 수 있다면 테스트 주도 개발은 타입만으로는 잡아낼 수 없는 오류나 예외 상황을 테스트 코드를 통해 잡아낼 수 있다.</p>
<p>테스트 코드를 작성하는 시점은 입력과 출력을 정의하는 <a href="#%ED%95%A8%EC%88%98%EB%A5%BC-%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C-%EC%B6%94%EC%83%81%ED%99%94%ED%95%98%EA%B8%B0">함수를 타입으로 추상화하기</a>까지 진행한 후가 좋다.</p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="kotlin"><code><span class="line"><span style="color:#D73A49">class</span><span style="color:#6F42C1"> CalculatorTest</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">  @Test</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#6F42C1"> testIsNumber</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6F42C1">    assertTrue</span><span style="color:#24292E">(</span><span style="color:#6F42C1">isNumber</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;123&quot;</span><span style="color:#24292E">))</span></span>
<span class="line"><span style="color:#6F42C1">    assertFalse</span><span style="color:#24292E">(</span><span style="color:#6F42C1">isNumber</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;+&quot;</span><span style="color:#24292E">))</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  @Test</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#6F42C1"> testToNumber</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6F42C1">    assertEquals</span><span style="color:#24292E">(</span><span style="color:#005CC5">123</span><span style="color:#24292E">, </span><span style="color:#6F42C1">toNumber</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;123&quot;</span><span style="color:#24292E">))</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  @Test</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#6F42C1"> testToSign</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#6F42C1">    assertEquals</span><span style="color:#24292E">(Sign.PLUS, </span><span style="color:#6F42C1">toSign</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;+&quot;</span><span style="color:#24292E">))</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  @Test</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#6F42C1"> testTokenize</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">    val</span><span style="color:#24292E"> input </span><span style="color:#D73A49">=</span><span style="color:#032F62"> &quot;9 - 4&quot;</span></span>
<span class="line"><span style="color:#D73A49">    val</span><span style="color:#24292E"> expected </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> listOf</span><span style="color:#24292E">(</span></span>
<span class="line"><span style="color:#24292E">      Token.</span><span style="color:#6F42C1">Number</span><span style="color:#24292E">(</span><span style="color:#005CC5">9</span><span style="color:#24292E">),</span></span>
<span class="line"><span style="color:#24292E">      Token.</span><span style="color:#6F42C1">Operator</span><span style="color:#24292E">(Sign.MINUS),</span></span>
<span class="line"><span style="color:#24292E">      Token.</span><span style="color:#6F42C1">Number</span><span style="color:#24292E">(</span><span style="color:#005CC5">4</span><span style="color:#24292E">)</span></span>
<span class="line"><span style="color:#24292E">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">    assertEquals</span><span style="color:#24292E">(expected, </span><span style="color:#6F42C1">tokenize</span><span style="color:#24292E">(input))</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">  @Test</span></span>
<span class="line"><span style="color:#D73A49">  fun</span><span style="color:#6F42C1"> testCalculate</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">    val</span><span style="color:#24292E"> input </span><span style="color:#D73A49">=</span><span style="color:#032F62"> &quot;9 - 4 - 1 + 2 + 6&quot;</span></span>
<span class="line"><span style="color:#6F42C1">    assertEquals</span><span style="color:#24292E">(</span><span style="color:#005CC5">12</span><span style="color:#24292E">, </span><span style="color:#6F42C1">calculate</span><span style="color:#24292E">(input))</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre>
<h1 id="마치며"><a href="#마치며">마치며</a></h1>
<p>타입 시스템은 개발자에게 있어 아낌없이 주는 든든한 친구다. 문제를 미연에 방지할 수 있게 해주며 가독성까지 챙길 수 있게 해준다. 타입이라는 개념과 친해질 수록 타입 시스템을 풍부하게 사용할 수 있게 되고, 이는 코드의 안정성과 가독성을 높여준다. 이 글에서 소개하는 타입 주도 개발은 타입과 친해지기 좋은 연습 방법이 될 수 있다.</p>
<p>다만 일일히 타입의 정의하여 타입이 너무 많아지거나 타입의 정의가 복잡해지면 오히려 코드를 작성하기 힘들어지거나 가독성을 떨어뜨릴 수 있다. 따라서 항상 적절한 상태를 유지하는 것이 중요하다.</p>
<p>그리고 설계자의 입장에 타입 시스템을 활용한다는 것은 다른 개발자를 위한 코드 규칙을 만드는 것과 같다. 설계자는 이를 적절하게 이용하여 안전하면서 편리한 코드를 작성할 수 있게 간접적으로 코드 규칙을 만들 수 있다. 이점을 고려하여 꼭 설계자가 아니더라도 다른 개발자가 안전한 코드를 작성할 수 있도록 타입을 이용한 규칙을 만들어보자.</p>
<section data-footnotes class="footnotes"><h2 class="sr-only" id="footnote-label"><a href="#footnote-label">Footnotes</a></h2>
<ol>
<li id="user-content-fn-1">
<p>참고로 외래어 표기법으로는 지네릭이라 표기하지만 온라인 한글 문서 대부분 제네릭이라 표기하므로 이 글에서도 제네릭이라 표기한다. <a href="#user-content-fnref-1" data-footnote-backref aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-2">
<p>최소 타입이라는 번역은 ‘타입으로 견고하게 다형성으로 유연하게’라는 책에서 사용한 번역이다. <a href="#user-content-fnref-2" data-footnote-backref aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-3">
<p>다만 함수형 패러다임과 궁합이 좋다는 것은 부정할 수 없다. <a href="#user-content-fnref-3" data-footnote-backref aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>  </div> <div> <div class="mt-1 w-full"> <div class="mr-1 mb-1 inline-flex items-center rounded-[50px] border border-[#dfe3e8] px-2 text-[10px] text-[#888]" style="height: 20px;"> type-system </div><div class="mr-1 mb-1 inline-flex items-center rounded-[50px] border border-[#dfe3e8] px-2 text-[10px] text-[#888]" style="height: 20px;"> functional </div><div class="mr-1 mb-1 inline-flex items-center rounded-[50px] border border-[#dfe3e8] px-2 text-[10px] text-[#888]" style="height: 20px;"> type-driven-development </div><div class="mr-1 mb-1 inline-flex items-center rounded-[50px] border border-[#dfe3e8] px-2 text-[10px] text-[#888]" style="height: 20px;"> methodology </div> </div> <div class="flex items-center py-6" data-astro-cid-k7qsseos> <div class="shrink-0 basis-[80px]" data-astro-cid-k7qsseos> <img class="h-[80px] w-[80px] object-cover" style="border-radius: 50%;" src="/images/about/avatar.jpg" data-astro-cid-k7qsseos> </div> <div class="ml-8 flex-1 text-base" data-astro-cid-k7qsseos> <div data-astro-cid-k7qsseos>
Written by <a href="/about/" class="name-gradient font-bold no-underline" data-astro-cid-k7qsseos>
@kciter
</a> </div> <div class="text-sm font-light leading-snug" data-astro-cid-k7qsseos>가치있는 지식이 되기를 바랍니다</div> <div class="-ml-1 [&_a]:text-sm [&_a]:text-[#888]" data-astro-cid-k7qsseos> <a href="https://github.com/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="GitHub" style="--hover-color: #343434; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.38.6.12.83-.26.83-.57v-2.2c-3.34.73-4.04-1.44-4.04-1.44-.55-1.38-1.33-1.75-1.33-1.75-1.09-.74.08-.73.08-.73 1.2.09 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49 1 .1-.78.42-1.3.76-1.6-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6.02 0c2.28-1.55 3.28-1.23 3.28-1.23.66 1.66.25 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .31.22.7.83.57C20.57 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z"/></svg></a><a href="https://www.facebook.com/sunhyoup.lee" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="Facebook" style="--hover-color: #3d5b99; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M24 12.07C24 5.41 18.63 0 12 0S0 5.41 0 12.07c0 6.02 4.39 11.02 10.13 11.93v-8.44H7.08v-3.49h3.04V9.41c0-3.02 1.79-4.68 4.53-4.68 1.31 0 2.68.24 2.68.24v2.97h-1.51c-1.49 0-1.95.93-1.95 1.88v2.26h3.33l-.53 3.49h-2.8v8.44C19.61 23.09 24 18.09 24 12.07z"/></svg></a><a href="https://www.linkedin.com/in/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="LinkedIn" style="--hover-color: #0073a4; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M20.45 20.45h-3.55v-5.57c0-1.33-.02-3.04-1.85-3.04-1.85 0-2.14 1.45-2.14 2.94v5.67H9.36V9h3.41v1.56h.05c.48-.9 1.64-1.85 3.37-1.85 3.6 0 4.27 2.37 4.27 5.46v6.28zM5.34 7.43a2.06 2.06 0 1 1 0-4.12 2.06 2.06 0 0 1 0 4.12zM7.12 20.45H3.56V9h3.56v11.45zM22.22 0H1.77C.79 0 0 .77 0 1.72v20.56C0 23.23.79 24 1.77 24h20.45C23.2 24 24 23.23 24 22.28V1.72C24 .77 23.2 0 22.22 0z"/></svg></a><a href="https://twitter.com/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="X (Twitter)" style="--hover-color: #343434; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href="/feed.xml" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="RSS Feed" style="--hover-color: #ff6600; transition: color .5s;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M6.18 15.64a2.18 2.18 0 1 1 0 4.36 2.18 2.18 0 0 1 0-4.36zM4 4.44v3.57A12.01 12.01 0 0 1 15.99 20h3.57A15.57 15.57 0 0 0 4 4.44zM4 10.1v3.57c3.5 0 6.33 2.84 6.33 6.33h3.57c0-5.47-4.43-9.9-9.9-9.9z"/></svg></a> </div> </div> </div>   <div id="comments"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var a=(s,i,o)=>{let r=async()=>{await(await s())()},t=typeof i.value=="object"?i.value:void 0,c={rootMargin:t==null?void 0:t.rootMargin},n=new IntersectionObserver(e=>{for(let l of e)if(l.isIntersecting){n.disconnect(),r();break}},c);for(let e of o.children)n.observe(e)};(self.Astro||(self.Astro={})).visible=a;window.dispatchEvent(new Event("astro:visible"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1MhqMT" prefix="r11" component-url="/_astro/Giscus.BCCeZi7E.js" component-export="default" renderer-url="/_astro/client.C9fCgUO1.js" props="{&quot;repo&quot;:[0,&quot;kciter/kciter.github.io&quot;],&quot;theme&quot;:[0,&quot;light&quot;]}" ssr client="visible" opts="{&quot;name&quot;:&quot;Giscus&quot;,&quot;value&quot;:true}" await-children><div></div><!--astro:end--></astro-island> </div> </div> <div class="pt-8 pb-8" data-astro-cid-llggujpl> <div class="grid grid-cols-3 gap-5 max-[30rem]:grid-cols-1" data-astro-cid-llggujpl> <a href="/posts/new-kind-of-hallucination/" class="related-post block scale-100 no-underline transition-all duration-[333ms] ease-[ease]" style="text-decoration: none;" data-astro-cid-llggujpl> <img src="/images/2025-04-09-new-kind-of-hallucination/thumbnail.png" alt="새로운 종류의 AI 환각" loading="lazy" class="block w-full object-cover shadow-[0_0_10px_2px_rgba(0,0,0,0.05)]" style="aspect-ratio: 16/9;" data-astro-cid-llggujpl> <div class="mt-3 text-xl leading-6 font-thin" data-astro-cid-llggujpl>새로운 종류의 AI 환각</div> <small data-astro-cid-llggujpl>2025-04-09</small> </a><a href="/posts/modeling-series-measure/" class="related-post block scale-100 no-underline transition-all duration-[333ms] ease-[ease]" style="text-decoration: none;" data-astro-cid-llggujpl> <img src="/images/2025-05-02-modeling-series-measure/thumbnail.png" alt="모델링 시리즈: 측도" loading="lazy" class="block w-full object-cover shadow-[0_0_10px_2px_rgba(0,0,0,0.05)]" style="aspect-ratio: 16/9;" data-astro-cid-llggujpl> <div class="mt-3 text-xl leading-6 font-thin" data-astro-cid-llggujpl>모델링 시리즈: 측도</div> <small data-astro-cid-llggujpl>2025-05-02</small> </a><a href="/posts/spring-multi-module-architecture/" class="related-post block scale-100 no-underline transition-all duration-[333ms] ease-[ease]" style="text-decoration: none;" data-astro-cid-llggujpl> <img src="/images/2023-05-03-spring-multi-module-architecture/thumbnail.png" alt="IoC와 DI를 이용한 Spring 멀티 모듈 아키텍처" loading="lazy" class="block w-full object-cover shadow-[0_0_10px_2px_rgba(0,0,0,0.05)]" style="aspect-ratio: 16/9;" data-astro-cid-llggujpl> <div class="mt-3 text-xl leading-6 font-thin" data-astro-cid-llggujpl>IoC와 DI를 이용한 Spring 멀티 모듈 아키텍처</div> <small data-astro-cid-llggujpl>2023-05-03</small> </a><a href="/posts/first-post/" class="related-post block scale-100 no-underline transition-all duration-[333ms] ease-[ease]" style="text-decoration: none;" data-astro-cid-llggujpl> <img src="/images/2021-02-23-first-post/mountains.jpg" alt="첫 포스트를 작성하며" loading="lazy" class="block w-full object-cover shadow-[0_0_10px_2px_rgba(0,0,0,0.05)]" style="aspect-ratio: 16/9;" data-astro-cid-llggujpl> <div class="mt-3 text-xl leading-6 font-thin" data-astro-cid-llggujpl>첫 포스트를 작성하며</div> <small data-astro-cid-llggujpl>2021-02-23</small> </a><a href="/posts/modeling-series-temporal/" class="related-post block scale-100 no-underline transition-all duration-[333ms] ease-[ease]" style="text-decoration: none;" data-astro-cid-llggujpl> <img src="/images/2025-05-06-modeling-series-temporal/thumbnail.png" alt="모델링 시리즈: 시간" loading="lazy" class="block w-full object-cover shadow-[0_0_10px_2px_rgba(0,0,0,0.05)]" style="aspect-ratio: 16/9;" data-astro-cid-llggujpl> <div class="mt-3 text-xl leading-6 font-thin" data-astro-cid-llggujpl>모델링 시리즈: 시간</div> <small data-astro-cid-llggujpl>2025-05-06</small> </a><a href="/posts/the-shortcut/" class="related-post block scale-100 no-underline transition-all duration-[333ms] ease-[ease]" style="text-decoration: none;" data-astro-cid-llggujpl> <img src="/images/2024-05-10-the-shortcut/thumbnail.png" alt="기계의 반칙" loading="lazy" class="block w-full object-cover shadow-[0_0_10px_2px_rgba(0,0,0,0.05)]" style="aspect-ratio: 16/9;" data-astro-cid-llggujpl> <div class="mt-3 text-xl leading-6 font-thin" data-astro-cid-llggujpl>기계의 반칙</div> <small data-astro-cid-llggujpl>2024-05-10</small> </a> </div> </div>  </div> <footer class="m-8 text-center text-[#999]"> <div> <a href="https://github.com/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="GitHub" style="--hover-color: #343434; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.38.6.12.83-.26.83-.57v-2.2c-3.34.73-4.04-1.44-4.04-1.44-.55-1.38-1.33-1.75-1.33-1.75-1.09-.74.08-.73.08-.73 1.2.09 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49 1 .1-.78.42-1.3.76-1.6-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6.02 0c2.28-1.55 3.28-1.23 3.28-1.23.66 1.66.25 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .31.22.7.83.57C20.57 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z"/></svg></a><a href="https://www.facebook.com/sunhyoup.lee" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="Facebook" style="--hover-color: #3d5b99; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M24 12.07C24 5.41 18.63 0 12 0S0 5.41 0 12.07c0 6.02 4.39 11.02 10.13 11.93v-8.44H7.08v-3.49h3.04V9.41c0-3.02 1.79-4.68 4.53-4.68 1.31 0 2.68.24 2.68.24v2.97h-1.51c-1.49 0-1.95.93-1.95 1.88v2.26h3.33l-.53 3.49h-2.8v8.44C19.61 23.09 24 18.09 24 12.07z"/></svg></a><a href="https://www.linkedin.com/in/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="LinkedIn" style="--hover-color: #0073a4; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M20.45 20.45h-3.55v-5.57c0-1.33-.02-3.04-1.85-3.04-1.85 0-2.14 1.45-2.14 2.94v5.67H9.36V9h3.41v1.56h.05c.48-.9 1.64-1.85 3.37-1.85 3.6 0 4.27 2.37 4.27 5.46v6.28zM5.34 7.43a2.06 2.06 0 1 1 0-4.12 2.06 2.06 0 0 1 0 4.12zM7.12 20.45H3.56V9h3.56v11.45zM22.22 0H1.77C.79 0 0 .77 0 1.72v20.56C0 23.23.79 24 1.77 24h20.45C23.2 24 24 23.23 24 22.28V1.72C24 .77 23.2 0 22.22 0z"/></svg></a><a href="https://twitter.com/kciter" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="X (Twitter)" style="--hover-color: #343434; transition: color .5s; margin-right: 5px;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href="/feed.xml" target="_blank" rel="noopener noreferrer" class="social-icon inline-block p-[5px] no-underline" aria-label="RSS Feed" style="--hover-color: #ff6600; transition: color .5s;" data-astro-cid-yxtifmrq><svg class="inline-block h-4 w-4" viewBox="0 0 24 24" fill="currentColor" data-astro-cid-yxtifmrq><path d="M6.18 15.64a2.18 2.18 0 1 1 0 4.36 2.18 2.18 0 0 1 0-4.36zM4 4.44v3.57A12.01 12.01 0 0 1 15.99 20h3.57A15.57 15.57 0 0 0 4 4.44zM4 10.1v3.57c3.5 0 6.33 2.84 6.33 6.33h3.57c0-5.47-4.43-9.9-9.9-9.9z"/></svg></a> </div> <div class="mt-4 mb-4 font-['Quattrocento_Sans',sans-serif] text-[0.8rem] text-[#9a9a9a]"> <a href="/about/" class="p-2.5 text-[#999] hover:text-[#333]" style="text-decoration: none;">
kciter.so | devlog by Sunhyoup Lee
</a> </div> </footer> </div> </body></html> <script type="module">document.querySelectorAll(".post-container a[data-footnote-ref]").forEach(o=>{const e=o.getAttribute("href")?.slice(1);if(!e)return;const r=document.getElementById(e);if(!r)return;const t=r.textContent?.replace("↩","").trim()||"";o.setAttribute("data-tooltip",t)});document.querySelectorAll(".code-tabs").forEach(o=>{const e=Array.from(o.querySelectorAll(":scope > pre"));if(e.length<2)return;const r=o.getAttribute("data-labels")?.split(",").map(a=>a.trim()),t=document.createElement("div");t.className="code-tabs-bar",e.forEach((a,s)=>{const n=r?.[s]||a.getAttribute("data-language")||"code",c=document.createElement("button");c.textContent=n,r?.[s]&&c.classList.add("has-filename"),s===0&&c.classList.add("active"),c.addEventListener("click",()=>{t.querySelectorAll("button").forEach(l=>l.classList.remove("active")),e.forEach(l=>l.classList.remove("active")),c.classList.add("active"),e[s].classList.add("active")}),t.appendChild(c)}),e[0].classList.add("active"),o.prepend(t)});const i=document.querySelectorAll(".toc .toc-list a");if(i.length>0){const e=Array.from(i).map(t=>t.getAttribute("href")?.slice(1)).filter(Boolean).map(t=>document.getElementById(t)).filter(Boolean),r=new IntersectionObserver(t=>{for(const a of t)if(a.isIntersecting){const s=a.target.id;i.forEach(n=>{n.classList.toggle("active",n.getAttribute("href")===`#${s}`)})}},{rootMargin:"0px 0px -70% 0px",threshold:0});e.forEach(t=>r.observe(t))}</script>